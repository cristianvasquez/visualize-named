(()=>{let t;var e=globalThis,r={},n={},o=e.parcelRequire94c2;null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in n){var e=n[t];delete n[t];var o={id:t,exports:{}};return r[t]=o,e.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){n[t]=e},e.parcelRequire94c2=o);var i=o.register;function a(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})}i("3vj6M",function(t,e){var r;try{r=o("7GN1a")}catch(t){}r||(r=window.graphlib),t.exports=r}),i("7GN1a",function(t,e){var r=o("c397w");t.exports={Graph:r.Graph,json:o("9f8tS"),alg:o("768Bj"),version:r.version}}),i("c397w",function(t,e){t.exports={Graph:o("eK8oE"),version:o("6G3oS")}}),i("eK8oE",function(t,e){var r=o("dE3aD");function n(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function s(t,e,n,o){var i=""+e,a=""+n;if(!t&&i>a){var s=i;i=a,a=s}return i+"\x01"+a+"\x01"+(r.isUndefined(o)?"\0":o)}function u(t,e){return s(t,e.v,e.w,e.name)}t.exports=n,n.prototype._nodeCount=0,n.prototype._edgeCount=0,n.prototype.isDirected=function(){return this._isDirected},n.prototype.isMultigraph=function(){return this._isMultigraph},n.prototype.isCompound=function(){return this._isCompound},n.prototype.setGraph=function(t){return this._label=t,this},n.prototype.graph=function(){return this._label},n.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},n.prototype.nodeCount=function(){return this._nodeCount},n.prototype.nodes=function(){return r.keys(this._nodes)},n.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},n.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},n.prototype.setNodes=function(t,e){var n=arguments,o=this;return r.each(t,function(t){n.length>1?o.setNode(t,e):o.setNode(t)}),this},n.prototype.setNode=function(t,e){return r.has(this._nodes,t)?arguments.length>1&&(this._nodes[t]=e):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this},n.prototype.node=function(t){return this._nodes[t]},n.prototype.hasNode=function(t){return r.has(this._nodes,t)},n.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},n.prototype.setParent=function(t,e){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e="\0";else{e+="";for(var n=e;!r.isUndefined(n);n=this.parent(n))if(n===t)throw Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},n.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},n.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},n.prototype.children=function(t){if(r.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else if("\0"===t)return this.nodes();else if(this.hasNode(t))return[]},n.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},n.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},n.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},n.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},n.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(r,n){t(n)&&e.setNode(n,r)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var o={};return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,function t(r){var i=n.parent(r);return void 0===i||e.hasNode(i)?(o[r]=i,i):i in o?o[i]:t(i)}(t))}),e},n.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},n.prototype.edgeCount=function(){return this._edgeCount},n.prototype.edges=function(){return r.values(this._edgeObjs)},n.prototype.setPath=function(t,e){var n=this,o=arguments;return r.reduce(t,function(t,r){return o.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},n.prototype.setEdge=function(){var t,e,n,o,a=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(t=u.v,e=u.w,n=u.name,2==arguments.length&&(o=arguments[1],a=!0)):(t=u,e=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],a=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var d=s(this._isDirected,t,e,n);if(r.has(this._edgeLabels,d))return a&&(this._edgeLabels[d]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[d]=a?o:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,r,n){var o=""+e,i=""+r;if(!t&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return n&&(s.name=n),s}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[d]=l,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][d]=l,this._out[t][d]=l,this._edgeCount++,this},n.prototype.edge=function(t,e,r){var n=1==arguments.length?u(this._isDirected,arguments[0]):s(this._isDirected,t,e,r);return this._edgeLabels[n]},n.prototype.hasEdge=function(t,e,n){var o=1==arguments.length?u(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return r.has(this._edgeLabels,o)},n.prototype.removeEdge=function(t,e,r){var n=1==arguments.length?u(this._isDirected,arguments[0]):s(this._isDirected,t,e,r),o=this._edgeObjs[n];return o&&(t=o.v,e=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},n.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var o=r.values(n);return e?r.filter(o,function(t){return t.v===e}):o}},n.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var o=r.values(n);return e?r.filter(o,function(t){return t.w===e}):o}},n.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}}),i("dE3aD",function(t,e){var r;try{r={clone:o("kIqz2"),constant:o("b9IkD"),each:o("l9hnn"),filter:o("31LU8"),has:o("9GT8b"),isArray:o("6Lnro"),isEmpty:o("8ku2x"),isFunction:o("jszNw"),isUndefined:o("5VjJh"),keys:o("j7Pgn"),map:o("2TKBM"),reduce:o("9NasI"),size:o("Wt5Gh"),transform:o("h1I6F"),union:o("eWafo"),values:o("eolCs")}}catch(t){}r||(r=window._),t.exports=r}),i("kIqz2",function(t,e){var r=o("kzaQ8");t.exports=function(t){return r(t,4)}}),i("kzaQ8",function(t,e){var r=o("abWak"),n=o("jqArt"),i=o("9isRA"),a=o("sviK3"),s=o("lwZY6"),u=o("l0BR0"),d=o("4qSSq"),l=o("fCZ0B"),h=o("ixbZL"),c=o("2viWo"),f=o("63iG1"),g=o("fMYcx"),p=o("kWuVO"),v=o("hcU9w"),y=o("fb83i"),m=o("6Lnro"),x=o("8yjfX"),w=o("kBTZK"),b=o("5M7nH"),E=o("fNGSJ"),N=o("j7Pgn"),M=o("6ngQz"),_="[object Arguments]",k="[object Function]",j="[object Object]",O={};O[_]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[j]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[k]=O["[object WeakMap]"]=!1,t.exports=function t(e,o,A,S,z,I){var D,R=1&o,P=2&o,T=4&o;if(A&&(D=z?A(e,S,z,I):A(e)),void 0!==D)return D;if(!b(e))return e;var L=m(e);if(L){if(D=p(e),!R)return d(e,D)}else{var C=g(e),F=C==k||"[object GeneratorFunction]"==C;if(x(e))return u(e,R);if(C==j||C==_||F&&!z){if(D=P||F?{}:y(e),!R)return P?h(e,s(D,e)):l(e,a(D,e))}else{if(!O[C])return z?e:{};D=v(e,C,R)}}I||(I=new r);var q=I.get(e);if(q)return q;I.set(e,D),E(e)?e.forEach(function(r){D.add(t(r,o,A,r,e,I))}):w(e)&&e.forEach(function(r,n){D.set(n,t(r,o,A,n,e,I))});var B=T?P?f:c:P?M:N,V=L?void 0:B(e);return n(V||e,function(r,n){V&&(r=e[n=r]),i(D,n,t(r,o,A,n,e,I))}),D}}),i("abWak",function(t,e){var r=o("nSdhU"),n=o("5e7qB"),i=o("lwBwT"),a=o("jkZPF"),s=o("kPppJ"),u=o("4ai1a");function d(t){var e=this.__data__=new r(t);this.size=e.size}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=a,d.prototype.has=s,d.prototype.set=u,t.exports=d}),i("nSdhU",function(t,e){var r=o("e0n50"),n=o("5hsQa"),i=o("5BwSU"),a=o("dSo0a"),s=o("al82B");function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=r,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u}),i("e0n50",function(t,e){t.exports=function(){this.__data__=[],this.size=0}}),i("5hsQa",function(t,e){var r=o("6Lgbm"),n=Array.prototype.splice;t.exports=function(t){var e=this.__data__,o=r(e,t);return!(o<0)&&(o==e.length-1?e.pop():n.call(e,o,1),--this.size,!0)}}),i("6Lgbm",function(t,e){var r=o("gJ8Nu");t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return -1}}),i("gJ8Nu",function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}}),i("5BwSU",function(t,e){var r=o("6Lgbm");t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}}),i("dSo0a",function(t,e){var r=o("6Lgbm");t.exports=function(t){return r(this.__data__,t)>-1}}),i("al82B",function(t,e){var r=o("6Lgbm");t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}}),i("5e7qB",function(t,e){var r=o("nSdhU");t.exports=function(){this.__data__=new r,this.size=0}}),i("lwBwT",function(t,e){t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}}),i("jkZPF",function(t,e){t.exports=function(t){return this.__data__.get(t)}}),i("kPppJ",function(t,e){t.exports=function(t){return this.__data__.has(t)}}),i("4ai1a",function(t,e){var r=o("nSdhU"),n=o("krNFA"),i=o("hmXFj");t.exports=function(t,e){var o=this.__data__;if(o instanceof r){var a=o.__data__;if(!n||a.length<199)return a.push([t,e]),this.size=++o.size,this;o=this.__data__=new i(a)}return o.set(t,e),this.size=o.size,this}}),i("krNFA",function(t,e){var r=o("4J8an")(o("6c6tI"),"Map");t.exports=r}),i("4J8an",function(t,e){var r=o("24c2f"),n=o("8P65K");t.exports=function(t,e){var o=n(t,e);return r(o)?o:void 0}}),i("24c2f",function(t,e){var r=o("jszNw"),n=o("iUDp4"),i=o("5M7nH"),a=o("oJAWi"),s=/^\[object .+?Constructor\]$/,u=Object.prototype,d=Function.prototype.toString,l=u.hasOwnProperty,h=RegExp("^"+d.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||n(t))&&(r(t)?h:s).test(a(t))}}),i("jszNw",function(t,e){var r=o("fuLlh"),n=o("5M7nH");t.exports=function(t){if(!n(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}}),i("fuLlh",function(t,e){var r=o("bx7XH"),n=o("cDy9R"),i=o("4cbWB"),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?n(t):i(t)}}),i("bx7XH",function(t,e){var r=o("6c6tI").Symbol;t.exports=r}),i("6c6tI",function(t,e){var r=o("kXUyy"),n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")();t.exports=i}),i("kXUyy",function(t,r){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}),i("cDy9R",function(t,e){var r=o("bx7XH"),n=Object.prototype,i=n.hasOwnProperty,a=n.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=r:delete t[s]),o}}),i("4cbWB",function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}}),i("5M7nH",function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}}),i("iUDp4",function(t,e){var r,n=o("byoEp"),i=(r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}}),i("byoEp",function(t,e){var r=o("6c6tI")["__core-js_shared__"];t.exports=r}),i("oJAWi",function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}}),i("8P65K",function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}}),i("hmXFj",function(t,e){var r=o("9wvKI"),n=o("bRsFs"),i=o("3gWGz"),a=o("jySyt"),s=o("6sETD");function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=r,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u}),i("9wvKI",function(t,e){var r=o("5no0Y"),n=o("nSdhU"),i=o("krNFA");t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||n),string:new r}}}),i("5no0Y",function(t,e){var r=o("i2PMW"),n=o("9GpTD"),i=o("dMNK2"),a=o("7OSfN"),s=o("kEYBO");function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=r,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u}),i("i2PMW",function(t,e){var r=o("11stn");t.exports=function(){this.__data__=r?r(null):{},this.size=0}}),i("11stn",function(t,e){var r=o("4J8an")(Object,"create");t.exports=r}),i("9GpTD",function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}}),i("dMNK2",function(t,e){var r=o("11stn"),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var o=e[t];return"__lodash_hash_undefined__"===o?void 0:o}return n.call(e,t)?e[t]:void 0}}),i("7OSfN",function(t,e){var r=o("11stn"),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:n.call(e,t)}}),i("kEYBO",function(t,e){var r=o("11stn");t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}}),i("bRsFs",function(t,e){var r=o("dFA1a");t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}}),i("dFA1a",function(t,e){var r=o("c2ceU");t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}}),i("c2ceU",function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}}),i("3gWGz",function(t,e){var r=o("dFA1a");t.exports=function(t){return r(this,t).get(t)}}),i("jySyt",function(t,e){var r=o("dFA1a");t.exports=function(t){return r(this,t).has(t)}}),i("6sETD",function(t,e){var r=o("dFA1a");t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}}),i("jqArt",function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}}),i("9isRA",function(t,e){var r=o("hJTMd"),n=o("gJ8Nu"),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,o){var a=t[e];i.call(t,e)&&n(a,o)&&(void 0!==o||e in t)||r(t,e,o)}}),i("hJTMd",function(t,e){var r=o("u8Dni");t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}}),i("u8Dni",function(t,e){var r=o("4J8an"),n=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=n}),i("sviK3",function(t,e){var r=o("awXOT"),n=o("j7Pgn");t.exports=function(t,e){return t&&r(e,n(e),t)}}),i("awXOT",function(t,e){var r=o("9isRA"),n=o("hJTMd");t.exports=function(t,e,o,i){var a=!o;o||(o={});for(var s=-1,u=e.length;++s<u;){var d=e[s],l=i?i(o[d],t[d],d,o,t):void 0;void 0===l&&(l=t[d]),a?n(o,d,l):r(o,d,l)}return o}}),i("j7Pgn",function(t,e){var r=o("5j16r"),n=o("2FU6Q"),i=o("1AdOh");t.exports=function(t){return i(t)?r(t):n(t)}}),i("5j16r",function(t,e){var r=o("gSPEM"),n=o("2bPgf"),i=o("6Lnro"),a=o("8yjfX"),s=o("lNCBD"),u=o("3562c"),d=Object.prototype.hasOwnProperty;t.exports=function(t,e){var o=i(t),l=!o&&n(t),h=!o&&!l&&a(t),c=!o&&!l&&!h&&u(t),f=o||l||h||c,g=f?r(t.length,String):[],p=g.length;for(var v in t)(e||d.call(t,v))&&!(f&&("length"==v||h&&("offset"==v||"parent"==v)||c&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,p)))&&g.push(v);return g}}),i("gSPEM",function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}}),i("2bPgf",function(t,e){var r=o("l732U"),n=o("ksPtD"),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return n(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u}),i("l732U",function(t,e){var r=o("fuLlh"),n=o("ksPtD");t.exports=function(t){return n(t)&&"[object Arguments]"==r(t)}}),i("ksPtD",function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}}),i("6Lnro",function(t,e){var r=Array.isArray;t.exports=r}),i("8yjfX",function(t,e){var r=o("6c6tI"),n=o("b4Yjw"),i=e&&!e.nodeType&&e,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.Buffer:void 0,u=s?s.isBuffer:void 0;t.exports=u||n}),i("b4Yjw",function(t,e){t.exports=function(){return!1}}),i("lNCBD",function(t,e){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?0x1fffffffffffff:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}}),i("3562c",function(t,e){var r=o("1juqX"),n=o("f90Bo"),i=o("2t01p"),a=i&&i.isTypedArray,s=a?n(a):r;t.exports=s}),i("1juqX",function(t,e){var r=o("fuLlh"),n=o("4VGZv"),i=o("ksPtD"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&n(t.length)&&!!a[r(t)]}}),i("4VGZv",function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff}}),i("f90Bo",function(t,e){t.exports=function(t){return function(e){return t(e)}}}),i("2t01p",function(t,e){var r=o("kXUyy"),n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,a=i&&i.exports===n&&r.process,s=function(){try{var t=i&&i.require&&i.require("util").types;if(t)return t;return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}),i("2FU6Q",function(t,e){var r=o("5D2Yf"),n=o("3SSWJ"),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return n(t);var e=[];for(var o in Object(t))i.call(t,o)&&"constructor"!=o&&e.push(o);return e}}),i("5D2Yf",function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}}),i("3SSWJ",function(t,e){var r=o("02bSW")(Object.keys,Object);t.exports=r}),i("02bSW",function(t,e){t.exports=function(t,e){return function(r){return t(e(r))}}}),i("1AdOh",function(t,e){var r=o("jszNw"),n=o("4VGZv");t.exports=function(t){return null!=t&&n(t.length)&&!r(t)}}),i("lwZY6",function(t,e){var r=o("awXOT"),n=o("6ngQz");t.exports=function(t,e){return t&&r(e,n(e),t)}}),i("6ngQz",function(t,e){var r=o("5j16r"),n=o("eWK3r"),i=o("1AdOh");t.exports=function(t){return i(t)?r(t,!0):n(t)}}),i("eWK3r",function(t,e){var r=o("5M7nH"),n=o("5D2Yf"),i=o("dlhgd"),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=n(t),o=[];for(var s in t)"constructor"==s&&(e||!a.call(t,s))||o.push(s);return o}}),i("dlhgd",function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}}),i("l0BR0",function(t,e){var r=o("6c6tI"),n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,a=i&&i.exports===n?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}}),i("4qSSq",function(t,e){t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}}),i("fCZ0B",function(t,e){var r=o("awXOT"),n=o("75aoi");t.exports=function(t,e){return r(t,n(t),e)}}),i("75aoi",function(t,e){var r=o("DZS2r"),n=o("gBmnO"),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:r(a(t=Object(t)),function(e){return i.call(t,e)})}:n;t.exports=s}),i("DZS2r",function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}}),i("gBmnO",function(t,e){t.exports=function(){return[]}}),i("ixbZL",function(t,e){var r=o("awXOT"),n=o("7WMrL");t.exports=function(t,e){return r(t,n(t),e)}}),i("7WMrL",function(t,e){var r=o("1m8p8"),n=o("ir9nt"),i=o("75aoi"),a=o("gBmnO"),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=n(t);return e}:a;t.exports=s}),i("1m8p8",function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}}),i("ir9nt",function(t,e){var r=o("02bSW")(Object.getPrototypeOf,Object);t.exports=r}),i("2viWo",function(t,e){var r=o("ln55n"),n=o("75aoi"),i=o("j7Pgn");t.exports=function(t){return r(t,i,n)}}),i("ln55n",function(t,e){var r=o("1m8p8"),n=o("6Lnro");t.exports=function(t,e,o){var i=e(t);return n(t)?i:r(i,o(t))}}),i("63iG1",function(t,e){var r=o("ln55n"),n=o("7WMrL"),i=o("6ngQz");t.exports=function(t){return r(t,i,n)}}),i("fMYcx",function(t,e){var r=o("7SUY3"),n=o("krNFA"),i=o("7WNGP"),a=o("c4Q9m"),s=o("fMtOL"),u=o("fuLlh"),d=o("oJAWi"),l="[object Map]",h="[object Promise]",c="[object Set]",f="[object WeakMap]",g="[object DataView]",p=d(r),v=d(n),y=d(i),m=d(a),x=d(s),w=u;(r&&w(new r(new ArrayBuffer(1)))!=g||n&&w(new n)!=l||i&&w(i.resolve())!=h||a&&w(new a)!=c||s&&w(new s)!=f)&&(w=function(t){var e=u(t),r="[object Object]"==e?t.constructor:void 0,n=r?d(r):"";if(n)switch(n){case p:return g;case v:return l;case y:return h;case m:return c;case x:return f}return e}),t.exports=w}),i("7SUY3",function(t,e){var r=o("4J8an")(o("6c6tI"),"DataView");t.exports=r}),i("7WNGP",function(t,e){var r=o("4J8an")(o("6c6tI"),"Promise");t.exports=r}),i("c4Q9m",function(t,e){var r=o("4J8an")(o("6c6tI"),"Set");t.exports=r}),i("fMtOL",function(t,e){var r=o("4J8an")(o("6c6tI"),"WeakMap");t.exports=r}),i("kWuVO",function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}}),i("hcU9w",function(t,e){var r=o("fcG3q"),n=o("6HB4o"),i=o("9m6Ai"),a=o("8uhQw"),s=o("3NUbh");t.exports=function(t,e,o){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return n(t,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,o);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return i(t);case"[object Symbol]":return a(t)}}}),i("fcG3q",function(t,e){var r=o("gP712");t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}}),i("gP712",function(t,e){var r=o("6c6tI").Uint8Array;t.exports=r}),i("6HB4o",function(t,e){var r=o("fcG3q");t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}}),i("9m6Ai",function(t,e){var r=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}}),i("8uhQw",function(t,e){var r=o("bx7XH"),n=r?r.prototype:void 0,i=n?n.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}}),i("3NUbh",function(t,e){var r=o("fcG3q");t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}}),i("fb83i",function(t,e){var r=o("hV6rv"),n=o("ir9nt"),i=o("5D2Yf");t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(n(t))}}),i("hV6rv",function(t,e){var r=o("5M7nH"),n=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(n)return n(e);t.prototype=e;var o=new t;return t.prototype=void 0,o}}();t.exports=i}),i("kBTZK",function(t,e){var r=o("37t2C"),n=o("f90Bo"),i=o("2t01p"),a=i&&i.isMap,s=a?n(a):r;t.exports=s}),i("37t2C",function(t,e){var r=o("fMYcx"),n=o("ksPtD");t.exports=function(t){return n(t)&&"[object Map]"==r(t)}}),i("fNGSJ",function(t,e){var r=o("6YXMP"),n=o("f90Bo"),i=o("2t01p"),a=i&&i.isSet,s=a?n(a):r;t.exports=s}),i("6YXMP",function(t,e){var r=o("fMYcx"),n=o("ksPtD");t.exports=function(t){return n(t)&&"[object Set]"==r(t)}}),i("b9IkD",function(t,e){t.exports=function(t){return function(){return t}}}),i("l9hnn",function(t,e){t.exports=o("8Kqj3")}),i("8Kqj3",function(t,e){var r=o("jqArt"),n=o("2wHzT"),i=o("dgzF1"),a=o("6Lnro");t.exports=function(t,e){return(a(t)?r:n)(t,i(e))}}),i("2wHzT",function(t,e){var r=o("bOxbJ"),n=o("agmzx")(r);t.exports=n}),i("bOxbJ",function(t,e){var r=o("lWo9e"),n=o("j7Pgn");t.exports=function(t,e){return t&&r(t,e,n)}}),i("lWo9e",function(t,e){var r=o("9kvL4")();t.exports=r}),i("9kvL4",function(t,e){t.exports=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===r(i[u],u,i))break}return e}}}),i("agmzx",function(t,e){var r=o("1AdOh");t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&!1!==o(s[a],a,s););return n}}}),i("dgzF1",function(t,e){var r=o("1OIBO");t.exports=function(t){return"function"==typeof t?t:r}}),i("1OIBO",function(t,e){t.exports=function(t){return t}}),i("31LU8",function(t,e){var r=o("DZS2r"),n=o("auydN"),i=o("91VgU"),a=o("6Lnro");t.exports=function(t,e){return(a(t)?r:n)(t,i(e,3))}}),i("auydN",function(t,e){var r=o("2wHzT");t.exports=function(t,e){var n=[];return r(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}}),i("91VgU",function(t,e){var r=o("hIvDM"),n=o("kQ1gz"),i=o("1OIBO"),a=o("6Lnro"),s=o("3J2jz");t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?n(t[0],t[1]):r(t):s(t)}}),i("hIvDM",function(t,e){var r=o("xhuH3"),n=o("2eBWT"),i=o("8gtlO");t.exports=function(t){var e=n(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}}),i("xhuH3",function(t,e){var r=o("abWak"),n=o("1AEGU");t.exports=function(t,e,o,i){var a=o.length,s=a,u=!i;if(null==t)return!s;for(t=Object(t);a--;){var d=o[a];if(u&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++a<s;){var l=(d=o[a])[0],h=t[l],c=d[1];if(u&&d[2]){if(void 0===h&&!(l in t))return!1}else{var f=new r;if(i)var g=i(h,c,l,t,e,f);if(!(void 0===g?n(c,h,3,i,f):g))return!1}}return!0}}),i("1AEGU",function(t,e){var r=o("chAvj"),n=o("ksPtD");t.exports=function t(e,o,i,a,s){return e===o||(null!=e&&null!=o&&(n(e)||n(o))?r(e,o,i,a,t,s):e!=e&&o!=o)}}),i("chAvj",function(t,e){var r=o("abWak"),n=o("6ZeD2"),i=o("3EDcd"),a=o("4a2PS"),s=o("fMYcx"),u=o("6Lnro"),d=o("8yjfX"),l=o("3562c"),h="[object Arguments]",c="[object Array]",f="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,o,p,v,y){var m=u(t),x=u(e),w=m?c:s(t),b=x?c:s(e);w=w==h?f:w,b=b==h?f:b;var E=w==f,N=b==f,M=w==b;if(M&&d(t)){if(!d(e))return!1;m=!0,E=!1}if(M&&!E)return y||(y=new r),m||l(t)?n(t,e,o,p,v,y):i(t,e,w,o,p,v,y);if(!(1&o)){var _=E&&g.call(t,"__wrapped__"),k=N&&g.call(e,"__wrapped__");if(_||k){var j=_?t.value():t,O=k?e.value():e;return y||(y=new r),v(j,O,o,p,y)}}return!!M&&(y||(y=new r),a(t,e,o,p,v,y))}}),i("6ZeD2",function(t,e){var r=o("7UV5f"),n=o("28204"),i=o("6thNy");t.exports=function(t,e,o,a,s,u){var d=1&o,l=t.length,h=e.length;if(l!=h&&!(d&&h>l))return!1;var c=u.get(t),f=u.get(e);if(c&&f)return c==e&&f==t;var g=-1,p=!0,v=2&o?new r:void 0;for(u.set(t,e),u.set(e,t);++g<l;){var y=t[g],m=e[g];if(a)var x=d?a(m,y,g,e,t,u):a(y,m,g,t,e,u);if(void 0!==x){if(x)continue;p=!1;break}if(v){if(!n(e,function(t,e){if(!i(v,e)&&(y===t||s(y,t,o,a,u)))return v.push(e)})){p=!1;break}}else if(!(y===m||s(y,m,o,a,u))){p=!1;break}}return u.delete(t),u.delete(e),p}}),i("7UV5f",function(t,e){var r=o("hmXFj"),n=o("kcw1D"),i=o("5VfkT");function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=n,a.prototype.has=i,t.exports=a}),i("kcw1D",function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}}),i("5VfkT",function(t,e){t.exports=function(t){return this.__data__.has(t)}}),i("28204",function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}}),i("6thNy",function(t,e){t.exports=function(t,e){return t.has(e)}}),i("3EDcd",function(t,e){var r=o("bx7XH"),n=o("gP712"),i=o("gJ8Nu"),a=o("6ZeD2"),s=o("cLJxa"),u=o("acQM1"),d=r?r.prototype:void 0,l=d?d.valueOf:void 0;t.exports=function(t,e,r,o,d,h,c){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!h(new n(t),new n(e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=s;case"[object Set]":var g=1&o;if(f||(f=u),t.size!=e.size&&!g)break;var p=c.get(t);if(p)return p==e;o|=2,c.set(t,e);var v=a(f(t),f(e),o,d,h,c);return c.delete(t),v;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}}),i("cLJxa",function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}}),i("acQM1",function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}}),i("4a2PS",function(t,e){var r=o("2viWo"),n=Object.prototype.hasOwnProperty;t.exports=function(t,e,o,i,a,s){var u=1&o,d=r(t),l=d.length;if(l!=r(e).length&&!u)return!1;for(var h=l;h--;){var c=d[h];if(!(u?c in e:n.call(e,c)))return!1}var f=s.get(t),g=s.get(e);if(f&&g)return f==e&&g==t;var p=!0;s.set(t,e),s.set(e,t);for(var v=u;++h<l;){var y=t[c=d[h]],m=e[c];if(i)var x=u?i(m,y,c,e,t,s):i(y,m,c,t,e,s);if(!(void 0===x?y===m||a(y,m,o,i,s):x)){p=!1;break}v||(v="constructor"==c)}if(p&&!v){var w=t.constructor,b=e.constructor;w!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b)&&(p=!1)}return s.delete(t),s.delete(e),p}}),i("2eBWT",function(t,e){var r=o("3OiOJ"),n=o("j7Pgn");t.exports=function(t){for(var e=n(t),o=e.length;o--;){var i=e[o],a=t[i];e[o]=[i,a,r(a)]}return e}}),i("3OiOJ",function(t,e){var r=o("5M7nH");t.exports=function(t){return t==t&&!r(t)}}),i("8gtlO",function(t,e){t.exports=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}}}),i("kQ1gz",function(t,e){var r=o("1AEGU"),n=o("hu792"),i=o("byOzL"),a=o("dE0Np"),s=o("3OiOJ"),u=o("8gtlO"),d=o("bILU9");t.exports=function(t,e){return a(t)&&s(e)?u(d(t),e):function(o){var a=n(o,t);return void 0===a&&a===e?i(o,t):r(e,a,3)}}}),i("hu792",function(t,e){var r=o("cKBte");t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}}),i("cKBte",function(t,e){var r=o("jm9v1"),n=o("bILU9");t.exports=function(t,e){e=r(e,t);for(var o=0,i=e.length;null!=t&&o<i;)t=t[n(e[o++])];return o&&o==i?t:void 0}}),i("jm9v1",function(t,e){var r=o("6Lnro"),n=o("dE0Np"),i=o("aNrd2"),a=o("9W9zf");t.exports=function(t,e){return r(t)?t:n(t,e)?[t]:i(a(t))}}),i("dE0Np",function(t,e){var r=o("6Lnro"),n=o("j04ie"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var o=typeof t;return!!("number"==o||"symbol"==o||"boolean"==o||null==t||n(t))||a.test(t)||!i.test(t)||null!=e&&t in Object(e)}}),i("j04ie",function(t,e){var r=o("fuLlh"),n=o("ksPtD");t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==r(t)}}),i("aNrd2",function(t,e){var r=o("kHdHL"),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(n,function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)}),e});t.exports=a}),i("kHdHL",function(t,e){var r=o("c8Nnd");t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}}),i("c8Nnd",function(t,e){var r=o("hmXFj");function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw TypeError("Expected a function");var o=function(){var r=arguments,n=e?e.apply(this,r):r[0],i=o.cache;if(i.has(n))return i.get(n);var a=t.apply(this,r);return o.cache=i.set(n,a)||i,a};return o.cache=new(n.Cache||r),o}n.Cache=r,t.exports=n}),i("9W9zf",function(t,e){var r=o("dM8DA");t.exports=function(t){return null==t?"":r(t)}}),i("dM8DA",function(t,e){var r=o("bx7XH"),n=o("4l7sD"),i=o("6Lnro"),a=o("j04ie"),s=1/0,u=r?r.prototype:void 0,d=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return n(e,t)+"";if(a(e))return d?d.call(e):"";var r=e+"";return"0"==r&&1/e==-s?"-0":r}}),i("4l7sD",function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}}),i("bILU9",function(t,e){var r=o("j04ie"),n=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}}),i("byOzL",function(t,e){var r=o("kQOKJ"),n=o("jptYe");t.exports=function(t,e){return null!=t&&n(t,e,r)}}),i("kQOKJ",function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}}),i("jptYe",function(t,e){var r=o("jm9v1"),n=o("2bPgf"),i=o("6Lnro"),a=o("lNCBD"),s=o("4VGZv"),u=o("bILU9");t.exports=function(t,e,o){e=r(e,t);for(var d=-1,l=e.length,h=!1;++d<l;){var c=u(e[d]);if(!(h=null!=t&&o(t,c)))break;t=t[c]}return h||++d!=l?h:!!(l=null==t?0:t.length)&&s(l)&&a(c,l)&&(i(t)||n(t))}}),i("3J2jz",function(t,e){var r=o("79aVJ"),n=o("hrnKg"),i=o("dE0Np"),a=o("bILU9");t.exports=function(t){return i(t)?r(a(t)):n(t)}}),i("79aVJ",function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}}),i("hrnKg",function(t,e){var r=o("cKBte");t.exports=function(t){return function(e){return r(e,t)}}}),i("9GT8b",function(t,e){var r=o("l4vpG"),n=o("jptYe");t.exports=function(t,e){return null!=t&&n(t,e,r)}}),i("l4vpG",function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&r.call(t,e)}}),i("8ku2x",function(t,e){var r=o("2FU6Q"),n=o("fMYcx"),i=o("2bPgf"),a=o("6Lnro"),s=o("1AdOh"),u=o("8yjfX"),d=o("5D2Yf"),l=o("3562c"),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||i(t)))return!t.length;var e=n(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(d(t))return!r(t).length;for(var o in t)if(h.call(t,o))return!1;return!0}}),i("5VjJh",function(t,e){t.exports=function(t){return void 0===t}}),i("2TKBM",function(t,e){var r=o("4l7sD"),n=o("91VgU"),i=o("aElIh"),a=o("6Lnro");t.exports=function(t,e){return(a(t)?r:i)(t,n(e,3))}}),i("aElIh",function(t,e){var r=o("2wHzT"),n=o("1AdOh");t.exports=function(t,e){var o=-1,i=n(t)?Array(t.length):[];return r(t,function(t,r,n){i[++o]=e(t,r,n)}),i}}),i("9NasI",function(t,e){var r=o("2eQb6"),n=o("2wHzT"),i=o("91VgU"),a=o("9sSmW"),s=o("6Lnro");t.exports=function(t,e,o){var u=s(t)?r:a,d=arguments.length<3;return u(t,i(e,4),o,d,n)}}),i("2eQb6",function(t,e){t.exports=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}}),i("9sSmW",function(t,e){t.exports=function(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r}}),i("Wt5Gh",function(t,e){var r=o("2FU6Q"),n=o("fMYcx"),i=o("1AdOh"),a=o("7G2fC"),s=o("8etUN");t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?s(t):t.length;var e=n(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}}),i("7G2fC",function(t,e){var r=o("fuLlh"),n=o("6Lnro"),i=o("ksPtD");t.exports=function(t){return"string"==typeof t||!n(t)&&i(t)&&"[object String]"==r(t)}}),i("8etUN",function(t,e){var r=o("klJKL"),n=o("iqzji"),i=o("b5jGx");t.exports=function(t){return n(t)?i(t):r(t)}}),i("klJKL",function(t,e){var r=o("79aVJ")("length");t.exports=r}),i("iqzji",function(t,e){var r=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return r.test(t)}}),i("b5jGx",function(t,e){var r="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\ud83c[\udffb-\udfff]",i="[^"+r+"]",a="(?:\ud83c[\udde6-\uddff]){2}",s="[\ud800-\udbff][\udc00-\udfff]",u="(?:"+n+"|"+o+")?",d="[\\ufe0e\\ufe0f]?",l="(?:\\u200d(?:"+[i,a,s].join("|")+")"+d+u+")*",h=RegExp(o+"(?="+o+")|(?:"+[i+n+"?",n,a,s,"["+r+"]"].join("|")+")"+(d+u+l),"g");t.exports=function(t){for(var e=h.lastIndex=0;h.test(t);)++e;return e}}),i("h1I6F",function(t,e){var r=o("jqArt"),n=o("hV6rv"),i=o("bOxbJ"),a=o("91VgU"),s=o("ir9nt"),u=o("6Lnro"),d=o("8yjfX"),l=o("jszNw"),h=o("5M7nH"),c=o("3562c");t.exports=function(t,e,o){var f=u(t),g=f||d(t)||c(t);if(e=a(e,4),null==o){var p=t&&t.constructor;o=g?f?new p:[]:h(t)&&l(p)?n(s(t)):{}}return(g?r:i)(t,function(t,r,n){return e(o,t,r,n)}),o}}),i("eWafo",function(t,e){var r=o("5PH3S"),n=o("2WVBI"),i=o("2eV3d"),a=o("bK0EM"),s=n(function(t){return i(r(t,1,a,!0))});t.exports=s}),i("5PH3S",function(t,e){var r=o("1m8p8"),n=o("jfVlw");t.exports=function t(e,o,i,a,s){var u=-1,d=e.length;for(i||(i=n),s||(s=[]);++u<d;){var l=e[u];o>0&&i(l)?o>1?t(l,o-1,i,a,s):r(s,l):a||(s[s.length]=l)}return s}}),i("jfVlw",function(t,e){var r=o("bx7XH"),n=o("2bPgf"),i=o("6Lnro"),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||n(t)||!!(a&&t&&t[a])}}),i("2WVBI",function(t,e){var r=o("1OIBO"),n=o("dqf3K"),i=o("37GKK");t.exports=function(t,e){return i(n(t,e,r),t+"")}}),i("dqf3K",function(t,e){var r=o("3W5k5"),n=Math.max;t.exports=function(t,e,o){return e=n(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=n(i.length-e,0),u=Array(s);++a<s;)u[a]=i[e+a];a=-1;for(var d=Array(e+1);++a<e;)d[a]=i[a];return d[e]=o(u),r(t,this,d)}}}),i("3W5k5",function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}}),i("37GKK",function(t,e){var r=o("dLIsd"),n=o("9jbDA")(r);t.exports=n}),i("dLIsd",function(t,e){var r=o("b9IkD"),n=o("u8Dni"),i=o("1OIBO"),a=n?function(t,e){return n(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a}),i("9jbDA",function(t,e){var r=Date.now;t.exports=function(t){var e=0,n=0;return function(){var o=r(),i=16-(o-n);if(n=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}}),i("2eV3d",function(t,e){var r=o("7UV5f"),n=o("f277b"),i=o("8ZF7f"),a=o("6thNy"),s=o("7gjXW"),u=o("acQM1");t.exports=function(t,e,o){var d=-1,l=n,h=t.length,c=!0,f=[],g=f;if(o)c=!1,l=i;else if(h>=200){var p=e?null:s(t);if(p)return u(p);c=!1,l=a,g=new r}else g=e?[]:f;t:for(;++d<h;){var v=t[d],y=e?e(v):v;if(v=o||0!==v?v:0,c&&y==y){for(var m=g.length;m--;)if(g[m]===y)continue t;e&&g.push(y),f.push(v)}else l(g,y,o)||(g!==f&&g.push(y),f.push(v))}return f}}),i("f277b",function(t,e){var r=o("030fg");t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}}),i("030fg",function(t,e){var r=o("f8TvI"),n=o("8er12"),i=o("jHziP");t.exports=function(t,e,o){return e==e?i(t,e,o):r(t,n,o)}}),i("f8TvI",function(t,e){t.exports=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return -1}}),i("8er12",function(t,e){t.exports=function(t){return t!=t}}),i("jHziP",function(t,e){t.exports=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return -1}}),i("8ZF7f",function(t,e){t.exports=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}}),i("7gjXW",function(t,e){var r=o("c4Q9m"),n=o("hzUgc"),i=o("acQM1"),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:n;t.exports=a}),i("hzUgc",function(t,e){t.exports=function(){}}),i("bK0EM",function(t,e){var r=o("1AdOh"),n=o("ksPtD");t.exports=function(t){return n(t)&&r(t)}}),i("eolCs",function(t,e){var r=o("jRbvr"),n=o("j7Pgn");t.exports=function(t){return null==t?[]:r(t,n(t))}}),i("jRbvr",function(t,e){var r=o("4l7sD");t.exports=function(t,e){return r(e,function(e){return t[e]})}}),i("6G3oS",function(t,e){t.exports="2.1.8"}),i("9f8tS",function(t,e){var r=o("dE3aD"),n=o("eK8oE");t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:r.map(t.nodes(),function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}),edges:r.map(t.edges(),function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o})};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new n(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}}),i("768Bj",function(t,e){t.exports={components:o("gd6GX"),dijkstra:o("8icgS"),dijkstraAll:o("8bNME"),findCycles:o("adIh3"),floydWarshall:o("7QUkP"),isAcyclic:o("9GWhF"),postorder:o("gRywx"),preorder:o("bXHU9"),prim:o("lUPCj"),tarjan:o("2qJhE"),topsort:o("j1lry")}}),i("gd6GX",function(t,e){var r=o("dE3aD");t.exports=function(t){var e,n={},o=[];return r.each(t.nodes(),function(i){e=[],function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}(i),e.length&&o.push(e)}),o}}),i("8icgS",function(t,e){var r=o("dE3aD"),n=o("f2pjm");t.exports=function(t,e,r,o){return function(t,e,r,o){var i,a,s={},u=new n,d=function(t){var e=t.v!==i?t.v:t.w,n=s[e],o=r(t),d=a.distance+o;if(o<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);d<n.distance&&(n.distance=d,n.predecessor=i,u.decrease(e,d))};for(t.nodes().forEach(function(t){var r=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:r},u.add(t,r)});u.size()>0&&(a=s[i=u.removeMin()]).distance!==Number.POSITIVE_INFINITY;)o(i).forEach(d);return s}(t,String(e),r||i,o||function(e){return t.outEdges(e)})};var i=r.constant(1)}),i("f2pjm",function(t,e){var r=o("dE3aD");function n(){this._arr=[],this._keyIndices={}}t.exports=n,n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(t){return t.key})},n.prototype.has=function(t){return r.has(this._keyIndices,t)},n.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},n.prototype.min=function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},n.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},n.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,o=t;r<e.length&&(o=e[r].priority<e[o].priority?r:o,n<e.length&&(o=e[n].priority<e[o].priority?n:o),o!==t&&(this._swap(t,o),this._heapify(o)))},n.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;0!==t&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},n.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,o=r[t],i=r[e];r[t]=i,r[e]=o,n[i.key]=t,n[o.key]=e}}),i("8bNME",function(t,e){var r=o("8icgS"),n=o("dE3aD");t.exports=function(t,e,o){return n.transform(t.nodes(),function(n,i){n[i]=r(t,i,e,o)},{})}}),i("adIh3",function(t,e){var r=o("dE3aD"),n=o("2qJhE");t.exports=function(t){return r.filter(n(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}}),i("2qJhE",function(t,e){var r=o("dE3aD");t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach(function(a){r.has(o,a)||function a(s){var u=o[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(t){r.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(a(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))}),u.lowlink===u.index){var d,l=[];do o[d=n.pop()].onStack=!1,l.push(d);while(s!==d)i.push(l)}}(a)}),i}}),i("7QUkP",function(t,e){var r=o("dE3aD");t.exports=function(t,e,r){var o,i,a,s;return o=e||n,i=r||function(e){return t.outEdges(e)},a={},(s=t.nodes()).forEach(function(t){a[t]={},a[t][t]={distance:0},s.forEach(function(e){t!==e&&(a[t][e]={distance:Number.POSITIVE_INFINITY})}),i(t).forEach(function(e){var r=e.v===t?e.w:e.v,n=o(e);a[t][r]={distance:n,predecessor:t}})}),s.forEach(function(t){var e=a[t];s.forEach(function(r){var n=a[r];s.forEach(function(r){var o=n[t],i=e[r],a=n[r],s=o.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),a};var n=r.constant(1)}),i("9GWhF",function(t,e){var r=o("j1lry");t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}}),i("j1lry",function(t,e){var r=o("dE3aD");function n(t){var e={},n={},o=[];if(r.each(t.sinks(),function a(s){if(r.has(n,s))throw new i;r.has(e,s)||(n[s]=!0,e[s]=!0,r.each(t.predecessors(s),a),delete n[s],o.push(s))}),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=n,n.CycleException=i,i.prototype=Error()}),i("gRywx",function(t,e){var r=o("l5l9v");t.exports=function(t,e){return r(t,e,"post")}}),i("l5l9v",function(t,e){var r=o("dE3aD");t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,function(e){if(!t.hasNode(e))throw Error("Graph does not have node: "+e);(function t(e,n,o,i,a,s){!r.has(i,n)&&(i[n]=!0,o||s.push(n),r.each(a(n),function(r){t(e,r,o,i,a,s)}),o&&s.push(n))})(t,e,"post"===n,a,o,i)}),i}}),i("bXHU9",function(t,e){var r=o("l5l9v");t.exports=function(t,e){return r(t,e,"pre")}}),i("lUPCj",function(t,e){var r=o("dE3aD"),n=o("eK8oE"),i=o("f2pjm");t.exports=function(t,e){var o,a=new n,s={},u=new i;function d(t){var r=t.v===o?t.w:t.v,n=u.priority(r);if(void 0!==n){var i=e(t);i<n&&(s[r]=o,u.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),a.setNode(t)}),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(o=u.removeMin(),r.has(s,o))a.setEdge(o,s[o]);else if(l)throw Error("Input graph is not connected: "+t);else l=!0;t.nodeEdges(o).forEach(d)}return a}}),i("49gez",function(t,e){var r=o("Zsaag"),n=o("gALro"),i=o("cd7Ze"),a=o("gMe1c"),s=o("2o807"),u=s.normalizeRanks,d=o("8tz2F"),s=o("2o807"),l=s.removeEmptyRanks,h=o("16kgn"),c=o("jLtz5"),f=o("6YXm4"),g=o("jsxFr"),p=o("cYHD5"),s=o("2o807"),v=o("3vj6M").Graph;t.exports=function(t,e){var o=e&&e.debugTiming?s.time:s.notime;o("layout",function(){var e=o("  buildLayoutGraph",function(){var e,n;return e=new v({multigraph:!0,compound:!0}),n=k(t.graph()),e.setGraph(r.merge({},m,_(n,y),r.pick(n,x))),r.forEach(t.nodes(),function(n){var o=k(t.node(n));e.setNode(n,r.defaults(_(o,w),b)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var o=k(t.edge(n));e.setEdge(n,r.merge({},N,_(o,E),r.pick(o,M)))}),e});o("  runLayout",function(){o("    makeSpaceForEdgeLabels",function(){var t;t=e.graph(),t.ranksep/=2,r.forEach(e.edges(),function(r){var n=e.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}),o("    removeSelfEdges",function(){r.forEach(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}),o("    acyclic",function(){n.run(e)}),o("    nestingGraph.run",function(){h.run(e)}),o("    rank",function(){a(s.asNonCompoundGraph(e))}),o("    injectEdgeLabelProxies",function(){r.forEach(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),o={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};s.addDummyNode(e,"edge-proxy",o,"_ep")}})}),o("    removeEmptyRanks",function(){l(e)}),o("    nestingGraph.cleanup",function(){h.cleanup(e)}),o("    normalizeRanks",function(){u(e)}),o("    assignRankMinMax",function(){var t;t=0,r.forEach(e.nodes(),function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))}),e.graph().maxRank=t}),o("    removeEdgeLabelProxies",function(){r.forEach(e.nodes(),function(t){var r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}),o("    normalize.run",function(){i.run(e)}),o("    parentDummyChains",function(){d(e)}),o("    addBorderSegments",function(){c(e)}),o("    order",function(){g(e)}),o("    insertSelfEdges",function(){var t;t=s.buildLayerMatrix(e),r.forEach(t,function(t){var n=0;r.forEach(t,function(t,o){var i=e.node(t);i.order=o+n,r.forEach(i.selfEdges,function(t){s.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:o+ ++n,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})}),o("    adjustCoordinateSystem",function(){f.adjust(e)}),o("    position",function(){p(e)}),o("    positionSelfEdges",function(){r.forEach(e.nodes(),function(t){var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}})}),o("    removeBorderNodes",function(){r.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(r.last(n.borderLeft)),s=e.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}}),r.forEach(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}),o("    normalize.undo",function(){i.undo(e)}),o("    fixupEdgeLabelCoords",function(){r.forEach(e.edges(),function(t){var n=e.edge(t);if(r.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}),o("    undoCoordinateSystem",function(){f.undo(e)}),o("    translateGraph",function(){(function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;function d(t){var r=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,r-s/2),n=Math.max(n,r+s/2),o=Math.min(o,a-u/2),i=Math.max(i,a+u/2)}r.forEach(t.nodes(),function(e){d(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&d(n)}),e-=s,o-=u,r.forEach(t.nodes(),function(r){var n=t.node(r);n.x-=e,n.y-=o}),r.forEach(t.edges(),function(n){var i=t.edge(n);r.forEach(i.points,function(t){t.x-=e,t.y-=o}),r.has(i,"x")&&(i.x-=e),r.has(i,"y")&&(i.y-=o)}),a.width=n-e+s,a.height=i-o+u})(e)}),o("    assignNodeIntersects",function(){r.forEach(e.edges(),function(t){var r,n,o=e.edge(t),i=e.node(t.v),a=e.node(t.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift(s.intersectRect(i,r)),o.points.push(s.intersectRect(a,n))})}),o("    reversePoints",function(){r.forEach(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}),o("    acyclic.undo",function(){n.undo(e)})}),o("  updateInputGraph",function(){r.forEach(t.nodes(),function(r){var n=t.node(r),o=e.node(r);n&&(n.x=o.x,n.y=o.y,e.children(r).length&&(n.width=o.width,n.height=o.height))}),r.forEach(t.edges(),function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],w=["width","height"],b={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},M=["labelpos"];function _(t,e){return r.mapValues(r.pick(t,e),Number)}function k(t){var e={};return r.forEach(t,function(t,r){e[r.toLowerCase()]=t}),e}}),i("Zsaag",function(t,e){var r;try{r={cloneDeep:o("gppYT"),constant:o("b9IkD"),defaults:o("inXhc"),each:o("l9hnn"),filter:o("31LU8"),find:o("bnQtQ"),flatten:o("dLuFW"),forEach:o("8Kqj3"),forIn:o("cwu3B"),has:o("9GT8b"),isUndefined:o("5VjJh"),last:o("dVuY3"),map:o("2TKBM"),mapValues:o("hcOJM"),max:o("i8Ptf"),merge:o("aTjVP"),min:o("181Ac"),minBy:o("ceFm1"),now:o("9KBfX"),pick:o("fZ78u"),range:o("7hxWL"),reduce:o("9NasI"),sortBy:o("704Bk"),uniqueId:o("aMEwS"),values:o("eolCs"),zipObject:o("knUZO")}}catch(t){}r||(r=window._),t.exports=r}),i("gppYT",function(t,e){var r=o("kzaQ8");t.exports=function(t){return r(t,5)}}),i("inXhc",function(t,e){var r=o("2WVBI"),n=o("gJ8Nu"),i=o("6DXVX"),a=o("6ngQz"),s=Object.prototype,u=s.hasOwnProperty,d=r(function(t,e){t=Object(t);var r=-1,o=e.length,d=o>2?e[2]:void 0;for(d&&i(e[0],e[1],d)&&(o=1);++r<o;)for(var l=e[r],h=a(l),c=-1,f=h.length;++c<f;){var g=h[c],p=t[g];(void 0===p||n(p,s[g])&&!u.call(t,g))&&(t[g]=l[g])}return t});t.exports=d}),i("6DXVX",function(t,e){var r=o("gJ8Nu"),n=o("1AdOh"),i=o("lNCBD"),a=o("5M7nH");t.exports=function(t,e,o){if(!a(o))return!1;var s=typeof e;return("number"==s?!!(n(o)&&i(e,o.length)):"string"==s&&e in o)&&r(o[e],t)}}),i("bnQtQ",function(t,e){var r=o("6wHaX")(o("4kdUg"));t.exports=r}),i("6wHaX",function(t,e){var r=o("91VgU"),n=o("1AdOh"),i=o("j7Pgn");t.exports=function(t){return function(e,o,a){var s=Object(e);if(!n(e)){var u=r(o,3);e=i(e),o=function(t){return u(s[t],t,s)}}var d=t(e,o,a);return d>-1?s[u?e[d]:d]:void 0}}}),i("4kdUg",function(t,e){var r=o("f8TvI"),n=o("91VgU"),i=o("fBxK8"),a=Math.max;t.exports=function(t,e,o){var s=null==t?0:t.length;if(!s)return -1;var u=null==o?0:i(o);return u<0&&(u=a(s+u,0)),r(t,n(e,3),u)}}),i("fBxK8",function(t,e){var r=o("dbLah");t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}}),i("dbLah",function(t,e){var r=o("1cUEk"),n=1/0;t.exports=function(t){return t?(t=r(t))===n||t===-n?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}}),i("1cUEk",function(t,e){var r=o("1PiJ0"),n=o("5M7nH"),i=o("j04ie"),a=0/0,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return a;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var o=u.test(t);return o||d.test(t)?l(t.slice(2),o?2:8):s.test(t)?a:+t}}),i("1PiJ0",function(t,e){var r=o("abCj9"),n=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(n,""):t}}),i("abCj9",function(t,e){var r=/\s/;t.exports=function(t){for(var e=t.length;e--&&r.test(t.charAt(e)););return e}}),i("dLuFW",function(t,e){var r=o("5PH3S");t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}}),i("cwu3B",function(t,e){var r=o("lWo9e"),n=o("dgzF1"),i=o("6ngQz");t.exports=function(t,e){return null==t?t:r(t,n(e),i)}}),i("dVuY3",function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}}),i("hcOJM",function(t,e){var r=o("hJTMd"),n=o("bOxbJ"),i=o("91VgU");t.exports=function(t,e){var o={};return e=i(e,3),n(t,function(t,n,i){r(o,n,e(t,n,i))}),o}}),i("i8Ptf",function(t,e){var r=o("hoJOA"),n=o("eQm2o"),i=o("1OIBO");t.exports=function(t){return t&&t.length?r(t,i,n):void 0}}),i("hoJOA",function(t,e){var r=o("j04ie");t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],s=e(a);if(null!=s&&(void 0===u?s==s&&!r(s):n(s,u)))var u=s,d=a}return d}}),i("eQm2o",function(t,e){t.exports=function(t,e){return t>e}}),i("aTjVP",function(t,e){var r=o("dHpxK"),n=o("e9ipw")(function(t,e,n){r(t,e,n)});t.exports=n}),i("dHpxK",function(t,e){var r=o("abWak"),n=o("7MZGu"),i=o("lWo9e"),a=o("2gsyT"),s=o("5M7nH"),u=o("6ngQz"),d=o("lBht1");t.exports=function t(e,o,l,h,c){e!==o&&i(o,function(i,u){if(c||(c=new r),s(i))a(e,o,u,l,t,h,c);else{var f=h?h(d(e,u),i,u+"",e,o,c):void 0;void 0===f&&(f=i),n(e,u,f)}},u)}}),i("7MZGu",function(t,e){var r=o("hJTMd"),n=o("gJ8Nu");t.exports=function(t,e,o){(void 0===o||n(t[e],o))&&(void 0!==o||e in t)||r(t,e,o)}}),i("2gsyT",function(t,e){var r=o("7MZGu"),n=o("l0BR0"),i=o("3NUbh"),a=o("4qSSq"),s=o("fb83i"),u=o("2bPgf"),d=o("6Lnro"),l=o("bK0EM"),h=o("8yjfX"),c=o("jszNw"),f=o("5M7nH"),g=o("gXcQ0"),p=o("3562c"),v=o("lBht1"),y=o("c0GdO");t.exports=function(t,e,o,m,x,w,b){var E=v(t,o),N=v(e,o),M=b.get(N);if(M){r(t,o,M);return}var _=w?w(E,N,o+"",t,e,b):void 0,k=void 0===_;if(k){var j=d(N),O=!j&&h(N),A=!j&&!O&&p(N);_=N,j||O||A?d(E)?_=E:l(E)?_=a(E):O?(k=!1,_=n(N,!0)):A?(k=!1,_=i(N,!0)):_=[]:g(N)||u(N)?(_=E,u(E)?_=y(E):(!f(E)||c(E))&&(_=s(N))):k=!1}k&&(b.set(N,_),x(_,N,m,w,b),b.delete(N)),r(t,o,_)}}),i("gXcQ0",function(t,e){var r=o("fuLlh"),n=o("ir9nt"),i=o("ksPtD"),a=Object.prototype,s=Function.prototype.toString,u=a.hasOwnProperty,d=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=n(t);if(null===e)return!0;var o=u.call(e,"constructor")&&e.constructor;return"function"==typeof o&&o instanceof o&&s.call(o)==d}}),i("lBht1",function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}}),i("c0GdO",function(t,e){var r=o("awXOT"),n=o("6ngQz");t.exports=function(t){return r(t,n(t))}}),i("e9ipw",function(t,e){var r=o("2WVBI"),n=o("6DXVX");t.exports=function(t){return r(function(e,r){var o=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&n(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++o<i;){var u=r[o];u&&t(e,u,o,a)}return e})}}),i("181Ac",function(t,e){var r=o("hoJOA"),n=o("l8ksv"),i=o("1OIBO");t.exports=function(t){return t&&t.length?r(t,i,n):void 0}}),i("l8ksv",function(t,e){t.exports=function(t,e){return t<e}}),i("ceFm1",function(t,e){var r=o("hoJOA"),n=o("91VgU"),i=o("l8ksv");t.exports=function(t,e){return t&&t.length?r(t,n(e,2),i):void 0}}),i("9KBfX",function(t,e){var r=o("6c6tI");t.exports=function(){return r.Date.now()}}),i("fZ78u",function(t,e){var r=o("iK3qQ"),n=o("fPgAj")(function(t,e){return null==t?{}:r(t,e)});t.exports=n}),i("iK3qQ",function(t,e){var r=o("29t2n"),n=o("byOzL");t.exports=function(t,e){return r(t,e,function(e,r){return n(t,r)})}}),i("29t2n",function(t,e){var r=o("cKBte"),n=o("8SrgH"),i=o("jm9v1");t.exports=function(t,e,o){for(var a=-1,s=e.length,u={};++a<s;){var d=e[a],l=r(t,d);o(l,d)&&n(u,i(d,t),l)}return u}}),i("8SrgH",function(t,e){var r=o("9isRA"),n=o("jm9v1"),i=o("lNCBD"),a=o("5M7nH"),s=o("bILU9");t.exports=function(t,e,o,u){if(!a(t))return t;e=n(e,t);for(var d=-1,l=e.length,h=l-1,c=t;null!=c&&++d<l;){var f=s(e[d]),g=o;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(d!=h){var p=c[f];void 0===(g=u?u(p,f,c):void 0)&&(g=a(p)?p:i(e[d+1])?[]:{})}r(c,f,g),c=c[f]}return t}}),i("fPgAj",function(t,e){var r=o("dLuFW"),n=o("dqf3K"),i=o("37GKK");t.exports=function(t){return i(n(t,void 0,r),t+"")}}),i("7hxWL",function(t,e){var r=o("8iDWn")();t.exports=r}),i("8iDWn",function(t,e){var r=o("bbHDs"),n=o("6DXVX"),i=o("dbLah");t.exports=function(t){return function(e,o,a){return a&&"number"!=typeof a&&n(e,o,a)&&(o=a=void 0),e=i(e),void 0===o?(o=e,e=0):o=i(o),a=void 0===a?e<o?1:-1:i(a),r(e,o,a,t)}}}),i("bbHDs",function(t,e){var r=Math.ceil,n=Math.max;t.exports=function(t,e,o,i){for(var a=-1,s=n(r((e-t)/(o||1)),0),u=Array(s);s--;)u[i?s:++a]=t,t+=o;return u}}),i("704Bk",function(t,e){var r=o("5PH3S"),n=o("c2mLX"),i=o("2WVBI"),a=o("6DXVX"),s=i(function(t,e){if(null==t)return[];var o=e.length;return o>1&&a(t,e[0],e[1])?e=[]:o>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),n(t,r(e,1),[])});t.exports=s}),i("c2mLX",function(t,e){var r=o("4l7sD"),n=o("cKBte"),i=o("91VgU"),a=o("aElIh"),s=o("e8gxq"),u=o("f90Bo"),d=o("icOnV"),l=o("1OIBO"),h=o("6Lnro");t.exports=function(t,e,o){e=e.length?r(e,function(t){return h(t)?function(e){return n(e,1===t.length?t[0]:t)}:t}):[l];var c=-1;return e=r(e,u(i)),s(a(t,function(t,n,o){return{criteria:r(e,function(e){return e(t)}),index:++c,value:t}}),function(t,e){return d(t,e,o)})}}),i("e8gxq",function(t,e){t.exports=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}}),i("icOnV",function(t,e){var r=o("8Zp98");t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,s=i.length,u=n.length;++o<s;){var d=r(i[o],a[o]);if(d){if(o>=u)return d;return d*("desc"==n[o]?-1:1)}}return t.index-e.index}}),i("8Zp98",function(t,e){var r=o("j04ie");t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,a=r(t),s=void 0!==e,u=null===e,d=e==e,l=r(e);if(!u&&!l&&!a&&t>e||a&&s&&d&&!u&&!l||o&&s&&d||!n&&d||!i)return 1;if(!o&&!a&&!l&&t<e||l&&n&&i&&!o&&!a||u&&n&&i||!s&&i||!d)return -1}return 0}}),i("aMEwS",function(t,e){var r=o("9W9zf"),n=0;t.exports=function(t){var e=++n;return r(t)+e}}),i("knUZO",function(t,e){var r=o("9isRA"),n=o("jsOea");t.exports=function(t,e){return n(t||[],e||[],r)}}),i("jsOea",function(t,e){t.exports=function(t,e,r){for(var n=-1,o=t.length,i=e.length,a={};++n<o;){var s=n<i?e[n]:void 0;r(a,t[n],s)}return a}}),i("gALro",function(t,e){var r=o("Zsaag"),n=o("5GMPT");t.exports={run:function(t){var e,o,i,a="greedy"===t.graph().acyclicer?n(t,function(e){return t.edge(e).weight}):(e=[],o={},i={},r.forEach(t.nodes(),function n(a){r.has(i,a)||(i[a]=!0,o[a]=!0,r.forEach(t.outEdges(a),function(t){r.has(o,t.w)?e.push(t):n(t.w)}),delete o[a])}),e);r.forEach(a,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})}}}),i("5GMPT",function(t,e){var r=o("Zsaag"),n=o("3vj6M").Graph,i=o("g08PX");t.exports=function(t,e){if(1>=t.nodeCount())return[];var o,d,l,h,c,f,g=(o=e||a,d=new n,l=0,h=0,r.forEach(t.nodes(),function(t){d.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var e=d.edge(t.v,t.w)||0,r=o(t);d.setEdge(t.v,t.w,e+r),h=Math.max(h,d.node(t.v).out+=r),l=Math.max(l,d.node(t.w).in+=r)}),c=r.range(h+l+3).map(function(){return new i}),f=l+1,r.forEach(d.nodes(),function(t){u(c,f,d.node(t))}),{graph:d,buckets:c,zeroIdx:f}),p=function(t,e,r){for(var n,o=[],i=e[e.length-1],a=e[0];t.nodeCount();){for(;n=a.dequeue();)s(t,e,r,n);for(;n=i.dequeue();)s(t,e,r,n);if(t.nodeCount()){for(var u=e.length-2;u>0;--u)if(n=e[u].dequeue()){o=o.concat(s(t,e,r,n,!0));break}}}return o}(g.graph,g.buckets,g.zeroIdx);return r.flatten(r.map(p,function(e){return t.outEdges(e.v,e.w)}),!0)};var a=r.constant(1);function s(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),function(r){var o=t.edge(r),s=t.node(r.v);i&&a.push({v:r.v,w:r.w}),s.out-=o,u(e,n,s)}),r.forEach(t.outEdges(o.v),function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,u(e,n,a)}),t.removeNode(o.v),a}function u(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}}),i("g08PX",function(t,e){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,o)),r=r._prev;return"["+t.join(", ")+"]"}}),i("cd7Ze",function(t,e){var r=o("Zsaag"),n=o("2o807");t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){(function(t,e){var r,o,i,a=e.v,s=t.node(a).rank,u=e.w,d=t.node(u).rank,l=e.name,h=t.edge(e),c=h.labelRank;if(d!==s+1){for(t.removeEdge(e),i=0,++s;s<d;++i,++s)h.points=[],o={width:0,height:0,edgeLabel:h,edgeObj:e,rank:s},r=n.addDummyNode(t,"edge",o,"_d"),s===c&&(o.width=h.width,o.height=h.height,o.dummy="edge-label",o.labelpos=h.labelpos),t.setEdge(a,r,{weight:h.weight},l),0===i&&t.graph().dummyChains.push(r),a=r;t.setEdge(a,u,{weight:h.weight},l)}})(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var r,n=t.node(e),o=n.edgeLabel;for(t.setEdge(n.edgeObj,o);n.dummy;)r=t.successors(e)[0],t.removeNode(e),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),e=r,n=t.node(e)})}}}),i("2o807",function(t,e){var r=o("Zsaag"),n=o("3vj6M").Graph;function i(t,e,n,o){var i;do i=r.uniqueId(o);while(t.hasNode(i))return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:i,simplify:function(t){var e=new n().setGraph(t.graph());return r.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),r.forEach(t.edges(),function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},o=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),e},asNonCompoundGraph:function(t){var e=new n({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),r.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,o=t.x,i=t.y,a=e.x-o,s=e.y-i,u=t.width/2,d=t.height/2;if(!a&&!s)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*d?(s<0&&(d=-d),r=d*a/s,n=d):(a<0&&(u=-u),r=u,n=u*s/a),{x:o+r,y:i+n}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)}),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var o=t.node(n);r.has(o,"rank")&&(o.rank-=e)})},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)});var o=0,i=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%i!=0?--o:o&&r.forEach(e,function(e){t.node(e).rank+=o})})},addBorderNode:function(t,e,r,n){var o={width:0,height:0};return arguments.length>=4&&(o.rank=r,o.order=n),i(t,"border",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}}),i("gMe1c",function(t,e){var r=o("dih8c").longestPath,n=o("2gZew"),i=o("j10J1");t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:i(t);break;case"tight-tree":r(t),n(t);break;case"longest-path":a(t)}};var a=r}),i("dih8c",function(t,e){var r=o("Zsaag");t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),function(e){return n(e.w)-t.edge(e).minlen}));return(a===Number.POSITIVE_INFINITY||null==a)&&(a=0),i.rank=a})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}}),i("2gZew",function(t,e){var r=o("Zsaag"),n=o("3vj6M").Graph,i=o("dih8c").slack;t.exports=function(t){var e,o,a=new n({directed:!1}),s=t.nodes()[0],u=t.nodeCount();for(a.setNode(s,{});r.forEach(a.nodes(),function e(n){r.forEach(t.nodeEdges(n),function(r){var o=r.v,s=n===o?r.w:o;a.hasNode(s)||i(t,r)||(a.setNode(s,{}),a.setEdge(n,s,{}),e(s))})}),a.nodeCount()<u;)e=function(t,e){return r.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return i(e,r)})}(a,t),o=a.hasNode(e.v)?i(t,e):-i(t,e),function(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}(a,t,o);return a}}),i("j10J1",function(t,e){var r=o("Zsaag"),n=o("2gZew"),i=o("dih8c"),a=i.slack,i=o("dih8c"),s=i.longestPath,u=o("3vj6M").alg.preorder,d=o("3vj6M").alg.postorder,l=o("2o807").simplify;function h(t){s(t=l(t));var e,r,o=n(t);for(g(o),c(o,t);e=p(o);)r=v(o,t,e),y(o,t,e,r)}function c(t,e){var n=d(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(r){var n;n=t.node(r).parent,t.edge(r,n).cutvalue=f(t,e,r)})}function f(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),s=0;return a||(i=!1,a=e.edge(o,n)),s=a.weight,r.forEach(e.nodeEdges(n),function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==o){var d=a===i,l=e.edge(r).weight;if(s+=d?l:-l,t.hasEdge(n,u)){var h=t.edge(n,u).cutvalue;s+=d?-h:h}}}),s}function g(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,o,i,a){var s=o,u=e.node(i);return n[i]=!0,r.forEach(e.neighbors(i),function(a){r.has(n,a)||(o=t(e,n,o,a,i))}),u.low=s,u.lim=o++,a?u.parent=a:delete u.parent,o}(t,{},1,e)}function p(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function v(t,e,n){var o=n.v,i=n.w;e.hasEdge(o,i)||(o=n.w,i=n.v);var s=t.node(o),u=t.node(i),d=s,l=!1;s.lim>u.lim&&(d=u,l=!0);var h=r.filter(e.edges(),function(e){return l===m(t,t.node(e.v),d)&&l!==m(t,t.node(e.w),d)});return r.minBy(h,function(t){return a(e,t)})}function y(t,e,n,o){var i,a,s=n.v,d=n.w;t.removeEdge(s,d),t.setEdge(o.v,o.w,{}),g(t),c(t,e),i=r.find(t.nodes(),function(t){return!e.node(t).parent}),a=(a=u(t,i)).slice(1),r.forEach(a,function(r){var n=t.node(r).parent,o=e.edge(r,n),i=!1;o||(o=e.edge(n,r),i=!0),e.node(r).rank=e.node(n).rank+(i?o.minlen:-o.minlen)})}function m(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}t.exports=h,h.initLowLimValues=g,h.initCutValues=c,h.calcCutValue=f,h.leaveEdge=p,h.enterEdge=v,h.exchangeEdges=y}),i("8tz2F",function(t,e){var r=o("Zsaag");t.exports=function(t){var e,n,o=(e={},n=0,r.forEach(t.children(),function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}),e);r.forEach(t.graph().dummyChains,function(e){for(var r=t.node(e),n=r.edgeObj,i=function(t,e,r,n){var o,i,a=[],s=[],u=Math.min(e[r].low,e[n].low),d=Math.max(e[r].lim,e[n].lim);o=r;do a.push(o=t.parent(o));while(o&&(e[o].low>u||d>e[o].lim))for(i=o,o=n;(o=t.parent(o))!==i;)s.push(o);return{path:a.concat(s.reverse()),lca:i}}(t,o,n.v,n.w),a=i.path,s=i.lca,u=0,d=a[0],l=!0;e!==n.w;){if(r=t.node(e),l){for(;(d=a[u])!==s&&t.node(d).maxRank<r.rank;)u++;d===s&&(l=!1)}if(!l){for(;u<a.length-1&&t.node(d=a[u+1]).minRank<=r.rank;)u++;d=a[u]}t.setParent(e,d),e=t.successors(e)[0]}})}}),i("16kgn",function(t,e){var r=o("Zsaag"),n=o("2o807");t.exports={run:function(t){var e,o=n.addDummyNode(t,"root",{},"_root"),i=(e={},r.forEach(t.children(),function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,function(t){n(t,i+1)}),e[o]=i}(n,1)}),e),a=r.max(r.values(i))-1,s=2*a+1;t.graph().nestingRoot=o,r.forEach(t.edges(),function(e){t.edge(e).minlen*=s});var u=r.reduce(t.edges(),function(e,r){return e+t.edge(r).weight},0)+1;r.forEach(t.children(),function(e){(function t(e,o,i,a,s,u,d){var l=e.children(d);if(!l.length){d!==o&&e.setEdge(o,d,{weight:0,minlen:i});return}var h=n.addBorderNode(e,"_bt"),c=n.addBorderNode(e,"_bb"),f=e.node(d);e.setParent(h,d),f.borderTop=h,e.setParent(c,d),f.borderBottom=c,r.forEach(l,function(r){t(e,o,i,a,s,u,r);var n=e.node(r),l=n.borderTop?n.borderTop:r,f=n.borderBottom?n.borderBottom:r,g=n.borderTop?a:2*a,p=l!==f?1:s-u[d]+1;e.setEdge(h,l,{weight:g,minlen:p,nestingEdge:!0}),e.setEdge(f,c,{weight:g,minlen:p,nestingEdge:!0})}),e.parent(d)||e.setEdge(o,h,{weight:0,minlen:s+u[d]})})(t,o,s,u,a,i,e)}),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}}),i("jLtz5",function(t,e){var r=o("Zsaag"),n=o("2o807");function i(t,e,r,o,i,a){var s=i[e][a-1],u=n.addDummyNode(t,"border",{width:0,height:0,rank:a,borderType:e},r);i[e][a]=u,t.setParent(u,o),s&&t.setEdge(s,u,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)i(t,"borderLeft","_bl",n,a,s),i(t,"borderRight","_br",n,a,s)}})}}),i("6YXm4",function(t,e){var r=o("Zsaag");function n(t){r.forEach(t.nodes(),function(e){i(t.node(e))}),r.forEach(t.edges(),function(e){i(t.edge(e))})}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();("lr"===e||"rl"===e)&&n(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();("bt"===e||"rl"===e)&&(r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)})),("lr"===e||"rl"===e)&&(r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"x")&&s(n)}),n(t))}}}),i("jsxFr",function(t,e){var r=o("Zsaag"),n=o("g2Xww"),i=o("fMlSg"),a=o("gGdHX"),s=o("k9Bjy"),u=o("5tdo0"),d=o("3vj6M").Graph,l=o("2o807");function h(t,e,n){return r.map(e,function(e){return s(t,e,n)})}function c(t,e){r.forEach(e,function(e){r.forEach(e,function(e,r){t.node(e).order=r})})}t.exports=function(t){var e=l.maxRank(t),o=h(t,r.range(1,e+1),"inEdges"),s=h(t,r.range(e-1,-1,-1),"outEdges"),f=n(t);c(t,f);for(var g,p=Number.POSITIVE_INFINITY,v=0,y=0;y<4;++v,++y){(function(t,e){var n=new d;r.forEach(t,function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,function(e,r){t.node(e).order=r}),u(t,n,i.vs)})})(v%2?o:s,v%4>=2),f=l.buildLayerMatrix(t);var m=i(t,f);m<p&&(y=0,g=r.cloneDeep(f),p=m)}c(t,g)}}),i("g2Xww",function(t,e){var r=o("Zsaag");t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),o=r.max(r.map(n,function(e){return t.node(e).rank})),i=r.map(r.range(o+1),function(){return[]}),a=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(a,function n(o){r.has(e,o)||(e[o]=!0,i[t.node(o).rank].push(o),r.forEach(t.successors(o),n))}),i}}),i("fMlSg",function(t,e){var r=o("Zsaag");t.exports=function(t,e){for(var n=0,o=1;o<e.length;++o)n+=function(t,e,n){for(var o=r.zipObject(n,r.map(n,function(t,e){return e})),i=r.flatten(r.map(e,function(e){return r.sortBy(r.map(t.outEdges(e),function(e){return{pos:o[e.w],weight:t.edge(e).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=r.map(Array(s),function(){return 0}),d=0;return r.forEach(i.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=u[e+1]),e=e-1>>1,u[e]+=t.weight;d+=t.weight*r})),d}(t,e[o-1],e[o]);return n}}),i("gGdHX",function(t,e){var r=o("Zsaag"),n=o("ikoBy"),i=o("iemhI"),a=o("gn4d4");t.exports=function t(e,o,s,u){var d=e.children(o),l=e.node(o),h=l?l.borderLeft:void 0,c=l?l.borderRight:void 0,f={};h&&(d=r.filter(d,function(t){return t!==h&&t!==c}));var g=n(e,d);r.forEach(g,function(n){if(e.children(n.v).length){var o=t(e,n.v,s,u);f[n.v]=o,r.has(o,"barycenter")&&(r.isUndefined(n.barycenter)?(n.barycenter=o.barycenter,n.weight=o.weight):(n.barycenter=(n.barycenter*n.weight+o.barycenter*o.weight)/(n.weight+o.weight),n.weight+=o.weight))}});var p=i(g,s);r.forEach(p,function(t){t.vs=r.flatten(t.vs.map(function(t){return f[t]?f[t].vs:t}),!0)});var v=a(p,u);if(h&&(v.vs=r.flatten([h,v.vs,c],!0),e.predecessors(h).length)){var y=e.node(e.predecessors(h)[0]),m=e.node(e.predecessors(c)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+m.order)/(v.weight+2),v.weight+=2}return v}}),i("ikoBy",function(t,e){var r=o("Zsaag");t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(!n.length)return{v:e};var o=r.reduce(n,function(e,r){var n=t.edge(r),o=t.node(r.v);return{sum:e.sum+n.weight*o.order,weight:e.weight+n.weight}},{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}})}}),i("iemhI",function(t,e){var r=o("Zsaag");t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))}),function(t){for(var e=[];t.length;){var n=t.pop();e.push(n),r.forEach(n.in.reverse(),function(t){return function(e){!e.merged&&(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}(n)),r.forEach(n.out,function(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}(n))}return r.map(r.filter(e,function(t){return!t.merged}),function(t){return r.pick(t,["vs","i","barycenter","weight"])})}(r.filter(n,function(t){return!t.indegree}))}}),i("gn4d4",function(t,e){var r=o("Zsaag"),n=o("2o807");function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var o,a=n.partition(t,function(t){return r.has(t,"barycenter")}),s=a.lhs,u=r.sortBy(a.rhs,function(t){return-t.i}),d=[],l=0,h=0,c=0;s.sort((o=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:o?e.i-t.i:t.i-e.i})),c=i(d,u,c),r.forEach(s,function(t){c+=t.vs.length,d.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,c=i(d,u,c)});var f={vs:r.flatten(d,!0)};return h&&(f.barycenter=l/h,f.weight=h),f}}),i("k9Bjy",function(t,e){var r=o("Zsaag"),n=o("3vj6M").Graph;t.exports=function(t,e,o){var i=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new n({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(n){var s=t.node(n),u=t.parent(n);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(n),a.setParent(n,u||i),r.forEach(t[o](n),function(e){var o=e.v===n?e.w:e.v,i=a.edge(o,n),s=r.isUndefined(i)?0:i.weight;a.setEdge(o,n,{weight:t.edge(e).weight+s})}),r.has(s,"minRank")&&a.setNode(n,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}}),i("5tdo0",function(t,e){var r=o("Zsaag");t.exports=function(t,e,n){var o,i={};r.forEach(n,function(r){for(var n,a,s=t.parent(r);s;){if((n=t.parent(s))?(a=i[n],i[n]=s):(a=o,o=s),a&&a!==s){e.setEdge(a,s);return}s=n}})}}),i("cYHD5",function(t,e){var r=o("Zsaag"),n=o("2o807"),i=o("8Ibf3").positionX;t.exports=function(t){var e,o,a,s;e=t=n.asNonCompoundGraph(t),o=n.buildLayerMatrix(e),a=e.graph().ranksep,s=0,r.forEach(o,function(t){var n=r.max(r.map(t,function(t){return e.node(t).height}));r.forEach(t,function(t){e.node(t).y=s+n/2}),s+=n+a}),r.forEach(i(t),function(e,r){t.node(r).x=e})}}),i("8Ibf3",function(t,e){var r=o("Zsaag"),n=o("3vj6M").Graph,i=o("2o807");function a(t,e){var n={};return r.reduce(e,function(e,o){var i=0,a=0,s=e.length,d=r.last(o);return r.forEach(o,function(e,l){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),c=h?t.node(h).order:s;(h||e===d)&&(r.forEach(o.slice(a,l+1),function(e){r.forEach(t.predecessors(e),function(r){var o=t.node(r),a=o.order;(a<i||c<a)&&!(o.dummy&&t.node(e).dummy)&&u(n,r,e)})}),a=l+1,i=c)}),o}),n}function s(t,e){var n={};function o(e,o,i,a,s){var d;r.forEach(r.range(o,i),function(o){d=e[o],t.node(d).dummy&&r.forEach(t.predecessors(d),function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>s)&&u(n,e,d)})})}return r.reduce(e,function(e,n){var i,a=-1,s=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var d=t.predecessors(r);d.length&&(i=t.node(d[0]).order,o(n,s,u,a,i),s=u,a=i)}o(n,s,n.length,i,e.length)}),n}),n}function u(t,e,r){if(e>r){var n=e;e=r,r=n}var o=t[e];o||(t[e]=o={}),o[r]=!0}function d(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function l(t,e,n,o){var i={},a={},s={};return r.forEach(e,function(t){r.forEach(t,function(t,e){i[t]=t,a[t]=t,s[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=o(t);if(u.length)for(var l=((u=r.sortBy(u,function(t){return s[t]})).length-1)/2,h=Math.floor(l),c=Math.ceil(l);h<=c;++h){var f=u[h];a[t]===t&&e<s[f]&&!d(n,t,f)&&(a[f]=t,a[t]=i[t]=i[f],e=s[f])}})}),{root:i,align:a}}function h(t,e,o,i,a){var s,u,d,l,h,c={},f=(d=new n,s=(l=t.graph()).nodesep,u=l.edgesep,h=function(t,e,n){var o,i,d=t.node(e),l=t.node(n);if(o=0+d.width/2,r.has(d,"labelpos"))switch(d.labelpos.toLowerCase()){case"l":i=-d.width/2;break;case"r":i=d.width/2}if(i&&(o+=a?i:-i),i=0,o+=(d.dummy?u:s)/2,o+=(l.dummy?u:s)/2,o+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":i=l.width/2;break;case"r":i=-l.width/2}return i&&(o+=a?i:-i),i=0,o},r.forEach(e,function(e){var n;r.forEach(e,function(e){var r=o[e];if(d.setNode(r),n){var i=o[n],a=d.edge(i,r);d.setEdge(i,r,Math.max(h(t,e,n),a||0))}n=e})}),d),g=a?"borderLeft":"borderRight";function p(t,e){for(var r=f.nodes(),n=r.pop(),o={};n;)o[n]?t(n):(o[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()}return p(function(t){c[t]=f.inEdges(t).reduce(function(t,e){return Math.max(t,c[e.v]+f.edge(e))},0)},f.predecessors.bind(f)),p(function(e){var r=f.outEdges(e).reduce(function(t,e){return Math.min(t,c[e.w]-f.edge(e))},Number.POSITIVE_INFINITY),n=t.node(e);r!==Number.POSITIVE_INFINITY&&n.borderType!==g&&(c[e]=Math.max(c[e],r))},f.successors.bind(f)),r.forEach(i,function(t){c[t]=c[o[t]]}),c}function c(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var i=t.node(r).width/2;n=Math.max(e+i,n),o=Math.min(e-i,o)}),n-o})}function f(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,u=n+a,d=t[u];if(d!==e){var l=r.values(d);(s="l"===a?o-r.min(l):i-r.max(l))&&(t[u]=r.mapValues(d,function(t){return t+s}))}})})}function g(t,e){return r.mapValues(t.ul,function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2})}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),s(t,n)),u={};r.forEach(["u","d"],function(i){e="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var a=("u"===i?t.predecessors:t.successors).bind(t),s=l(t,e,o,a),d=h(t,e,s.root,s.align,"r"===n);"r"===n&&(d=r.mapValues(d,function(t){return-t})),u[i+n]=d})});var d=c(t,u);return f(u,d),g(u,t.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:u,hasConflict:d,verticalAlignment:l,horizontalCompaction:h,alignCoordinates:f,findSmallestWidthAlignment:c,balance:g}}),i("21fNM",function(t,e){var r=o("Zsaag"),n=o("2o807"),i=o("3vj6M").Graph;t.exports={debugOrdering:function(t){var e=n.buildLayerMatrix(t),o=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){o.setNode(e,{label:e}),o.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){o.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){o.setNode("layer"+e,{rank:"same"}),r.reduce(t,function(t,e){return o.setEdge(t,e,{style:"invis"}),e})}),o}}}),i("8PPkN",function(t,e){t.exports="0.8.5"}),"function"==typeof SuppressedError&&SuppressedError;var s=function(){function t(){this._events={}}return t.prototype.on=function(t,e,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!r}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this._events[t]||[],i=this._events["*"]||[],a=function(n){for(var o=n.length,i=0;i<o;i++)if(n[i]){var a=n[i],s=a.callback;a.once&&(n.splice(i,1),0===n.length&&delete e._events[t],o--,i--),s.apply(e,r)}};a(o),a(i)},t.prototype.off=function(t,e){if(t){if(e){for(var r=this._events[t]||[],n=r.length,o=0;o<n;o++)r[o].callback===e&&(r.splice(o,1),n--,o--);0===r.length&&delete this._events[t]}else delete this._events[t]}else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();function u(t,e,r,n){for(;t.length;){let o=t.shift();if(r(o))return!0;e.add(o.id),n(o.id).forEach(r=>{e.has(r.id)||(e.add(r.id),t.push(r))})}return!1}function d(t,e,r,n){if(r(t))return!0;for(let o of(e.add(t.id),n(t.id)))if(!e.has(o.id)&&d(o,e,r,n))return!0;return!1}let l=()=>!0;class h{graph;nodeFilter;edgeFilter;cacheEnabled;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;allNodesMap=new Map;allEdgesMap=new Map;constructor(t){this.graph=t.graph;let e=t.nodeFilter||l,r=t.edgeFilter||l;this.nodeFilter=e,this.edgeFilter=t=>{let{source:n,target:o}=this.graph.getEdgeDetail(t.id);return!!(e(n)&&e(o))&&r(t,n,o)},"auto"===t.cache?(this.cacheEnabled=!0,this.startAutoCache()):"manual"===t.cache?this.cacheEnabled=!0:this.cacheEnabled=!1}clearCache=()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()};refreshCache=()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(t=>t.id))};updateCache=t=>{let e=new Set;t.forEach(t=>{let r=this.bothEdgesMap.get(t);if(r&&r.forEach(t=>e.add(t.id)),this.hasNode(t)){let r=this.graph.getRelatedEdges(t,"in").filter(this.edgeFilter),n=this.graph.getRelatedEdges(t,"out").filter(this.edgeFilter),o=Array.from(new Set([...r,...n]));o.forEach(t=>e.add(t.id)),this.inEdgesMap.set(t,r),this.outEdgesMap.set(t,n),this.bothEdgesMap.set(t,o),this.allNodesMap.set(t,this.graph.getNode(t))}else this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.bothEdgesMap.delete(t),this.allNodesMap.delete(t)}),e.forEach(t=>{this.hasEdge(t)?this.allEdgesMap.set(t,this.graph.getEdge(t)):this.allEdgesMap.delete(t)})};startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}handleGraphChanged=t=>{let e=new Set;t.changes.forEach(r=>{switch(r.type){case"NodeAdded":case"NodeRemoved":e.add(r.value.id);break;case"NodeDataUpdated":e.add(r.id);break;case"EdgeAdded":case"EdgeRemoved":e.add(r.value.source),e.add(r.value.target);break;case"EdgeUpdated":("source"===r.propertyName||"target"===r.propertyName)&&(e.add(r.oldValue),e.add(r.newValue));break;case"EdgeDataUpdated":if(t.graph.hasEdge(r.id)){let n=t.graph.getEdge(r.id);e.add(n.source),e.add(n.target)}}}),this.updateCache(e)};checkNodeExistence(t){this.getNode(t)}hasNode(t){if(!this.graph.hasNode(t))return!1;let e=this.graph.getNode(t);return this.nodeFilter(e)}areNeighbors(t,e){return this.checkNodeExistence(t),this.getNeighbors(e).some(e=>e.id===t)}getNode(t){let e=this.graph.getNode(t);if(!this.nodeFilter(e))throw Error("Node not found for id: "+t);return e}getRelatedEdges(t,e){return(this.checkNodeExistence(t),this.cacheEnabled)?"in"===e?this.inEdgesMap.get(t):"out"===e?this.outEdgesMap.get(t):this.bothEdgesMap.get(t):this.graph.getRelatedEdges(t,e).filter(this.edgeFilter)}getDegree(t,e){return this.getRelatedEdges(t,e).length}getSuccessors(t){return Array.from(new Set(this.getRelatedEdges(t,"out").map(t=>this.getNode(t.target))))}getPredecessors(t){return Array.from(new Set(this.getRelatedEdges(t,"in").map(t=>this.getNode(t.source))))}getNeighbors(t){return Array.from(new Set([...this.getPredecessors(t),...this.getSuccessors(t)]))}hasEdge(t){if(!this.graph.hasEdge(t))return!1;let e=this.graph.getEdge(t);return this.edgeFilter(e)}getEdge(t){let e=this.graph.getEdge(t);if(!this.edgeFilter(e))throw Error("Edge not found for id: "+t);return e}getEdgeDetail(t){let e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}hasTreeStructure(t){return this.graph.hasTreeStructure(t)}getRoots(t){return this.graph.getRoots(t).filter(this.nodeFilter)}getChildren(t,e){return this.checkNodeExistence(t),this.graph.getChildren(t,e).filter(this.nodeFilter)}getParent(t,e){this.checkNodeExistence(t);let r=this.graph.getParent(t,e);return r&&this.nodeFilter(r)?r:null}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(t,e,r="out"){let n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];u([this.getNode(t)],new Set,e,n)}dfs(t,e,r="out"){let n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];d(this.getNode(t),new Set,e,n)}}class c extends s{nodeMap=new Map;edgeMap=new Map;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;treeIndices=new Map;changes=[];batchCount=0;onChanged=()=>{};constructor(t){if(super(),!t)return;t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged)}batch=t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()};commit(){let t=this.changes;this.changes=[];let e={graph:this,changes:t};this.emit("changed",e),this.onChanged(e)}reduceChanges(t){let e=[];return t.forEach(t=>{switch(t.type){case"NodeRemoved":{let r=!1;e=e.filter(e=>{if("NodeAdded"===e.type){let n=e.value.id===t.value.id;return n&&(r=!0),!n}return"NodeDataUpdated"===e.type?e.id!==t.value.id:"TreeStructureChanged"!==e.type||e.nodeId!==t.value.id}),r||e.push(t);break}case"EdgeRemoved":{let r=!1;e=e.filter(e=>{if("EdgeAdded"===e.type){let n=e.value.id===t.value.id;return n&&(r=!0),!n}return"EdgeDataUpdated"!==e.type&&"EdgeUpdated"!==e.type||e.id!==t.value.id}),r||e.push(t);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{let r=e.findIndex(e=>e.type===t.type&&e.id===t.id&&(void 0===t.propertyName||e.propertyName===t.propertyName)),n=e[r];n?void 0!==t.propertyName?n.newValue=t.newValue:(e.splice(r,1),e.push(t)):e.push(t);break}case"TreeStructureDetached":(e=e.filter(e=>"TreeStructureAttached"===e.type?e.treeKey!==t.treeKey:"TreeStructureChanged"!==e.type||e.treeKey!==t.treeKey)).push(t);break;case"TreeStructureChanged":{let r=e.find(e=>"TreeStructureChanged"===e.type&&e.treeKey===t.treeKey&&e.nodeId===t.nodeId);r?r.newParentId=t.newParentId:e.push(t);break}default:e.push(t)}}),e}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,e){return this.getNeighbors(e).some(e=>e.id===t)}getNode(t){let e=this.nodeMap.get(t);if(!e)throw Error("Node not found for id: "+t);return e}getRelatedEdges(t,e){return(this.checkNodeExistence(t),"in"===e)?Array.from(this.inEdgesMap.get(t)):"out"===e?Array.from(this.outEdgesMap.get(t)):Array.from(this.bothEdgesMap.get(t))}getDegree(t,e){return this.getRelatedEdges(t,e).length}getSuccessors(t){return Array.from(new Set(this.getRelatedEdges(t,"out").map(t=>this.getNode(t.target))))}getPredecessors(t){return Array.from(new Set(this.getRelatedEdges(t,"in").map(t=>this.getNode(t.source))))}getNeighbors(t){return Array.from(new Set([...this.getPredecessors(t),...this.getSuccessors(t)]))}doAddNode(t){if(this.hasNode(t.id))throw Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach(e=>{e.childrenMap.set(t.id,new Set)}),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch(()=>{for(let e of t)this.doAddNode(e)})}addNode(t){this.addNodes([t])}doRemoveNode(t){let e=this.getNode(t),r=this.bothEdgesMap.get(t);r?.forEach(t=>this.doRemoveEdge(t.id)),this.nodeMap.delete(t),this.treeIndices.forEach(r=>{r.childrenMap.get(t)?.forEach(t=>{r.parentMap.delete(t.id)});let n=r.parentMap.get(t);n&&r.childrenMap.get(n.id)?.delete(e),r.parentMap.delete(t),r.childrenMap.delete(t)}),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:e})}removeNodes(t){this.batch(()=>{t.forEach(t=>this.doRemoveNode(t))})}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,e,r){let n=this.getNode(t);this.batch(()=>{let o=n.data[e];n.data[e]=r,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:e,oldValue:o,newValue:r})})}mergeNodeData(t,e){this.batch(()=>{Object.entries(e).forEach(([e,r])=>{this.updateNodeDataProperty(t,e,r)})})}updateNodeData(...t){let e;let r=t[0],n=this.getNode(r);if("string"==typeof t[1]){this.updateNodeDataProperty(r,t[1],t[2]);return}"function"==typeof t[1]?e=(0,t[1])(n.data):"object"==typeof t[1]&&(e=t[1]),this.batch(()=>{let t=n.data,o=e;n.data=e,this.changes.push({type:"NodeDataUpdated",id:r,oldValue:t,newValue:o})})}checkEdgeExistence(t){if(!this.hasEdge(t))throw Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){let e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);let e=this.inEdgesMap.get(t.target),r=this.outEdgesMap.get(t.source),n=this.bothEdgesMap.get(t.source),o=this.bothEdgesMap.get(t.target);e.add(t),r.add(t),n.add(t),o.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch(()=>{for(let e of t)this.doAddEdge(e)})}addEdge(t){this.addEdges([t])}doRemoveEdge(t){let e=this.getEdge(t),r=this.outEdgesMap.get(e.source),n=this.inEdgesMap.get(e.target),o=this.bothEdgesMap.get(e.source),i=this.bothEdgesMap.get(e.target);r.delete(e),n.delete(e),o.delete(e),i.delete(e),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:e})}removeEdges(t){this.batch(()=>{t.forEach(t=>this.doRemoveEdge(t))})}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,e){let r=this.getEdge(t);this.checkNodeExistence(e);let n=r.source;this.outEdgesMap.get(n).delete(r),this.bothEdgesMap.get(n).delete(r),this.outEdgesMap.get(e).add(r),this.bothEdgesMap.get(e).add(r),r.source=e,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:n,newValue:e})})}updateEdgeTarget(t,e){let r=this.getEdge(t);this.checkNodeExistence(e);let n=r.target;this.inEdgesMap.get(n).delete(r),this.bothEdgesMap.get(n).delete(r),this.inEdgesMap.get(e).add(r),this.bothEdgesMap.get(e).add(r),r.target=e,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:n,newValue:e})})}updateEdgeDataProperty(t,e,r){let n=this.getEdge(t);this.batch(()=>{let o=n.data[e];n.data[e]=r,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:e,oldValue:o,newValue:r})})}updateEdgeData(...t){let e;let r=t[0],n=this.getEdge(r);if("string"==typeof t[1]){this.updateEdgeDataProperty(r,t[1],t[2]);return}"function"==typeof t[1]?e=(0,t[1])(n.data):"object"==typeof t[1]&&(e=t[1]),this.batch(()=>{let t=n.data,o=e;n.data=e,this.changes.push({type:"EdgeDataUpdated",id:r,oldValue:t,newValue:o})})}mergeEdgeData(t,e){this.batch(()=>{Object.entries(e).forEach(([e,r])=>{this.updateEdgeDataProperty(t,e,r)})})}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})}))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})})}addTree(t,e){this.batch(()=>{this.attachTreeStructure(e);let r=[],n=Array.isArray(t)?t:[t];for(;n.length;){let t=n.shift();r.push(t),t.children&&n.push(...t.children)}this.addNodes(r),r.forEach(t=>{t.children?.forEach(r=>{this.setParent(r.id,t.id,e)})})})}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter(e=>!this.getParent(e.id,t))}getChildren(t,e){return this.checkNodeExistence(t),this.checkTreeExistence(e),Array.from(this.treeIndices.get(e).childrenMap.get(t)||[])}getParent(t,e){return this.checkNodeExistence(t),this.checkTreeExistence(e),this.treeIndices.get(e).parentMap.get(t)||null}getAncestors(t,e){let r;let n=[],o=this.getNode(t);for(;r=this.getParent(o.id,e);)n.push(r),o=r;return n}setParent(t,e,r){this.checkTreeExistence(r);let n=this.treeIndices.get(r),o=this.getNode(t),i=n.parentMap.get(t);if(i?.id===e)return;if(void 0===e){i&&n.childrenMap.get(i.id)?.delete(o),n.parentMap.delete(t);return}let a=this.getNode(e);n.parentMap.set(t,a),i&&n.childrenMap.get(i.id)?.delete(o);let s=n.childrenMap.get(a.id);s||(s=new Set,n.childrenMap.set(a.id,s)),s.add(o),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:r,nodeId:t,oldParentId:i?.id,newParentId:a.id})})}dfsTree(t,e,r){return d(this.getNode(t),new Set,e,t=>this.getChildren(t,r))}bfsTree(t,e,r){return u([this.getNode(t)],new Set,e,t=>this.getChildren(t,r))}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,e,r="out"){let n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];return u([this.getNode(t)],new Set,e,n)}dfs(t,e,r="out"){let n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];return d(this.getNode(t),new Set,e,n)}clone(){let t=new c({nodes:this.getAllNodes().map(t=>({...t,data:{...t.data}})),edges:this.getAllEdges().map(t=>({...t,data:{...t.data}}))});return this.treeIndices.forEach(({parentMap:e,childrenMap:r},n)=>{let o=new Map;e.forEach((e,r)=>{o.set(r,t.getNode(e.id))});let i=new Map;r.forEach((e,r)=>{i.set(r,new Set(Array.from(e).map(e=>t.getNode(e.id))))}),t.treeIndices.set(n,{parentMap:o,childrenMap:i})}),t}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new h({graph:this,...t})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let f=Symbol("Comlink.proxy"),g=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),v=Symbol("Comlink.finalizer"),y=Symbol("Comlink.thrown"),m=t=>"object"==typeof t&&null!==t||"function"==typeof t,x=new Map([["proxy",{canHandle:t=>m(t)&&t[f],serialize(t){let{port1:e,port2:r}=new MessageChannel;return w(t,e),[r,[r]]},deserialize:t=>(t.start(),function(t,e){let r=new Map;return t.addEventListener("message",function(t){let{data:e}=t;if(!e||!e.id)return;let n=r.get(e.id);if(n)try{n(e)}finally{r.delete(e.id)}}),function t(e,r,n=[],o=function(){}){let i=!1,a=new Proxy(o,{get(o,s){if(E(i),s===p)return()=>{_&&_.unregister(a),N(e),r.clear(),i=!0};if("then"===s){if(0===n.length)return{then:()=>a};let t=S(e,r,{type:"GET",path:n.map(t=>t.toString())}).then(A);return t.then.bind(t)}return t(e,r,[...n,s])},set(t,o,a){E(i);let[s,u]=O(a);return S(e,r,{type:"SET",path:[...n,o].map(t=>t.toString()),value:s},u).then(A)},apply(o,a,s){E(i);let u=n[n.length-1];if(u===g)return S(e,r,{type:"ENDPOINT"}).then(A);if("bind"===u)return t(e,r,n.slice(0,-1));let[d,l]=k(s);return S(e,r,{type:"APPLY",path:n.map(t=>t.toString()),argumentList:d},l).then(A)},construct(t,o){E(i);let[a,s]=k(o);return S(e,r,{type:"CONSTRUCT",path:n.map(t=>t.toString()),argumentList:a},s).then(A)}});return function(t,e){let r=(M.get(e)||0)+1;M.set(e,r),_&&_.register(t,e,t)}(a,e),a}(t,r,[],void 0)}(t))}],["throw",{canHandle:t=>m(t)&&y in t,serialize:({value:t})=>[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]],deserialize(t){if(t.isError)throw Object.assign(Error(t.value.message),t.value);throw t.value}}]]);function w(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(o){let i;if(!o||!o.data)return;if(!function(t,e){for(let r of t)if(e===r||"*"===r||r instanceof RegExp&&r.test(e))return!0;return!1}(r,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}let{id:a,type:s,path:u}=Object.assign({path:[]},o.data),d=(o.data.argumentList||[]).map(A);try{var l,h;let e=u.slice(0,-1).reduce((t,e)=>t[e],t),r=u.reduce((t,e)=>t[e],t);switch(s){case"GET":i=r;break;case"SET":e[u.slice(-1)[0]]=A(o.data.value),i=!0;break;case"APPLY":i=r.apply(e,d);break;case"CONSTRUCT":l=new r(...d),i=Object.assign(l,{[f]:!0});break;case"ENDPOINT":{let{port1:e,port2:r}=new MessageChannel;w(t,r),h=[e],j.set(e,h),i=e}break;case"RELEASE":i=void 0;break;default:return}}catch(t){i={value:t,[y]:0}}Promise.resolve(i).catch(t=>({value:t,[y]:0})).then(r=>{let[o,i]=O(r);e.postMessage(Object.assign(Object.assign({},o),{id:a}),i),"RELEASE"===s&&(e.removeEventListener("message",n),b(e),v in t&&"function"==typeof t[v]&&t[v]())}).catch(t=>{let[r,n]=O({value:TypeError("Unserializable return value"),[y]:0});e.postMessage(Object.assign(Object.assign({},r),{id:a}),n)})}),e.start&&e.start()}function b(t){"MessagePort"===t.constructor.name&&t.close()}function E(t){if(t)throw Error("Proxy has been released and is not useable")}function N(t){return S(t,new Map,{type:"RELEASE"}).then(()=>{b(t)})}let M=new WeakMap,_="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{let e=(M.get(t)||0)-1;M.set(t,e),0===e&&N(t)});function k(t){var e;let r=t.map(O);return[r.map(t=>t[0]),(e=r.map(t=>t[1]),Array.prototype.concat.apply([],e))]}let j=new WeakMap;function O(t){for(let[e,r]of x)if(r.canHandle(t)){let[n,o]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},o]}return[{type:"RAW",value:t},j.get(t)||[]]}function A(t){switch(t.type){case"HANDLER":return x.get(t.name).deserialize(t.value);case"RAW":return t.value}}function S(t,e,r,n){return new Promise(o=>{let i=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.set(i,o),t.start&&t.start(),t.postMessage(Object.assign({id:i},r),n)})}function z(t){return"number"==typeof t}let I=(t,e)=>{if("next"!==t&&"prev"!==t)return e},D=t=>{t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev};class R{constructor(){let t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){let t=this.shortcut,e=t.prev;if(e&&e!==t)return D(e),e}enqueue(t){let e=this.shortcut;t.prev&&t.next&&D(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e}toString(){let t=[],e=this.shortcut,r=e.prev;for(;r!==e;)t.push(JSON.stringify(r,I)),r=null==r?void 0:r.prev;return`[${t.join(", ")}]`}}class P extends R{}let T=()=>1,L=(t,e)=>{var r;if(t.getAllNodes().length<=1)return[];let n=q(t,e||T);return null===(r=C(n.graph,n.buckets,n.zeroIdx).map(e=>t.getRelatedEdges(e.v,"out").filter(({target:t})=>t===e.w)))||void 0===r?void 0:r.flat()},C=(t,e,r)=>{let n,o=[],i=e[e.length-1],a=e[0];for(;t.getAllNodes().length;){for(;n=a.dequeue();)F(t,e,r,n);for(;n=i.dequeue();)F(t,e,r,n);if(t.getAllNodes().length){for(let i=e.length-2;i>0;--i)if(n=e[i].dequeue()){o=o.concat(F(t,e,r,n,!0));break}}}return o},F=(t,e,r,n,o)=>{var i,a;let s=[];return t.hasNode(n.v)&&(null===(i=t.getRelatedEdges(n.v,"in"))||void 0===i||i.forEach(n=>{let i=n.data.weight,a=t.getNode(n.source);o&&s.push({v:n.source,w:n.target,in:0,out:0}),void 0===a.data.out&&(a.data.out=0),a.data.out-=i,B(e,r,Object.assign({v:a.id},a.data))}),null===(a=t.getRelatedEdges(n.v,"out"))||void 0===a||a.forEach(n=>{let o=n.data.weight,i=n.target,a=t.getNode(i);void 0===a.data.in&&(a.data.in=0),a.data.in-=o,B(e,r,Object.assign({v:a.id},a.data))}),t.removeNode(n.v)),o?s:void 0},q=(t,e)=>{let r=new c,n=0,o=0;t.getAllNodes().forEach(t=>{r.addNode({id:t.id,data:{v:t.id,in:0,out:0}})}),t.getAllEdges().forEach(t=>{let i=r.getRelatedEdges(t.source,"out").find(e=>e.target===t.target),a=(null==e?void 0:e(t))||1;i?r.updateEdgeData(null==i?void 0:i.id,Object.assign(Object.assign({},i.data),{weight:i.data.weight+a})):r.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:a}}),o=Math.max(o,r.getNode(t.source).data.out+=a),n=Math.max(n,r.getNode(t.target).data.in+=a)});let i=[],a=o+n+3;for(let t=0;t<a;t++)i.push(new P);let s=n+1;return r.getAllNodes().forEach(t=>{B(i,s,Object.assign({v:t.id},r.getNode(t.id).data))}),{buckets:i,zeroIdx:s,graph:r}},B=(t,e,r)=>{r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)},V=(t,e)=>{let r="greedy"===e?L(t,t=>t.data.weight||1):U(t);null==r||r.forEach(e=>{let r=e.data;t.removeEdge(e.id),r.forwardName=e.data.name,r.reversed=!0,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign({},r)})})},U=t=>{let e=[],r={},n={},o=i=>{n[i]||(n[i]=!0,r[i]=!0,t.getRelatedEdges(i,"out").forEach(t=>{r[t.target]?e.push(t):o(t.target)}),delete r[i])};return t.getAllNodes().forEach(t=>o(t.id)),e},G=t=>{t.getAllEdges().forEach(e=>{let r=e.data;if(r.reversed){t.removeEdge(e.id);let n=r.forwardName;delete r.reversed,delete r.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},r),{forwardName:n})})}})},W=(t,e)=>Number(t)-Number(e),H=(t,e,r,n)=>{let o;do o=`${n}${Math.random()}`;while(t.hasNode(o))return r.dummy=e,t.addNode({id:o,data:r}),o},J=t=>{let e=new c;return t.getAllNodes().forEach(t=>{e.addNode(Object.assign({},t))}),t.getAllEdges().forEach(t=>{let r=e.getRelatedEdges(t.source,"out").find(e=>e.target===t.target);r?e.updateEdgeData(null==r?void 0:r.id,Object.assign(Object.assign({},r.data),{weight:r.data.weight+t.data.weight||0,minlen:Math.max(r.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})}),e},X=t=>{let e=new c;return t.getAllNodes().forEach(r=>{t.getChildren(r.id).length||e.addNode(Object.assign({},r))}),t.getAllEdges().forEach(t=>{e.addEdge(t)}),e},$=(t,e)=>null==t?void 0:t.reduce((t,r,n)=>(t[r]=e[n],t),{}),K=(t,e)=>{let r,n;let o=Number(t.x),i=Number(t.y),a=Number(e.x)-o,s=Number(e.y)-i,u=Number(t.width)/2,d=Number(t.height)/2;return a||s?(Math.abs(s)*u>Math.abs(a)*d?(s<0&&(d=-d),r=d*a/s,n=d):(a<0&&(u=-u),r=u,n=u*s/a),{x:o+r,y:i+n}):{x:0,y:0}},Y=t=>{let e=[],r=te(t)+1;for(let t=0;t<r;t++)e.push([]);t.getAllNodes().forEach(t=>{let r=t.data.rank;void 0!==r&&e[r]&&e[r].push(t.id)});for(let n=0;n<r;n++)e[n]=e[n].sort((e,r)=>W(t.getNode(e).data.order,t.getNode(r).data.order));return e},Z=t=>{let e=Math.min(...t.getAllNodes().filter(t=>void 0!==t.data.rank).map(t=>t.data.rank));t.getAllNodes().forEach(t=>{t.data.hasOwnProperty("rank")&&e!==1/0&&(t.data.rank-=e)})},Q=(t,e=0)=>{let r=t.getAllNodes(),n=Math.min(...r.filter(t=>void 0!==t.data.rank).map(t=>t.data.rank)),o=[];r.forEach(t=>{let e=(t.data.rank||0)-n;o[e]||(o[e]=[]),o[e].push(t.id)});let i=0;for(let r=0;r<o.length;r++){let n=o[r];void 0===n?r%e!=0&&(i-=1):i&&(null==n||n.forEach(e=>{let r=t.getNode(e);r&&(r.data.rank=r.data.rank||0,r.data.rank+=i)}))}},tt=(t,e,r,n)=>{let o={width:0,height:0};return z(r)&&z(n)&&(o.rank=r,o.order=n),H(t,"border",o,e)},te=t=>{let e;return t.getAllNodes().forEach(t=>{let r=t.data.rank;void 0!==r&&(void 0===e||r>e)&&(e=r)}),e||(e=0),e},tr=(t,e)=>{let r={lhs:[],rhs:[]};return null==t||t.forEach(t=>{e(t)?r.lhs.push(t):r.rhs.push(t)}),r},tn=(t,e)=>t.reduce((t,r)=>e(t)>e(r)?r:t),to=(t,e,r,n,o,i)=>{!n.includes(e.id)&&(n.push(e.id),r||i.push(e.id),o(e.id).forEach(e=>to(t,e,r,n,o,i)),r&&i.push(e.id))},ti=(t,e,r,n)=>{let o=Array.isArray(e)?e:[e],i=e=>n?t.getSuccessors(e):t.getNeighbors(e),a=[],s=[];return o.forEach(e=>{if(t.hasNode(e.id))to(t,e,"post"===r,s,i,a);else throw Error(`Graph does not have node: ${e}`)}),a},ta=t=>{let e=r=>{let n=t.getChildren(r),o=t.getNode(r);if((null==n?void 0:n.length)&&n.forEach(t=>e(t.id)),o.data.hasOwnProperty("minRank")){o.data.borderLeft=[],o.data.borderRight=[];for(let e=o.data.minRank,n=o.data.maxRank+1;e<n;e+=1)ts(t,"borderLeft","_bl",r,o,e),ts(t,"borderRight","_br",r,o,e)}};t.getRoots().forEach(t=>e(t.id))},ts=(t,e,r,n,o,i)=>{let a=o.data[e][i-1],s=H(t,"border",{rank:i,borderType:e,width:0,height:0},r);o.data[e][i]=s,t.setParent(s,n),a&&t.addEdge({id:`e${Math.random()}`,source:a,target:s,data:{weight:1}})},tu=(t,e)=>{let r=e.toLowerCase();("lr"===r||"rl"===r)&&tl(t)},td=(t,e)=>{let r=e.toLowerCase();("bt"===r||"rl"===r)&&tc(t),("lr"===r||"rl"===r)&&(tg(t),tl(t))},tl=t=>{t.getAllNodes().forEach(t=>{th(t)}),t.getAllEdges().forEach(t=>{th(t)})},th=t=>{let e=t.data.width;t.data.width=t.data.height,t.data.height=e},tc=t=>{t.getAllNodes().forEach(t=>{tf(t.data)}),t.getAllEdges().forEach(t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach(t=>tf(t)),t.data.hasOwnProperty("y")&&tf(t.data)})},tf=t=>{(null==t?void 0:t.y)&&(t.y=-t.y)},tg=t=>{t.getAllNodes().forEach(t=>{tp(t.data)}),t.getAllEdges().forEach(t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach(t=>tp(t)),t.data.hasOwnProperty("x")&&tp(t.data)})},tp=t=>{let e=t.x;t.x=t.y,t.y=e},tv=t=>{let e=H(t,"root",{},"_root"),r=tm(t),n=Math.max(...Object.values(r));Math.abs(n)===1/0&&(n=1);let o=n-1,i=2*o+1;t.getAllEdges().forEach(t=>{t.data.minlen*=i});let a=tx(t)+1;return t.getRoots().forEach(n=>{ty(t,e,i,a,o,r,n.id)}),{nestingRoot:e,nodeRankFactor:i}},ty=(t,e,r,n,o,i,a)=>{let s=t.getChildren(a);if(!(null==s?void 0:s.length)){a!==e&&t.addEdge({id:`e${Math.random()}`,source:e,target:a,data:{weight:0,minlen:r}});return}let u=tt(t,"_bt"),d=tt(t,"_bb"),l=t.getNode(a);t.setParent(u,a),l.data.borderTop=u,t.setParent(d,a),l.data.borderBottom=d,null==s||s.forEach(s=>{ty(t,e,r,n,o,i,s.id);let l=s.data.borderTop?s.data.borderTop:s.id,h=s.data.borderBottom?s.data.borderBottom:s.id,c=s.data.borderTop?n:2*n,f=l!==h?1:o-i[a]+1;t.addEdge({id:`e${Math.random()}`,source:u,target:l,data:{minlen:f,weight:c,nestingEdge:!0}}),t.addEdge({id:`e${Math.random()}`,source:h,target:d,data:{minlen:f,weight:c,nestingEdge:!0}})}),t.getParent(a)||t.addEdge({id:`e${Math.random()}`,source:e,target:u,data:{weight:0,minlen:o+i[a]}})},tm=t=>{let e={},r=(n,o)=>{let i=t.getChildren(n);null==i||i.forEach(t=>r(t.id,o+1)),e[n]=o};return t.getRoots().forEach(t=>r(t.id,1)),e},tx=t=>{let e=0;return t.getAllEdges().forEach(t=>{e+=t.data.weight}),e},tw=(t,e)=>{e&&t.removeNode(e),t.getAllEdges().forEach(e=>{e.data.nestingEdge&&t.removeEdge(e.id)})},tb="edge-label",tE=(t,e)=>{t.getAllEdges().forEach(r=>tN(t,r,e))},tN=(t,e,r)=>{let n,o,i,a=e.source,s=t.getNode(a).data.rank,u=e.target,d=t.getNode(u).data.rank,l=e.data.labelRank;if(d!==s+1){for(t.removeEdge(e.id),i=0,++s;s<d;++i,++s)e.data.points=[],n=H(t,"edge",o={originalEdge:e,width:0,height:0,rank:s},"_d"),s===l&&(o.width=e.data.width,o.height=e.data.height,o.dummy=tb,o.labelpos=e.data.labelpos),t.addEdge({id:`e${Math.random()}`,source:a,target:n,data:{weight:e.data.weight}}),0===i&&r.push(n),a=n;t.addEdge({id:`e${Math.random()}`,source:a,target:u,data:{weight:e.data.weight}})}},tM=(t,e)=>{e.forEach(e=>{let r,n=t.getNode(e),{data:o}=n,i=o.originalEdge;i&&t.addEdge(i);let a=e;for(;n.data.dummy;)r=t.getSuccessors(a)[0],t.removeNode(a),i.data.points.push({x:n.data.x,y:n.data.y}),n.data.dummy===tb&&(i.data.x=n.data.x,i.data.y=n.data.y,i.data.width=n.data.width,i.data.height=n.data.height),a=r.id,n=t.getNode(a)})};function t_(t){return Array.isArray(t)}var tk=function(t){if("object"!=typeof t||null===t)return t;if(t_(t)){e=[];for(var e,r=0,n=t.length;r<n;r++)"object"==typeof t[r]&&null!=t[r]?e[r]=tk(t[r]):e[r]=t[r]}else for(var o in e={},t)"object"==typeof t[o]&&null!=t[o]?e[o]=tk(t[o]):e[o]=t[o];return e};let tj=(t,e,r)=>{let n;let o={};null==r||r.forEach(r=>{let i,a,s=t.getParent(r);for(;s;){if((i=t.getParent(s.id))?(a=o[i.id],o[i.id]=s.id):(a=n,n=s.id),a&&a!==s.id){e.hasNode(a)||e.addNode({id:a,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),e.hasEdge(`e${a}-${s.id}`)||e.addEdge({id:`e${a}-${s.id}`,source:a,target:s.id,data:{}});return}s=i}})},tO=(t,e,r)=>{let n=tA(t),o=new c({tree:[{id:n,children:[],data:{}}]});return t.getAllNodes().forEach(i=>{let a=t.getParent(i.id);(i.data.rank===e||i.data.minRank<=e&&e<=i.data.maxRank)&&(o.hasNode(i.id)||o.addNode(Object.assign({},i)),(null==a?void 0:a.id)&&!o.hasNode(null==a?void 0:a.id)&&o.addNode(Object.assign({},a)),o.setParent(i.id,(null==a?void 0:a.id)||n),t.getRelatedEdges(i.id,r).forEach(e=>{let r=e.source===i.id?e.target:e.source;o.hasNode(r)||o.addNode(Object.assign({},t.getNode(r)));let n=o.getRelatedEdges(r,"out").find(({target:t})=>t===i.id),a=void 0!==n?n.data.weight:0;n?o.updateEdgeData(n.id,Object.assign(Object.assign({},n.data),{weight:e.data.weight+a})):o.addEdge({id:e.id,source:r,target:i.id,data:{weight:e.data.weight+a}})}),i.data.hasOwnProperty("minRank")&&o.updateNodeData(i.id,Object.assign(Object.assign({},i.data),{borderLeft:i.data.borderLeft[e],borderRight:i.data.borderRight[e]})))}),o},tA=t=>{let e;for(;t.hasNode(e=`_root${Math.random()}`););return e},tS=(t,e,r)=>{let n=$(r,r.map((t,e)=>e)),o=e.map(e=>{let r=t.getRelatedEdges(e,"out").map(t=>({pos:n[t.target]||0,weight:t.data.weight}));return null==r?void 0:r.sort((t,e)=>t.pos-e.pos)}).flat().filter(t=>void 0!==t),i=1;for(;i<r.length;)i<<=1;let a=2*i-1;i-=1;let s=Array(a).fill(0,0,a),u=0;return null==o||o.forEach(t=>{if(t){let e=t.pos+i;s[e]+=t.weight;let r=0;for(;e>0;)e%2&&(r+=s[e+1]),e=e-1>>1,s[e]+=t.weight;u+=t.weight*r}}),u},tz=(t,e)=>{let r=0;for(let n=1;n<(null==e?void 0:e.length);n+=1)r+=tS(t,e[n-1],e[n]);return r},tI=t=>{let e={},r=t.getAllNodes(),n=Math.max(...r.map(t=>{var e;return null!==(e=t.data.rank)&&void 0!==e?e:-1/0})),o=[];for(let t=0;t<n+1;t++)o.push([]);let i=r.sort((e,r)=>t.getNode(e.id).data.rank-t.getNode(r.id).data.rank),a=i.filter(e=>void 0!==t.getNode(e.id).data.fixorder).sort((e,r)=>t.getNode(e.id).data.fixorder-t.getNode(r.id).data.fixorder);return null==a||a.forEach(r=>{isNaN(t.getNode(r.id).data.rank)||o[t.getNode(r.id).data.rank].push(r.id),e[r.id]=!0}),null==i||i.forEach(r=>t.dfsTree(r.id,t=>{if(e.hasOwnProperty(t.id))return!0;e[t.id]=!0,isNaN(t.data.rank)||o[t.data.rank].push(t.id)})),o},tD=(t,e)=>e.map(e=>{let r=t.getRelatedEdges(e,"in");if(!(null==r?void 0:r.length))return{v:e};let n={sum:0,weight:0};return null==r||r.forEach(e=>{let r=t.getNode(e.source);n.sum+=e.data.weight*r.data.order,n.weight+=e.data.weight}),{v:e,barycenter:n.sum/n.weight,weight:n.weight}}),tR=t=>{var e,r;let n=[],o=t=>e=>{!e.merged&&(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&tP(t,e)},i=e=>r=>{r.in.push(e),0==--r.indegree&&t.push(r)};for(;null==t?void 0:t.length;){let a=t.pop();n.push(a),null===(e=a.in.reverse())||void 0===e||e.forEach(t=>o(a)(t)),null===(r=a.out)||void 0===r||r.forEach(t=>i(a)(t))}let a=n.filter(t=>!t.merged),s=["vs","i","barycenter","weight"];return a.map(t=>{let e={};return null==s||s.forEach(r=>{void 0!==t[r]&&(e[r]=t[r])}),e})},tP=(t,e)=>{var r;let n=0,o=0;t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.vs=null===(r=e.vs)||void 0===r?void 0:r.concat(t.vs),t.barycenter=n/o,t.weight=o,t.i=Math.min(e.i,t.i),e.merged=!0};var tT=(t,e)=>{var r,n,o;let i={};return null==t||t.forEach((t,e)=>{i[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};let r=i[t.v];void 0!==t.barycenter&&(r.barycenter=t.barycenter,r.weight=t.weight)}),null===(r=e.getAllEdges())||void 0===r||r.forEach(t=>{let e=i[t.source],r=i[t.target];void 0!==e&&void 0!==r&&(r.indegree++,e.out.push(i[t.target]))}),tR(null===(o=(n=Object.values(i)).filter)||void 0===o?void 0:o.call(n,t=>!t.indegree))};let tL=(t,e,r,n)=>{let o=tr(t,t=>{let e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return n?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")}),i=o.lhs,a=o.rhs.sort((t,e)=>-t.i- -e.i),s=[],u=0,d=0,l=0;null==i||i.sort(tF(!!e,!!r)),l=tC(s,a,l),null==i||i.forEach(t=>{var e;l+=null===(e=t.vs)||void 0===e?void 0:e.length,s.push(t.vs),u+=t.barycenter*t.weight,d+=t.weight,l=tC(s,a,l)});let h={vs:s.flat()};return d&&(h.barycenter=u/d,h.weight=d),h},tC=(t,e,r)=>{let n,o=r;for(;e.length&&(n=e[e.length-1]).i<=o;)e.pop(),null==t||t.push(n.vs),o++;return o},tF=(t,e)=>(r,n)=>{if(void 0!==r.fixorder&&void 0!==n.fixorder)return r.fixorder-n.fixorder;if(r.barycenter<n.barycenter)return -1;if(r.barycenter>n.barycenter)return 1;if(e&&void 0!==r.order&&void 0!==n.order){if(r.order<n.order)return -1;if(r.order>n.order)return 1}return t?n.i-r.i:r.i-n.i},tq=(t,e,r,n,o,i)=>{var a,s,u,d;let l=t.getChildren(e).map(t=>t.id),h=t.getNode(e),c=h?h.data.borderLeft:void 0,f=h?h.data.borderRight:void 0,g={};c&&(l=null==l?void 0:l.filter(t=>t!==c&&t!==f));let p=tD(t,l||[]);null==p||p.forEach(e=>{var o;if(null===(o=t.getChildren(e.v))||void 0===o?void 0:o.length){let o=tq(t,e.v,r,n,i);g[e.v]=o,o.hasOwnProperty("barycenter")&&tV(e,o)}});let v=tT(p,r);tB(v,g),null===(a=v.filter(t=>t.vs.length>0))||void 0===a||a.forEach(e=>{let r=t.getNode(e.vs[0]);r&&(e.fixorder=r.data.fixorder,e.order=r.data.order)});let y=tL(v,n,o,i);if(c&&(y.vs=[c,y.vs,f].flat(),null===(s=t.getPredecessors(c))||void 0===s?void 0:s.length)){let e=t.getNode((null===(u=t.getPredecessors(c))||void 0===u?void 0:u[0].id)||""),r=t.getNode((null===(d=t.getPredecessors(f))||void 0===d?void 0:d[0].id)||"");y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+e.data.order+r.data.order)/(y.weight+2),y.weight+=2}return y},tB=(t,e)=>{null==t||t.forEach(t=>{var r;let n=null===(r=t.vs)||void 0===r?void 0:r.map(t=>e[t]?e[t].vs:t);t.vs=n.flat()})},tV=(t,e)=>{void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},tU=(t,e)=>{let r;let n=te(t),o=[],i=[];for(let t=1;t<n+1;t++)o.push(t);for(let t=n-1;t>-1;t--)i.push(t);let a=tG(t,o,"in"),s=tG(t,i,"out"),u=tI(t);tH(t,u);let d=Number.POSITIVE_INFINITY;for(let n=0,o=0;o<4;++n,++o){tW(n%2?a:s,n%4>=2,!1,e),u=Y(t);let i=tz(t,u);i<d&&(o=0,r=tk(u),d=i)}u=tI(t),tH(t,u);for(let n=0,o=0;o<4;++n,++o){tW(n%2?a:s,n%4>=2,!0,e),u=Y(t);let i=tz(t,u);i<d&&(o=0,r=tk(u),d=i)}tH(t,r)},tG=(t,e,r)=>e.map(e=>tO(t,e,r)),tW=(t,e,r,n)=>{let o=new c;null==t||t.forEach(t=>{var i;let a=t.getRoots()[0].id,s=tq(t,a,o,e,r,n);for(let e=0;e<(null===(i=s.vs)||void 0===i?void 0:i.length);e++){let r=t.getNode(s.vs[e]);r&&(r.data.order=e)}tj(t,o,s.vs)})},tH=(t,e)=>{null==e||e.forEach(e=>{null==e||e.forEach((e,r)=>{t.getNode(e).data.order=r})})},tJ=(t,e)=>{let r=Math.max(...t.getAllNodes().filter(e=>{var r;return!(null===(r=t.getChildren(e.id))||void 0===r?void 0:r.length)}).map(t=>t.data.rank)),n=[];for(let t=0;t<r+1;t++)n[t]=[];null==e||e.forEach(e=>{let r=t.getNode(e);!r||r.data.dummy||isNaN(r.data.rank)||(r.data.fixorder=n[r.data.rank].length,n[r.data.rank].push(e))})},tX=t=>{let e={},r=0,n=o=>{let i=r;t.getChildren(o).forEach(t=>n(t.id)),e[o]={low:i,lim:r++}};return t.getRoots().forEach(t=>n(t.id)),e},t$=(t,e,r,n)=>{var o,i;let a,s;let u=[],d=[],l=Math.min(e[r].low,e[n].low),h=Math.max(e[r].lim,e[n].lim);a=r;do u.push(a=null===(o=t.getParent(a))||void 0===o?void 0:o.id);while(a&&(e[a].low>l||h>e[a].lim))for(s=a,a=n;a&&a!==s;)d.push(a),a=null===(i=t.getParent(a))||void 0===i?void 0:i.id;return{lca:s,path:u.concat(d.reverse())}},tK=(t,e)=>{let r=tX(t);e.forEach(e=>{var n,o;let i=e,a=t.getNode(i),s=a.data.originalEdge;if(!s)return;let u=t$(t,r,s.source,s.target),d=u.path,l=u.lca,h=0,c=d[0],f=!0;for(;i!==s.target;){if(a=t.getNode(i),f){for(;c!==l&&(null===(n=t.getNode(c))||void 0===n?void 0:n.data.maxRank)<a.data.rank;)c=d[++h];c===l&&(f=!1)}if(!f){for(;h<d.length-1&&(null===(o=t.getNode(d[h+1]))||void 0===o?void 0:o.data.minRank)<=a.data.rank;)h++;c=d[h]}t.hasNode(c)&&t.setParent(i,c),i=t.getSuccessors(i)[0].id}})},tY=(t,e)=>{let r={};return(null==e?void 0:e.length)&&e.reduce((e,n)=>{let o=0,i=0,a=e.length,s=null==n?void 0:n[(null==n?void 0:n.length)-1];return null==n||n.forEach((e,u)=>{var d;let l=tQ(t,e),h=l?t.getNode(l.id).data.order:a;(l||e===s)&&(null===(d=n.slice(i,u+1))||void 0===d||d.forEach(e=>{var n;null===(n=t.getPredecessors(e))||void 0===n||n.forEach(n=>{var i;let a=t.getNode(n.id),s=a.data.order;(s<o||h<s)&&!(a.data.dummy&&(null===(i=t.getNode(e))||void 0===i?void 0:i.data.dummy))&&t0(r,n.id,e)})}),i=u+1,o=h)}),n}),r},tZ=(t,e)=>{let r={};function n(e,n){let o=JSON.stringify(e.slice(1));n.get(o)||(!function(e,n,o,i,a){var s,u;let d;for(let l=n;l<o;l++)d=e[l],(null===(s=t.getNode(d))||void 0===s?void 0:s.data.dummy)&&(null===(u=t.getPredecessors(d))||void 0===u||u.forEach(e=>{let n=t.getNode(e.id);n.data.dummy&&(n.data.order<i||n.data.order>a)&&t0(r,e.id,d)}))}(...e),n.set(o,!0))}return(null==e?void 0:e.length)&&e.reduce((e,r)=>{let o,i=-1,a=0,s=new Map;return null==r||r.forEach((u,d)=>{var l;if((null===(l=t.getNode(u))||void 0===l?void 0:l.data.dummy)==="border"){let e=t.getPredecessors(u)||[];e.length&&(o=t.getNode(e[0].id).data.order,n([r,a,d,i,o],s),a=d,i=o)}n([r,a,r.length,o,e.length],s)}),r}),r},tQ=(t,e)=>{var r,n;if(null===(r=t.getNode(e))||void 0===r?void 0:r.data.dummy)return null===(n=t.getPredecessors(e))||void 0===n?void 0:n.find(e=>t.getNode(e.id).data.dummy)},t0=(t,e,r)=>{let n=e,o=r;if(n>o){let t=n;n=o,o=t}let i=t[n];i||(t[n]=i={}),i[o]=!0},t1=(t,e,r)=>{let n=e,o=r;return n>o&&(n=o,o=e),!!t[n]},t2=(t,e,r,n)=>{let o={},i={},a={};return null==e||e.forEach(t=>{null==t||t.forEach((t,e)=>{o[t]=t,i[t]=t,a[t]=e})}),null==e||e.forEach(t=>{let e=-1;null==t||t.forEach(t=>{let s=n(t).map(t=>t.id);if(s.length){let n=((s=s.sort((t,e)=>a[t]-a[e])).length-1)/2;for(let u=Math.floor(n),d=Math.ceil(n);u<=d;++u){let n=s[u];i[t]===t&&e<a[n]&&!t1(r,t,n)&&(i[n]=t,i[t]=o[t]=o[n],e=a[n])}}})}),{root:o,align:i}},t3=(t,e,r,n,o,i,a)=>{var s;let u={},d=t6(t,e,r,o,i,a),l=a?"borderLeft":"borderRight",h=(t,e)=>{let r=d.getAllNodes(),n=r.pop(),o={};for(;n;)o[n.id]?t(n.id):(o[n.id]=!0,r.push(n),r=r.concat(e(n.id))),n=r.pop()};return h(t=>{u[t]=(d.getRelatedEdges(t,"in")||[]).reduce((t,e)=>Math.max(t,(u[e.source]||0)+e.data.weight),0)},d.getPredecessors.bind(d)),h(e=>{let r=(d.getRelatedEdges(e,"out")||[]).reduce((t,e)=>Math.min(t,(u[e.target]||0)-e.data.weight),Number.POSITIVE_INFINITY),n=t.getNode(e);r!==Number.POSITIVE_INFINITY&&n.data.borderType!==l&&(u[e]=Math.max(u[e],r))},d.getSuccessors.bind(d)),null===(s=Object.values(n))||void 0===s||s.forEach(t=>{u[t]=u[r[t]]}),u},t6=(t,e,r,n,o,i)=>{let a=new c,s=t4(n,o,i);return null==e||e.forEach(e=>{let n;null==e||e.forEach(e=>{let o=r[e];if(a.hasNode(o)||a.addNode({id:o,data:{}}),n){let i=r[n],u=a.getRelatedEdges(i,"out").find(t=>t.target===o);u?a.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:Math.max(s(t,e,n),u.data.weight||0)})):a.addEdge({id:`e${Math.random()}`,source:i,target:o,data:{weight:Math.max(s(t,e,n),0)}})}n=e})}),a},t8=(t,e)=>tn(Object.values(e),e=>{var r;let n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null===(r=Object.keys(e))||void 0===r||r.forEach(r=>{let i=e[r],a=t9(t,r)/2;n=Math.max(i+a,n),o=Math.min(i-a,o)}),n-o}),t5=(t,e)=>{let r={};return Object.keys(t.ul).forEach(n=>{if(e)r[n]=t[e.toLowerCase()][n];else{let e=Object.values(t).map(t=>t[n]);r[n]=(e[0]+e[1])/2}}),r},t4=(t,e,r)=>(n,o,i)=>{let a;let s=n.getNode(o),u=n.getNode(i),d=0;if(a=0+s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":d=-s.data.width/2;break;case"r":d=s.data.width/2}if(d&&(a+=r?d:-d),d=0,a+=(s.data.dummy?e:t)/2,a+=(u.data.dummy?e:t)/2,a+=u.data.width/2,u.data.labelpos)switch((u.data.labelpos||"").toLowerCase()){case"l":d=u.data.width/2;break;case"r":d=-u.data.width/2}return d&&(a+=r?d:-d),d=0,a},t9=(t,e)=>t.getNode(e).data.width||0,t7=(t,e)=>{let{ranksep:r=0}=e||{},n=Y(t),o=0;null==n||n.forEach(e=>{let n=Math.max(...e.map(e=>t.getNode(e).data.height),0);null==e||e.forEach(e=>{t.getNode(e).data.y=o+n/2}),o+=n+r})},et=(t,e)=>{let{align:r,nodesep:n=0,edgesep:o=0}=e||{},i=Y(t),a=Object.assign(tY(t,i),tZ(t,i)),s={},u=[];["u","d"].forEach(e=>{u="u"===e?i:Object.values(i).reverse(),["l","r"].forEach(r=>{"r"===r&&(u=u.map(t=>Object.values(t).reverse()));let i=("u"===e?t.getPredecessors:t.getSuccessors).bind(t),d=t2(t,u,a,i),l=t3(t,u,d.root,d.align,n,o,"r"===r);"r"===r&&Object.keys(l).forEach(t=>l[t]=-l[t]),s[e+r]=l})});let d=t8(t,s);return d&&function(t,e){let r=Object.values(e),n=Math.min(...r),o=Math.max(...r);["u","d"].forEach(r=>{["l","r"].forEach(i=>{let a;let s=r+i,u=t[s];if(u===e)return;let d=Object.values(u);(a="l"===i?n-Math.min(...d):o-Math.max(...d))&&(t[s]={},Object.keys(u).forEach(e=>{t[s][e]=u[e]+a}))})})}(s,d),t5(s,r)},ee=(t,e)=>{var r;let n=X(t);t7(n,e);let o=et(n,e);null===(r=Object.keys(o))||void 0===r||r.forEach(t=>{n.getNode(t).data.x=o[t]})},er=t=>{let e={},r=n=>{var o;let i;let a=t.getNode(n);return a?e[n]?a.data.rank:(e[n]=!0,null===(o=t.getRelatedEdges(n,"out"))||void 0===o||o.forEach(t=>{let e=r(t.target)-t.data.minlen;e&&(void 0===i||e<i)&&(i=e)}),i||(i=0),a.data.rank=i,i):0};t.getAllNodes().filter(e=>0===t.getRelatedEdges(e.id,"in").length).forEach(t=>r(t.id))},en=t=>{let e;let r={},n=o=>{var i;let a;let s=t.getNode(o);return s?r[o]?s.data.rank:(r[o]=!0,null===(i=t.getRelatedEdges(o,"out"))||void 0===i||i.forEach(t=>{let e=n(t.target)-t.data.minlen;e&&(void 0===a||e<a)&&(a=e)}),a||(a=0),(void 0===e||a<e)&&(e=a),s.data.rank=a,a):0};t.getAllNodes().filter(e=>0===t.getRelatedEdges(e.id,"in").length).forEach(t=>{t&&n(t.id)}),void 0===e&&(e=0);let o={},i=(e,r)=>{var n;let a=t.getNode(e),s=isNaN(a.data.layer)?r:a.data.layer;(void 0===a.data.rank||a.data.rank<s)&&(a.data.rank=s),o[e]||(o[e]=!0,null===(n=t.getRelatedEdges(e,"out"))||void 0===n||n.forEach(t=>{i(t.target,s+t.data.minlen)}))};t.getAllNodes().forEach(t=>{let r=t.data;r&&(isNaN(r.layer)?r.rank-=e:i(t.id,r.layer))})},eo=(t,e)=>t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen,ei=t=>{let e,r;let n=new c({tree:[]}),o=t.getAllNodes()[0],i=t.getAllNodes().length;for(n.addNode(o);ea(n,t)<i;)e=ed(n,t),r=n.hasNode(e.source)?eo(t,e):-eo(t,e),el(n,t,r);return n},ea=(t,e)=>{let r=n=>{e.getRelatedEdges(n,"both").forEach(o=>{let i=o.source,a=n===i?o.target:i;t.hasNode(a)||eo(e,o)||(t.addNode({id:a,data:{}}),t.addEdge({id:o.id,source:n,target:a,data:{}}),r(a))})};return t.getAllNodes().forEach(t=>r(t.id)),t.getAllNodes().length},es=t=>{let e,r;let n=new c({tree:[]}),o=t.getAllNodes()[0],i=t.getAllNodes().length;for(n.addNode(o);eu(n,t)<i;)e=ed(n,t),r=n.hasNode(e.source)?eo(t,e):-eo(t,e),el(n,t,r);return n},eu=(t,e)=>{let r=n=>{var o;null===(o=e.getRelatedEdges(n,"both"))||void 0===o||o.forEach(o=>{let i=o.source,a=n===i?o.target:i;t.hasNode(a)||void 0===e.getNode(a).data.layer&&eo(e,o)||(t.addNode({id:a,data:{}}),t.addEdge({id:o.id,source:n,target:a,data:{}}),r(a))})};return t.getAllNodes().forEach(t=>r(t.id)),t.getAllNodes().length},ed=(t,e)=>tn(e.getAllEdges(),r=>t.hasNode(r.source)!==t.hasNode(r.target)?eo(e,r):1/0),el=(t,e,r)=>{t.getAllNodes().forEach(t=>{let n=e.getNode(t.id);n.data.rank||(n.data.rank=0),n.data.rank+=r})},eh=t=>{let e,r;let n=J(t);er(n);let o=ei(n);for(ep(o),ec(o,n);e=ey(o);)r=em(o,n,e),ex(o,n,e,r)},ec=(t,e)=>{let r=ti(t,t.getAllNodes(),"post",!1);(r=r.slice(0,(null==r?void 0:r.length)-1)).forEach(r=>{ef(t,e,r)})},ef=(t,e,r)=>{let n=t.getNode(r).data.parent;t.getRelatedEdges(r,"both").find(t=>t.target===n||t.source===n).data.cutvalue=eg(t,e,r)},eg=(t,e,r)=>{let n=t.getNode(r).data.parent,o=!0,i=e.getRelatedEdges(r,"out").find(t=>t.target===n),a=0;return i||(o=!1,i=e.getRelatedEdges(n,"out").find(t=>t.target===r)),a=i.data.weight,e.getRelatedEdges(r,"both").forEach(e=>{let i=e.source===r,s=i?e.target:e.source;if(s!==n){let n=i===o,u=e.data.weight;if(a+=n?u:-u,eb(t,r,s)){let e=t.getRelatedEdges(r,"both").find(t=>t.source===s||t.target===s).data.cutvalue;a+=n?-e:e}}}),a},ep=(t,e=t.getAllNodes()[0].id)=>{ev(t,{},1,e)},ev=(t,e,r,n,o)=>{var i;let a=r,s=t.getNode(n);return e[n]=!0,null===(i=t.getNeighbors(n))||void 0===i||i.forEach(r=>{e[r.id]||(a=ev(t,e,a,r.id,n))}),s.data.low=r,s.data.lim=a++,o?s.data.parent=o:delete s.data.parent,a},ey=t=>t.getAllEdges().find(t=>t.data.cutvalue<0),em=(t,e,r)=>{let n=r.source,o=r.target;e.getRelatedEdges(n,"out").find(t=>t.target===o)||(n=r.target,o=r.source);let i=t.getNode(n),a=t.getNode(o),s=i,u=!1;return i.data.lim>a.data.lim&&(s=a,u=!0),tn(e.getAllEdges().filter(e=>u===eE(t.getNode(e.source),s)&&u!==eE(t.getNode(e.target),s)),t=>eo(e,t))},ex=(t,e,r,n)=>{let o=t.getRelatedEdges(r.source,"both").find(t=>t.source===r.target||t.target===r.target);o&&t.removeEdge(o.id),t.addEdge({id:`e${Math.random()}`,source:n.source,target:n.target,data:{}}),ep(t),ec(t,e),ew(t,e)},ew=(t,e)=>{let r=t.getAllNodes().find(t=>!t.data.parent),n=ti(t,r,"pre",!1);(n=n.slice(1)).forEach(r=>{let n=t.getNode(r).data.parent,o=e.getRelatedEdges(r,"out").find(t=>t.target===n),i=!1;!o&&e.hasNode(n)&&(o=e.getRelatedEdges(n,"out").find(t=>t.target===r),i=!0),e.getNode(r).data.rank=(e.hasNode(n)&&e.getNode(n).data.rank||0)+(i?null==o?void 0:o.data.minlen:-(null==o?void 0:o.data.minlen))})},eb=(t,e,r)=>t.getRelatedEdges(e,"both").find(t=>t.source===r||t.target===r),eE=(t,e)=>e.data.low<=t.data.lim&&t.data.lim<=e.data.lim,eN=(t,e)=>{switch(e){case"network-simplex":ek(t);break;case"tight-tree":default:e_(t);break;case"longest-path":eM(t)}},eM=er,e_=t=>{en(t),es(t)},ek=t=>{eh(t)},ej=(t,e)=>{let r;let{edgeLabelSpace:n,keepNodeOrder:o,prevGraph:i,rankdir:a,ranksep:s}=e;!o&&i&&eA(t,i);let u=eT(t);n&&(e.ranksep=eL(u,{rankdir:a,ranksep:s}));try{r=eO(u,e)}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message){console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);return}throw t}return eS(t,u),r},eO=(t,e)=>{let{acyclicer:r,ranker:n,rankdir:o="tb",nodeOrder:i,keepNodeOrder:a,align:s,nodesep:u=50,edgesep:d=20,ranksep:l=50}=e;eH(t),V(t,r);let{nestingRoot:h,nodeRankFactor:c}=tv(t);eN(X(t),n),eC(t),Q(t,c),tw(t,h),Z(t),eF(t),eq(t);let f=[];tE(t,f),tK(t,f),ta(t),a&&tJ(t,i),tU(t,a),eJ(t),tu(t,o),ee(t,{align:s,nodesep:u,edgesep:d,ranksep:l}),eX(t),eW(t),tM(t,f),eU(t),td(t,o);let{width:g,height:p}=eB(t);return eV(t),eG(t),G(t),{width:g,height:p}},eA=(t,e)=>{t.getAllNodes().forEach(r=>{let n=t.getNode(r.id);if(e.hasNode(r.id)){let t=e.getNode(r.id);n.data.fixorder=t.data._order,delete t.data._order}else delete n.data.fixorder})},eS=(t,e)=>{t.getAllNodes().forEach(r=>{var n;let o=t.getNode(r.id);if(o){let t=e.getNode(r.id);o.data.x=t.data.x,o.data.y=t.data.y,o.data._order=t.data.order,o.data._rank=t.data.rank,(null===(n=e.getChildren(r.id))||void 0===n?void 0:n.length)&&(o.data.width=t.data.width,o.data.height=t.data.height)}}),t.getAllEdges().forEach(r=>{let n=t.getEdge(r.id),o=e.getEdge(r.id);n.data.points=o?o.data.points:[],o&&o.data.hasOwnProperty("x")&&(n.data.x=o.data.x,n.data.y=o.data.y)})},ez=["width","height","layer","fixorder"],eI={width:0,height:0},eD=["minlen","weight","width","height","labeloffset"],eR={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},eP=["labelpos"],eT=t=>{let e=new c({tree:[]});return t.getAllNodes().forEach(r=>{let n=eK(t.getNode(r.id).data),o=e$(Object.assign(Object.assign({},eI),n),ez);e.hasNode(r.id)||e.addNode({id:r.id,data:Object.assign({},o)});let i=t.hasTreeStructure("combo")?t.getParent(r.id,"combo"):t.getParent(r.id);null!=i&&(e.hasNode(i.id)||e.addNode(Object.assign({},i)),e.setParent(r.id,i.id))}),t.getAllEdges().forEach(r=>{let n=eK(t.getEdge(r.id).data),o={};null==eP||eP.forEach(t=>{void 0!==n[t]&&(o[t]=n[t])}),e.addEdge({id:r.id,source:r.source,target:r.target,data:Object.assign({},eR,e$(n,eD),o)})}),e},eL=(t,e)=>{let{ranksep:r=0,rankdir:n}=e;return t.getAllNodes().forEach(t=>{isNaN(t.data.layer)||t.data.layer||(t.data.layer=0)}),t.getAllEdges().forEach(t=>{var e;t.data.minlen*=2,(null===(e=t.data.labelpos)||void 0===e?void 0:e.toLowerCase())!=="c"&&("TB"===n||"BT"===n?t.data.width+=t.data.labeloffset:t.data.height+=t.data.labeloffset)}),r/2},eC=t=>{t.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){let r=t.getNode(e.source),n=t.getNode(e.target);H(t,"edge-proxy",{e:e,rank:(n.data.rank-r.data.rank)/2+r.data.rank},"_ep")}})},eF=t=>{let e=0;return t.getAllNodes().forEach(r=>{var n,o;r.data.borderTop&&(r.data.minRank=null===(n=t.getNode(r.data.borderTop))||void 0===n?void 0:n.data.rank,r.data.maxRank=null===(o=t.getNode(r.data.borderBottom))||void 0===o?void 0:o.data.rank,e=Math.max(e,r.data.maxRank||-1/0))}),e},eq=t=>{t.getAllNodes().forEach(e=>{"edge-proxy"===e.data.dummy&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))})},eB=(t,e)=>{let r,n;let o=0,i=0,{marginx:a=0,marginy:s=0}=e||{},u=t=>{if(!t.data)return;let e=t.data.x,a=t.data.y,s=t.data.width,u=t.data.height;isNaN(e)||isNaN(s)||(void 0===r&&(r=e-s/2),r=Math.min(r,e-s/2),o=Math.max(o,e+s/2)),isNaN(a)||isNaN(u)||(void 0===n&&(n=a-u/2),n=Math.min(n,a-u/2),i=Math.max(i,a+u/2))};return t.getAllNodes().forEach(t=>{u(t)}),t.getAllEdges().forEach(t=>{(null==t?void 0:t.data.hasOwnProperty("x"))&&u(t)}),r-=a,n-=s,t.getAllNodes().forEach(t=>{t.data.x-=r,t.data.y-=n}),t.getAllEdges().forEach(t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach(t=>{t.x-=r,t.y-=n}),t.data.hasOwnProperty("x")&&(t.data.x-=r),t.data.hasOwnProperty("y")&&(t.data.y-=n)}),{width:o-r+a,height:i-n+s}},eV=t=>{t.getAllEdges().forEach(e=>{let r,n;let o=t.getNode(e.source),i=t.getNode(e.target);e.data.points?(r=e.data.points[0],n=e.data.points[e.data.points.length-1]):(e.data.points=[],r={x:i.data.x,y:i.data.y},n={x:o.data.x,y:o.data.y}),e.data.points.unshift(K(o.data,r)),e.data.points.push(K(i.data,n))})},eU=t=>{t.getAllEdges().forEach(t=>{if(t.data.hasOwnProperty("x"))switch(("l"===t.data.labelpos||"r"===t.data.labelpos)&&(t.data.width-=t.data.labeloffset),t.data.labelpos){case"l":t.data.x-=t.data.width/2+t.data.labeloffset;break;case"r":t.data.x+=t.data.width/2+t.data.labeloffset}})},eG=t=>{t.getAllEdges().forEach(t=>{var e;t.data.reversed&&(null===(e=t.data.points)||void 0===e||e.reverse())})},eW=t=>{t.getAllNodes().forEach(e=>{var r,n,o;if(null===(r=t.getChildren(e.id))||void 0===r?void 0:r.length){let r=t.getNode(e.id),i=t.getNode(r.data.borderTop),a=t.getNode(r.data.borderBottom),s=t.getNode(r.data.borderLeft[(null===(n=r.data.borderLeft)||void 0===n?void 0:n.length)-1]),u=t.getNode(r.data.borderRight[(null===(o=r.data.borderRight)||void 0===o?void 0:o.length)-1]);r.data.width=Math.abs((null==u?void 0:u.data.x)-(null==s?void 0:s.data.x))||10,r.data.height=Math.abs((null==a?void 0:a.data.y)-(null==i?void 0:i.data.y))||10,r.data.x=((null==s?void 0:s.data.x)||0)+r.data.width/2,r.data.y=((null==i?void 0:i.data.y)||0)+r.data.height/2}}),t.getAllNodes().forEach(e=>{"border"===e.data.dummy&&t.removeNode(e.id)})},eH=t=>{t.getAllEdges().forEach(e=>{if(e.source===e.target){let r=t.getNode(e.source);r.data.selfEdges||(r.data.selfEdges=[]),r.data.selfEdges.push(e),t.removeEdge(e.id)}})},eJ=t=>{let e=Y(t);null==e||e.forEach(e=>{let r=0;null==e||e.forEach((e,n)=>{var o;let i=t.getNode(e);i.data.order=n+r,null===(o=i.data.selfEdges)||void 0===o||o.forEach(e=>{H(t,"selfedge",{width:e.data.width,height:e.data.height,rank:i.data.rank,order:n+ ++r,e:e},"_se")}),delete i.data.selfEdges})})},eX=t=>{t.getAllNodes().forEach(e=>{let r=t.getNode(e.id);if("selfedge"===r.data.dummy){let n=t.getNode(r.data.e.source),o=n.data.x+n.data.width/2,i=n.data.y,a=r.data.x-o,s=n.data.height/2;t.hasEdge(r.data.e.id)?t.updateEdgeData(r.data.e.id,r.data.e.data):t.addEdge({id:r.data.e.id,source:r.data.e.source,target:r.data.e.target,data:r.data.e.data}),t.removeNode(e.id),r.data.e.data.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{y:i,x:o+a},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.data.e.data.x=r.data.x,r.data.e.data.y=r.data.y}})},e$=(t,e)=>{let r={};return null==e||e.forEach(e=>{void 0!==t[e]&&(r[e]=+t[e])}),r},eK=(t={})=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},eY=t=>{if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){let e=[];return t.forEach(t=>{e.push(t)}),e.map(t=>eY(t))}if("object"==typeof t){let e={};return Object.keys(t).forEach(r=>{e[r]=eY(t[r])}),e}return t},eZ=(t,e)=>{let r=eY(t);return r.data=r.data||{},e&&(z(r.data.x)||(r.data.x=Math.random()*e[0]),z(r.data.y)||(r.data.y=Math.random()*e[1])),r};function eQ(t){return"function"==typeof t}var e0=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function e1(t){if(!t)return[0,0,0];if(z(t))return[t,t,t];if(0===t.length)return[0,0,0];let[e,r=e,n=e]=t;return[e,r,n]}function e2(t,e){return eQ(e)?e:z(e)?()=>e:()=>t}function e3(t,e,r=!0){return e||0===e?eQ(e)?e:z(e)?()=>e:Array.isArray(e)?()=>r?Math.max(...e)||t:e:e0(e)&&e.width&&e.height?()=>r?Math.max(e.width,e.height)||t:[e.width,e.height]:()=>t:e=>{let{size:n}=e.data||{};return n?Array.isArray(n)?r?Math.max(...n)||t:n:e0(n)&&n.width&&n.height?r?Math.max(n.width,n.height)||t:[n.width,n.height]:n:t}}let e6=(t,e,r=10)=>{let n;let o="function"==typeof e?e:()=>e||0;return n=t?Array.isArray(t)?e=>t:eQ(t)?t:e=>t:t=>{var e,n,o;if(null===(e=t.data)||void 0===e?void 0:e.bboxSize)return null===(n=t.data)||void 0===n?void 0:n.bboxSize;if(null===(o=t.data)||void 0===o?void 0:o.size){let e=t.data.size;return Array.isArray(e)?e:e0(e)?[e.width,e.height]:e}return r},t=>{let e=n(t),r=o(t);return Math.max(...e1(e))+r}},e8={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null},e5=(t,e,r,n,o,i,a)=>{let s=(null==t?void 0:t.slice(1,t.length-1))||[];if(e&&r){let{x:t,y:u}=e.data,{x:d,y:l}=r.data;if(o&&(t=e.data.y,u=e.data.x,d=r.data.y,l=r.data.x),l!==u&&t!==d){let h=n.indexOf(u),c=n[h+1];if(c){let t=s[0],e=o?{x:(u+c)/2,y:(null==t?void 0:t.y)||d}:{x:(null==t?void 0:t.x)||d,y:(u+c)/2};(!t||i(t,e))&&s.unshift(e)}let f=n.indexOf(l),g=Math.abs(f-h);if(1===g)(s=a(s,e.data,r.data)).length||s.push(o?{x:(u+l)/2,y:t}:{x:t,y:(u+l)/2});else if(g>1){let e=n[f-1];if(e){let r=s[s.length-1],n=o?{x:(l+e)/2,y:(null==r?void 0:r.y)||d}:{x:(null==r?void 0:r.x)||t,y:(l+e)/2};(!r||i(r,n))&&s.push(n)}}}}return s},e4=(t,e,r)=>{let n=t.getAllNodes(),o=t.getAllEdges();return(null==n?void 0:n.length)?1===n.length?(e&&t.mergeNodeData(n[0].id,{x:r[0],y:r[1]}),{nodes:[Object.assign(Object.assign({},n[0]),{data:Object.assign(Object.assign({},n[0].data),{x:r[0],y:r[1]})})],edges:o}):void 0:{nodes:[],edges:o}},e9={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1},e7=(t,e,r=!1)=>{let n=[eZ(e[0])],o={},i=e.length;o[e[0].id]=!0;let a=0;return e.forEach((s,u)=>{if(0!==u){if((u===i-1||t.getDegree(s.id,"both")!==t.getDegree(e[u+1].id,"both")||t.areNeighbors(n[a].id,s.id))&&!o[s.id])n.push(eZ(s)),o[s.id]=!0,a++;else{let u=r?t.getSuccessors(n[a].id):t.getNeighbors(n[a].id),d=!1;for(let e=0;e<u.length;e++){let r=u[e];if(t.getDegree(r.id)===t.getDegree(s.id)&&!o[r.id]){n.push(eZ(r)),o[r.id]=!0,d=!0;break}}let l=0;for(;!d&&(o[e[l].id]||(n.push(eZ(e[l])),o[e[l].id]=!0,d=!0),++l!==i););}}}),n},rt=(t,e,r)=>{let n=t,o=e,i=r;return n||"undefined"==typeof window||(n=window.innerWidth),o||"undefined"==typeof window||(o=window.innerHeight),i||(i=[n/2,o/2]),[n,o,i]};function re(t){return"string"==typeof t}let rr=Array.isArray,rn={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class ro{constructor(t={}){this.options=t,this.id="concentric",this.options=Object.assign(Object.assign({},rn),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,t,e)})}genericConcentricLayout(t,e,r){return a(this,void 0,void 0,function*(){let n;let{center:o,width:i,height:a,sortBy:s,maxLevelDiff:u,sweep:d,clockwise:l,equidistant:h,preventOverlap:c,startAngle:f=1.5*Math.PI,nodeSize:g,nodeSpacing:p}=Object.assign(Object.assign({},this.options),r),v=e.getAllNodes(),y=e.getAllEdges(),m=i||"undefined"==typeof window?i:window.innerWidth,x=a||"undefined"==typeof window?a:window.innerHeight,w=o||[m/2,x/2];if(!(null==v?void 0:v.length)||1===v.length)return e4(e,t,w);let b=[],E=0;rr(g)?n=Math.max(g[0],g[1]):eQ(g)?(n=-1/0,v.forEach(t=>{let e=Math.max(...e1(g(t)));e>n&&(n=e)})):n=g,rr(p)?E=Math.max(p[0],p[1]):z(p)&&(E=p),v.forEach(t=>{let e=eZ(t);b.push(e);let r=n,{data:o}=e;rr(o.size)?r=Math.max(o.size[0],o.size[1]):z(o.size)?r=o.size:e0(o.size)&&(r=Math.max(o.size.width,o.size.height)),n=Math.max(n,r),eQ(p)&&(E=Math.max(p(t),E))});let N={};b.forEach((t,e)=>{N[t.id]=e});let M=s;re(M)&&void 0!==b[0].data[M]||(M="degree"),"degree"===M?b.sort((t,r)=>e.getDegree(r.id,"both")-e.getDegree(t.id,"both")):b.sort((t,e)=>e.data[M]-t.data[M]);let _=b[0],k=(u||("degree"===M?e.getDegree(_.id,"both"):_.data[M]))/4,j=[{nodes:[]}],O=j[0];b.forEach(t=>{if(O.nodes.length>0){let r="degree"===M?Math.abs(e.getDegree(O.nodes[0].id,"both")-e.getDegree(t.id,"both")):Math.abs(O.nodes[0].data[M]-t.data[M]);k&&r>=k&&(O={nodes:[]},j.push(O))}O.nodes.push(t)});let A=n+E;if(!c){let t=j.length>0&&j[0].nodes.length>1,e=(Math.min(m,x)/2-A)/(j.length+(t?1:0));A=Math.min(A,e)}let S=0;if(j.forEach(t=>{let e=void 0===d?2*Math.PI-2*Math.PI/t.nodes.length:d;if(t.dTheta=e/Math.max(1,t.nodes.length-1),t.nodes.length>1&&c){let e=Math.cos(t.dTheta)-1,r=Math.sin(t.dTheta)-0;S=Math.max(Math.sqrt(A*A/(e*e+r*r)),S)}t.r=S,S+=A}),h){let t=0,e=0;for(let r=0;r<j.length;r++){let n=(j[r].r||0)-e;t=Math.max(t,n)}e=0,j.forEach((r,n)=>{0===n&&(e=r.r||0),r.r=e,e+=t})}return j.forEach(t=>{let e=t.dTheta||0,r=t.r||0;t.nodes.forEach((t,n)=>{let o=f+(l?1:-1)*e*n;t.data.x=w[0]+r*Math.cos(o),t.data.y=w[1]+r*Math.sin(o)})}),t&&b.forEach(t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})),{nodes:b,edges:y}})}}function ri(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var o,i,a,s,u,d,l,h,c,f=t._root,g={data:n},p=t._x0,v=t._y0,y=t._x1,m=t._y1;if(!f)return t._root=g,t;for(;f.length;)if((d=e>=(i=(p+y)/2))?p=i:y=i,(l=r>=(a=(v+m)/2))?v=a:m=a,o=f,!(f=f[h=l<<1|d]))return o[h]=g,t;if(s=+t._x.call(null,f.data),u=+t._y.call(null,f.data),e===s&&r===u)return g.next=f,o?o[h]=g:t._root=g,t;do o=o?o[h]=[,,,,]:t._root=[,,,,],(d=e>=(i=(p+y)/2))?p=i:y=i,(l=r>=(a=(v+m)/2))?v=a:m=a;while((h=l<<1|d)==(c=(u>=a)<<1|s>=i))return o[c]=f,o[h]=g,t}function ra(t,e,r,n,o){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=o}function rs(t){return t[0]}function ru(t){return t[1]}function rd(t,e,r){var n=new rl(null==e?rs:e,null==r?ru:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function rl(t,e,r,n,o,i){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=o,this._y1=i,this._root=void 0}function rh(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var rc=rd.prototype=rl.prototype;function rf(t,e,r,n,o){if(isNaN(e)||isNaN(r)||isNaN(n))return t;var i,a,s,u,d,l,h,c,f,g,p,v,y=t._root,m={data:o},x=t._x0,w=t._y0,b=t._z0,E=t._x1,N=t._y1,M=t._z1;if(!y)return t._root=m,t;for(;y.length;)if((c=e>=(a=(x+E)/2))?x=a:E=a,(f=r>=(s=(w+N)/2))?w=s:N=s,(g=n>=(u=(b+M)/2))?b=u:M=u,i=y,!(y=y[p=g<<2|f<<1|c]))return i[p]=m,t;if(d=+t._x.call(null,y.data),l=+t._y.call(null,y.data),h=+t._z.call(null,y.data),e===d&&r===l&&n===h)return m.next=y,i?i[p]=m:t._root=m,t;do i=i?i[p]=Array(8):t._root=Array(8),(c=e>=(a=(x+E)/2))?x=a:E=a,(f=r>=(s=(w+N)/2))?w=s:N=s,(g=n>=(u=(b+M)/2))?b=u:M=u;while((p=g<<2|f<<1|c)==(v=(h>=u)<<2|(l>=s)<<1|d>=a))return i[v]=y,i[p]=m,t}function rg(t,e,r,n,o,i,a){this.node=t,this.x0=e,this.y0=r,this.z0=n,this.x1=o,this.y1=i,this.z1=a}function rp(t){return t[0]}function rv(t){return t[1]}function ry(t){return t[2]}function rm(t,e,r,n){var o=new rx(null==e?rp:e,null==r?rv:r,null==n?ry:n,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function rx(t,e,r,n,o,i,a,s,u){this._x=t,this._y=e,this._z=r,this._x0=n,this._y0=o,this._z0=i,this._x1=a,this._y1=s,this._z1=u,this._root=void 0}function rw(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}rc.copy=function(){var t,e,r=new rl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=rh(n),r;for(t=[{source:n,target:r._root=[,,,,]}];n=t.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=[,,,,]}):n.target[o]=rh(e));return r},rc.add=function(t){let e=+this._x.call(null,t),r=+this._y.call(null,t);return ri(this.cover(e,r),e,r,t)},rc.addAll=function(t){var e,r,n,o,i=t.length,a=Array(i),s=Array(i),u=1/0,d=1/0,l=-1/0,h=-1/0;for(r=0;r<i;++r)!(isNaN(n=+this._x.call(null,e=t[r]))||isNaN(o=+this._y.call(null,e)))&&(a[r]=n,s[r]=o,n<u&&(u=n),n>l&&(l=n),o<d&&(d=o),o>h&&(h=o));if(u>l||d>h)return this;for(this.cover(u,d).cover(l,h),r=0;r<i;++r)ri(this,a[r],s[r],t[r]);return this},rc.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,o=this._x1,i=this._y1;if(isNaN(r))o=(r=Math.floor(t))+1,i=(n=Math.floor(e))+1;else{for(var a,s,u=o-r||1,d=this._root;r>t||t>=o||n>e||e>=i;)switch(s=(e<n)<<1|t<r,(a=[,,,,])[s]=d,d=a,u*=2,s){case 0:o=r+u,i=n+u;break;case 1:r=o-u,i=n+u;break;case 2:o=r+u,n=i-u;break;case 3:r=o-u,n=i-u}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=n,this._x1=o,this._y1=i,this},rc.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},rc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rc.find=function(t,e,r){var n,o,i,a,s,u,d,l=this._x0,h=this._y0,c=this._x1,f=this._y1,g=[],p=this._root;for(p&&g.push(new ra(p,l,h,c,f)),null==r?r=1/0:(l=t-r,h=e-r,c=t+r,f=e+r,r*=r);u=g.pop();)if((p=u.node)&&!((o=u.x0)>c)&&!((i=u.y0)>f)&&!((a=u.x1)<l)&&!((s=u.y1)<h)){if(p.length){var v=(o+a)/2,y=(i+s)/2;g.push(new ra(p[3],v,y,a,s),new ra(p[2],o,y,v,s),new ra(p[1],v,i,a,y),new ra(p[0],o,i,v,y)),(d=(e>=y)<<1|t>=v)&&(u=g[g.length-1],g[g.length-1]=g[g.length-1-d],g[g.length-1-d]=u)}else{var m=t-+this._x.call(null,p.data),x=e-+this._y.call(null,p.data),w=m*m+x*x;if(w<r){var b=Math.sqrt(r=w);l=t-b,h=e-b,c=t+b,f=e+b,n=p.data}}}return n},rc.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,r,n,o,i,a,s,u,d,l,h,c,f=this._root,g=this._x0,p=this._y0,v=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((d=i>=(s=(g+v)/2))?g=s:v=s,(l=a>=(u=(p+y)/2))?p=u:y=u,e=f,!(f=f[h=l<<1|d]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(r=e,c=h)}for(;f.data!==t;)if(n=f,!(f=f.next))return this;return((o=f.next)&&delete f.next,n)?o?n.next=o:delete n.next:e?(o?e[h]=o:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(r?r[c]=f:this._root=f)):this._root=o,this},rc.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},rc.root=function(){return this._root},rc.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},rc.visit=function(t){var e,r,n,o,i,a,s=[],u=this._root;for(u&&s.push(new ra(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,n=e.x0,o=e.y0,i=e.x1,a=e.y1)&&u.length){var d=(n+i)/2,l=(o+a)/2;(r=u[3])&&s.push(new ra(r,d,l,i,a)),(r=u[2])&&s.push(new ra(r,n,l,d,a)),(r=u[1])&&s.push(new ra(r,d,o,i,l)),(r=u[0])&&s.push(new ra(r,n,o,d,l))}return this},rc.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new ra(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var o=e.node;if(o.length){var i,a=e.x0,s=e.y0,u=e.x1,d=e.y1,l=(a+u)/2,h=(s+d)/2;(i=o[0])&&r.push(new ra(i,a,s,l,h)),(i=o[1])&&r.push(new ra(i,l,s,u,h)),(i=o[2])&&r.push(new ra(i,a,h,l,d)),(i=o[3])&&r.push(new ra(i,l,h,u,d))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rc.x=function(t){return arguments.length?(this._x=t,this):this._x},rc.y=function(t){return arguments.length?(this._y=t,this):this._y};var rb=rm.prototype=rx.prototype;function rE(t){let e=0,r=0,n=0,o=0,i=0,a=t.length;if(a){for(let s=0;s<a;s++){let a=t[s];a&&a.weight&&(e+=a.weight,r+=a.x*a.weight,n+=a.y*a.weight,o+=a.z*a.weight,i+=a.size*a.weight)}t.x=r/e,t.y=n/e,t.z=o/e,t.size=i/e,t.weight=e}else t.x=t.data.x,t.y=t.data.y,t.z=t.data.z,t.size=t.data.size,t.weight=t.data.weight}rb.copy=function(){var t,e,r=new rx(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root;if(!n)return r;if(!n.length)return r._root=rw(n),r;for(t=[{source:n,target:r._root=Array(8)}];n=t.pop();)for(var o=0;o<8;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=Array(8)}):n.target[o]=rw(e));return r},rb.add=function(t){let e=+this._x.call(null,t),r=+this._y.call(null,t),n=+this._z.call(null,t);return rf(this.cover(e,r,n),e,r,n,t)},rb.addAll=function(t){Array.isArray(t)||(t=Array.from(t));let e=t.length,r=new Float64Array(e),n=new Float64Array(e),o=new Float64Array(e),i=1/0,a=1/0,s=1/0,u=-1/0,d=-1/0,l=-1/0;for(let h=0,c,f,g,p;h<e;++h)!(isNaN(f=+this._x.call(null,c=t[h]))||isNaN(g=+this._y.call(null,c))||isNaN(p=+this._z.call(null,c)))&&(r[h]=f,n[h]=g,o[h]=p,f<i&&(i=f),f>u&&(u=f),g<a&&(a=g),g>d&&(d=g),p<s&&(s=p),p>l&&(l=p));if(i>u||a>d||s>l)return this;this.cover(i,a,s).cover(u,d,l);for(let i=0;i<e;++i)rf(this,r[i],n[i],o[i],t[i]);return this},rb.cover=function(t,e,r){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(r=+r))return this;var n=this._x0,o=this._y0,i=this._z0,a=this._x1,s=this._y1,u=this._z1;if(isNaN(n))a=(n=Math.floor(t))+1,s=(o=Math.floor(e))+1,u=(i=Math.floor(r))+1;else{for(var d,l,h=a-n||1,c=this._root;n>t||t>=a||o>e||e>=s||i>r||r>=u;)switch(l=(r<i)<<2|(e<o)<<1|t<n,(d=Array(8))[l]=c,c=d,h*=2,l){case 0:a=n+h,s=o+h,u=i+h;break;case 1:n=a-h,s=o+h,u=i+h;break;case 2:a=n+h,o=s-h,u=i+h;break;case 3:n=a-h,o=s-h,u=i+h;break;case 4:a=n+h,s=o+h,i=u-h;break;case 5:n=a-h,s=o+h,i=u-h;break;case 6:a=n+h,o=s-h,i=u-h;break;case 7:n=a-h,o=s-h,i=u-h}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=o,this._z0=i,this._x1=a,this._y1=s,this._z1=u,this},rb.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},rb.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},rb.find=function(t,e,r,n){var o,i,a,s,u,d,l,h,c,f=this._x0,g=this._y0,p=this._z0,v=this._x1,y=this._y1,m=this._z1,x=[],w=this._root;for(w&&x.push(new rg(w,f,g,p,v,y,m)),null==n?n=1/0:(f=t-n,g=e-n,p=r-n,v=t+n,y=e+n,m=r+n,n*=n);h=x.pop();)if((w=h.node)&&!((i=h.x0)>v)&&!((a=h.y0)>y)&&!((s=h.z0)>m)&&!((u=h.x1)<f)&&!((d=h.y1)<g)&&!((l=h.z1)<p)){if(w.length){var b=(i+u)/2,E=(a+d)/2,N=(s+l)/2;x.push(new rg(w[7],b,E,N,u,d,l),new rg(w[6],i,E,N,b,d,l),new rg(w[5],b,a,N,u,E,l),new rg(w[4],i,a,N,b,E,l),new rg(w[3],b,E,s,u,d,N),new rg(w[2],i,E,s,b,d,N),new rg(w[1],b,a,s,u,E,N),new rg(w[0],i,a,s,b,E,N)),(c=(r>=N)<<2|(e>=E)<<1|t>=b)&&(h=x[x.length-1],x[x.length-1]=x[x.length-1-c],x[x.length-1-c]=h)}else{var M=t-+this._x.call(null,w.data),_=e-+this._y.call(null,w.data),k=r-+this._z.call(null,w.data),j=M*M+_*_+k*k;if(j<n){var O=Math.sqrt(n=j);f=t-O,g=e-O,p=r-O,v=t+O,y=e+O,m=r+O,o=w.data}}}return o},rb.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t)))return this;var e,r,n,o,i,a,s,u,d,l,h,c,f,g,p,v=this._root,y=this._x0,m=this._y0,x=this._z0,w=this._x1,b=this._y1,E=this._z1;if(!v)return this;if(v.length)for(;;){if((h=i>=(u=(y+w)/2))?y=u:w=u,(c=a>=(d=(m+b)/2))?m=d:b=d,(f=s>=(l=(x+E)/2))?x=l:E=l,e=v,!(v=v[g=f<<2|c<<1|h]))return this;if(!v.length)break;(e[g+1&7]||e[g+2&7]||e[g+3&7]||e[g+4&7]||e[g+5&7]||e[g+6&7]||e[g+7&7])&&(r=e,p=g)}for(;v.data!==t;)if(n=v,!(v=v.next))return this;return((o=v.next)&&delete v.next,n)?o?n.next=o:delete n.next:e?(o?e[g]=o:delete e[g],(v=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&v===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!v.length&&(r?r[p]=v:this._root=v)):this._root=o,this},rb.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},rb.root=function(){return this._root},rb.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},rb.visit=function(t){var e,r,n,o,i,a,s,u,d=[],l=this._root;for(l&&d.push(new rg(l,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=d.pop();)if(!t(l=e.node,n=e.x0,o=e.y0,i=e.z0,a=e.x1,s=e.y1,u=e.z1)&&l.length){var h=(n+a)/2,c=(o+s)/2,f=(i+u)/2;(r=l[7])&&d.push(new rg(r,h,c,f,a,s,u)),(r=l[6])&&d.push(new rg(r,n,c,f,h,s,u)),(r=l[5])&&d.push(new rg(r,h,o,f,a,c,u)),(r=l[4])&&d.push(new rg(r,n,o,f,h,c,u)),(r=l[3])&&d.push(new rg(r,h,c,i,a,s,f)),(r=l[2])&&d.push(new rg(r,n,c,i,h,s,f)),(r=l[1])&&d.push(new rg(r,h,o,i,a,c,f)),(r=l[0])&&d.push(new rg(r,n,o,i,h,c,f))}return this},rb.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new rg(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=r.pop();){var o=e.node;if(o.length){var i,a=e.x0,s=e.y0,u=e.z0,d=e.x1,l=e.y1,h=e.z1,c=(a+d)/2,f=(s+l)/2,g=(u+h)/2;(i=o[0])&&r.push(new rg(i,a,s,u,c,f,g)),(i=o[1])&&r.push(new rg(i,c,s,u,d,f,g)),(i=o[2])&&r.push(new rg(i,a,f,u,c,l,g)),(i=o[3])&&r.push(new rg(i,c,f,u,d,l,g)),(i=o[4])&&r.push(new rg(i,a,s,g,c,f,h)),(i=o[5])&&r.push(new rg(i,c,s,g,d,f,h)),(i=o[6])&&r.push(new rg(i,a,f,g,c,l,h)),(i=o[7])&&r.push(new rg(i,c,f,g,d,l,h))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},rb.x=function(t){return arguments.length?(this._x=t,this):this._x},rb.y=function(t){return arguments.length?(this._y=t,this):this._y},rb.z=function(t){return arguments.length?(this._z=t,this):this._z};let rN=(t,e,r,n,o,i,a)=>{var s;if((null===(s=t.data)||void 0===s?void 0:s.id)===i.id)return;let u=[r,n,o][a-1],d=i.x-t.x||.1,l=i.y-t.y||.1,h=i.z-t.z||.1,c=[d,l,h],f=u-e,g=0;for(let t=0;t<a;t++)g+=c[t]*c[t];let p=Math.sqrt(g)*g;if(f*f*.81<g){let e=t.weight/p;return i.vx+=d*e,i.vy+=l*e,i.vz+=h*e,!0}if(t.length)return!1;if(t.data!==i){let e=t.data.weight/p;i.vx+=d*e,i.vy+=l*e,i.vz+=h*e}},rM={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class r_{constructor(t={}){this.options=t,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},rM),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericForceLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,t,e)})}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}tick(t=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let e=0;(this.judgingDistance>this.lastOptions.minMovement||e<1)&&e<t;e++)this.runOneStep(this.lastCalcGraph,this.lastGraph,e,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);let e={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&e.nodes.forEach(t=>this.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===this.options.dimensions?t.data.z:void 0})),e}genericForceLayout(t,e,r){return a(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.options),r),o=e.getAllNodes(),i=e.getAllEdges(),a=this.formatOptions(n,e),{dimensions:s,width:u,height:d,nodeSize:l,getMass:h,nodeStrength:f,edgeStrength:g,linkDistance:p}=a,v=o.map((t,e)=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{x:z(t.data.x)?t.data.x:Math.random()*u,y:z(t.data.y)?t.data.y:Math.random()*d,z:z(t.data.z)?t.data.z:Math.random()*Math.sqrt(u*d),size:l(t)||30,mass:h(t),nodeStrength:f(t)})})),y=i.map(t=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{edgeStrength:g(t),linkDistance:p(t,e.getNode(t.source),e.getNode(t.target))})}));if(!(null==o?void 0:o.length))return this.lastResult={nodes:[],edges:i},{nodes:[],edges:i};let m={};o.forEach((t,e)=>{m[t.id]={x:0,y:0,z:0}});let x=new c({nodes:v,edges:y});this.formatCentripetal(a,x);let{maxIteration:w,minMovement:b,onTick:E}=a;if(this.lastLayoutNodes=v,this.lastLayoutEdges=y,this.lastAssign=t,this.lastGraph=e,this.lastCalcGraph=x,this.lastOptions=a,this.lastVelMap=m,"undefined"==typeof window)return;let N=0;return new Promise(r=>{this.timeInterval=window.setInterval(()=>{o&&this.running||r({nodes:rS(e,v),edges:i}),this.runOneStep(x,e,N,m,a),this.updatePosition(e,x,m,a),t&&v.forEach(t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===s?t.data.z:void 0})),null==E||E({nodes:rS(e,v),edges:i}),(++N>=w||this.judgingDistance<b)&&(window.clearInterval(this.timeInterval),r({nodes:rS(e,v),edges:i}))},0),this.running=!0})})}formatOptions(t,e){let r=Object.assign({},t),{width:n,height:o,getMass:i}=t;r.width=n||"undefined"==typeof window?n:window.innerWidth,r.height=o||"undefined"==typeof window?o:window.innerHeight,t.center||(r.center=[r.width/2,r.height/2]),i||(r.getMass=t=>{let r=1;z(null==t?void 0:t.data.mass)&&(r=null==t?void 0:t.data.mass);let n=e.getDegree(t.id,"both");return!n||n<5?r:5*n*r}),r.nodeSize=e6(t.nodeSize,t.nodeSpacing);let a=t.linkDistance?e2(1,t.linkDistance):t=>1+r.nodeSize(e.getNode(t.source))+r.nodeSize(e.getNode(t.target));return r.linkDistance=a,r.nodeStrength=e2(1,t.nodeStrength),r.edgeStrength=e2(1,t.edgeStrength),r}formatCentripetal(t,e){let r,n;let{dimensions:o,centripetalOptions:i,center:a,clusterNodeStrength:s,leafCluster:u,clustering:d,nodeClusterBy:l}=t,h=e.getAllNodes(),c=i||{leaf:2,single:2,others:1,center:t=>({x:a[0],y:a[1],z:3===o?a[2]:void 0})};if("function"!=typeof s&&(t.clusterNodeStrength=t=>s),u&&l&&(r=rk(e,l),n=Array.from(new Set(null==h?void 0:h.map(t=>t.data[l])))||[],t.centripetalOptions=Object.assign(c,{single:100,leaf:e=>{let{siblingLeaves:o,sameTypeLeaves:i}=r[e.id]||{};return(null==i?void 0:i.length)===(null==o?void 0:o.length)||(null==n?void 0:n.length)===1?1:t.clusterNodeStrength(e)},others:1,center:t=>{let n;let o=e.getDegree(t.id,"both");if(!o)return{x:100,y:100,z:0};if(1===o){let{sameTypeLeaves:e=[]}=r[t.id]||{};1===e.length?n=void 0:e.length>1&&(n=rA(e))}else n=void 0;return{x:null==n?void 0:n.x,y:null==n?void 0:n.y,z:null==n?void 0:n.z}}})),d&&l){r||(r=rk(e,l)),n||(n=Array.from(new Set(h.map(t=>t.data[l]))));let o={};(n=n.filter(t=>void 0!==t)).forEach(t=>{let r=h.filter(e=>e.data[l]===t).map(t=>e.getNode(t.id));o[t]=rA(r)}),t.centripetalOptions=Object.assign(c,{single:e=>t.clusterNodeStrength(e),leaf:e=>t.clusterNodeStrength(e),others:e=>t.clusterNodeStrength(e),center:t=>{let e=o[t.data[l]];return{x:null==e?void 0:e.x,y:null==e?void 0:e.y,z:null==e?void 0:e.z}}})}let{leaf:f,single:g,others:p}=t.centripetalOptions||{};f&&"function"!=typeof f&&(t.centripetalOptions.leaf=()=>f),g&&"function"!=typeof g&&(t.centripetalOptions.single=()=>g),p&&"function"!=typeof p&&(t.centripetalOptions.others=()=>p)}runOneStep(t,e,r,n,o){let i={},a=t.getAllNodes(),s=t.getAllEdges();if(!(null==a?void 0:a.length))return;let{monitor:u}=o;this.calRepulsive(t,i,o),s&&this.calAttractive(t,i,o),this.calGravity(t,e,i,o),this.updateVelocity(t,i,n,o),u&&u({energy:this.calTotalEnergy(i,a),nodes:e.getAllNodes(),edges:e.getAllEdges(),iterations:r})}calTotalEnergy(t,e){if(!(null==e?void 0:e.length))return 0;let r=0;return e.forEach((e,n)=>{let o=t[e.id].x,i=t[e.id].y,a=3===this.options.dimensions?t[e.id].z:0,{mass:s=1}=e.data;r+=s*(o*o+i*i+a*a)*.5}),r}calRepulsive(t,e,r){let{dimensions:n,factor:o,coulombDisScale:i}=r;!function(t,e,r,n,o=2){let i=e/r,a=t.getAllNodes(),s=a.map((t,e)=>{let{nodeStrength:r,x:n,y:o,z:a,size:s}=t.data;return{x:n,y:o,z:a,size:s,index:e,id:t.id,vx:0,vy:0,vz:0,weight:i*r}}),u=(2===o?rd(s,t=>t.x,t=>t.y):rm(s,t=>t.x,t=>t.y,t=>t.z)).visitAfter(rE),d=new Map;s.forEach(t=>{d.set(t.id,t),function(t,e,r){e.visit((e,n,o,i,a)=>rN(e,n,o,i,a,t,r))}(t,u,o)}),s.map((t,e)=>{let{id:r,data:o}=a[e],{mass:i=1}=o;n[r]={x:t.vx/i,y:t.vy/i,z:t.vz/i}})}(t,o,i*i,e,n)}calAttractive(t,e,r){let{dimensions:n,nodeSize:o}=r;t.getAllEdges().forEach((r,i)=>{let{source:a,target:s}=r,u=t.getNode(a),d=t.getNode(s);if(!u||!d)return;let l=d.data.x-u.data.x,h=d.data.y-u.data.y,c=3===n?d.data.z-u.data.z:0;l||h||(l=.01*Math.random(),h=.01*Math.random(),3!==n||c||(c=.01*Math.random()));let f=Math.sqrt(l*l+h*h+c*c);if(f<o(u)+o(d))return;let g=l/f,p=h/f,v=c/f,{linkDistance:y=200,edgeStrength:m=200}=r.data||{},x=(y-f)*m,w=u.data.mass||1,b=d.data.mass||1,E=1/w,N=1/b,M=g*x,_=p*x,k=v*x;e[a].x-=M*E,e[a].y-=_*E,e[a].z-=k*E,e[s].x+=M*N,e[s].y+=_*N,e[s].z+=k*N})}calGravity(t,e,r,n){let{getCenter:o}=n,i=t.getAllNodes(),a=e.getAllNodes(),s=e.getAllEdges(),{width:u,height:d,center:l,gravity:h,centripetalOptions:c}=n;i&&i.forEach(n=>{let{id:i,data:f}=n,{mass:g,x:p,y:v,z:y}=f,m=e.getNode(i),x=0,w=0,b=0,E=h,N=t.getDegree(i,"in"),M=t.getDegree(i,"out"),_=t.getDegree(i,"both"),k=null==o?void 0:o(m,_);if(k){let[t,e,r]=k;x=p-t,w=v-e,E=r}else x=p-l[0],w=v-l[1],b=y-l[2];if(E&&(r[i].x-=E*x/g,r[i].y-=E*w/g,r[i].z-=E*b/g),c){let{leaf:t,single:e,others:n,center:o}=c,{x:l,y:h,z:f,centerStrength:x}=(null==o?void 0:o(m,a,s,u,d))||{x:0,y:0,z:0,centerStrength:0};if(!z(l)||!z(h))return;let w=(p-l)/g,b=(v-h)/g,E=(y-f)/g;if(x&&(r[i].x-=x*w,r[i].y-=x*b,r[i].z-=x*E),0===_){let t=e(m);if(!t)return;r[i].x-=t*w,r[i].y-=t*b,r[i].z-=t*E;return}if(0===N||0===M){let e=t(m,a,s);if(!e)return;r[i].x-=e*w,r[i].y-=e*b,r[i].z-=e*E;return}let k=n(m);if(!k)return;r[i].x-=k*w,r[i].y-=k*b,r[i].z-=k*E}})}updateVelocity(t,e,r,n){let{damping:o,maxSpeed:i,interval:a,dimensions:s}=n,u=t.getAllNodes();(null==u?void 0:u.length)&&u.forEach(t=>{let{id:n}=t,u=(r[n].x+e[n].x*a)*o||.01,d=(r[n].y+e[n].y*a)*o||.01,l=3===s?(r[n].z+e[n].z*a)*o||.01:0,h=Math.sqrt(u*u+d*d+l*l);if(h>i){let t=i/h;u*=t,d*=t,l*=t}r[n]={x:u,y:d,z:l}})}updatePosition(t,e,r,n){let{distanceThresholdMode:o,interval:i,dimensions:a}=n,s=e.getAllNodes();if(!(null==s?void 0:s.length)){this.judgingDistance=0;return}let u=0;"max"===o?this.judgingDistance=-1/0:"min"===o&&(this.judgingDistance=1/0),s.forEach(n=>{let{id:s}=n,d=t.getNode(s);if(z(d.data.fx)&&z(d.data.fy)){e.mergeNodeData(s,{x:d.data.fx,y:d.data.fy,z:3===a?d.data.fz:void 0});return}let l=r[s].x*i,h=r[s].y*i,c=3===a?r[s].z*i:0;e.mergeNodeData(s,{x:n.data.x+l,y:n.data.y+h,z:n.data.z+c});let f=Math.sqrt(l*l+h*h+c*c);switch(o){case"max":this.judgingDistance<f&&(this.judgingDistance=f);break;case"min":this.judgingDistance>f&&(this.judgingDistance=f);break;default:u+=f}}),o&&"mean"!==o||(this.judgingDistance=u/s.length)}}let rk=(t,e)=>{let r=t.getAllNodes();if(!(null==r?void 0:r.length))return{};let n={};return r.forEach((r,o)=>{1===t.getDegree(r.id,"both")&&(n[r.id]=rj(t,"leaf",r,e))}),n},rj=(t,e,r,n)=>{let o=t.getDegree(r.id,"in"),i=t.getDegree(r.id,"out"),a=r,s=[];0===o?(a=t.getSuccessors(r.id)[0],s=t.getNeighbors(a.id)):0===i&&(a=t.getPredecessors(r.id)[0],s=t.getNeighbors(a.id)),s=s.filter(e=>0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out"));let u=rO(t,e,n,r,s);return{coreNode:a,siblingLeaves:s,sameTypeLeaves:u}},rO=(t,e,r,n,o)=>{let i=n.data[r]||"",a=(null==o?void 0:o.filter(t=>t.data[r]===i))||[];return"leaf"===e&&(a=a.filter(e=>0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out"))),a},rA=t=>{let e={x:0,y:0};t.forEach(t=>{let{x:r,y:n}=t.data;e.x+=r||0,e.y+=n||0});let r=t.length||1;return{x:e.x/r,y:e.y/r}},rS=(t,e)=>e.map(e=>{let{id:r,data:n}=e,o=t.getNode(r);return Object.assign(Object.assign({},o),{data:Object.assign(Object.assign({},o.data),{x:n.x,y:n.y,z:n.z})})}),rz=Object.prototype.toString;function rI(t){let e=rz.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function rD(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(rI(t)){if(0===t.length)throw TypeError("input must not be empty")}else throw TypeError("input must be an array");if(void 0!==r.output){if(!rI(r.output))throw TypeError("output option must be an array if specified");e=r.output}else e=Array(t.length);var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!rI(t))throw TypeError("input must be an array");if(0===t.length)throw TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,o=e.toIndex,i=void 0===o?t.length:o;if(n<0||n>=t.length||!Number.isInteger(n))throw Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>t.length||!Number.isInteger(i))throw Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[n],s=n+1;s<i;s++)t[s]<a&&(a=t[s]);return a}(t),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!rI(t))throw TypeError("input must be an array");if(0===t.length)throw TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,o=e.toIndex,i=void 0===o?t.length:o;if(n<0||n>=t.length||!Number.isInteger(n))throw Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>t.length||!Number.isInteger(i))throw Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[n],s=n+1;s<i;s++)t[s]>a&&(a=t[s]);return a}(t);if(n===o)throw RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=r.min,a=void 0===i?r.autoMinMax?n:0:i,s=r.max,u=void 0===s?r.autoMinMax?o:1:s;if(a>=u)throw RangeError("min option must be smaller than max option");for(var d=(u-a)/(o-n),l=0;l<t.length;l++)e[l]=(t[l]-n)*d+a;return e}let rR=" ".repeat(2),rP=" ".repeat(4);function rT(t,e={}){let{maxRows:r=15,maxColumns:n=10,maxNumSize:o=8,padMinus:i="auto"}=e;return`${t.constructor.name} {
${rR}[
${rP}${function(t,e,r,n,o){let{rows:i,columns:a}=t,s=Math.min(i,e),u=Math.min(a,r),d=[];if("auto"===o){o=!1;e:for(let e=0;e<s;e++)for(let r=0;r<u;r++)if(0>t.get(e,r)){o=!0;break e}}for(let e=0;e<s;e++){let r=[];for(let i=0;i<u;i++){var l,h;r.push((l=t.get(e,i),h=o,(l>=0&&h?` ${rL(l,n-1)}`:rL(l,n)).padEnd(n)))}d.push(`${r.join(" ")}`)}return u!==a&&(d[d.length-1]+=` ... ${a-r} more columns`),s!==i&&d.push(`... ${i-e} more rows`),d.join(`
${rP}`)}(t,r,n,o,i)}
${rR}]
${rR}rows: ${t.rows}
${rR}columns: ${t.columns}
}`}function rL(t,e){let r=t.toString();if(r.length<=e)return r;let n=t.toFixed(e);if(n.length>e&&(n=t.toFixed(Math.max(0,e-(n.length-e)))),n.length<=e&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let o=t.toExponential(e);return o.length>e&&(o=t.toExponential(Math.max(0,e-(o.length-e)))),o.slice(0)}function rC(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw RangeError("Row index out of range")}function rF(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw RangeError("Column index out of range")}function rq(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw RangeError("vector size must be the same as the number of columns");return e}function rB(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw RangeError("vector size must be the same as the number of rows");return e}function rV(t,e,r,n,o){if(5!=arguments.length)throw RangeError("expected 4 arguments");if(rG("startRow",e),rG("endRow",r),rG("startColumn",n),rG("endColumn",o),e>r||n>o||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||o<0||o>=t.columns)throw RangeError("Submatrix indices are out of range")}function rU(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function rG(t,e){if("number"!=typeof e)throw TypeError(`${t} must be a number`)}function rW(t){if(t.isEmpty())throw Error("Empty matrix has no elements to index")}class rH{static from1DArray(t,e,r){if(t*e!==r.length)throw RangeError("data length does not match given dimensions");let n=new rX(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)n.set(o,t,r[o*e+t]);return n}static rowVector(t){let e=new rX(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new rX(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new rX(t,e)}static ones(t,e){return new rX(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw TypeError("options must be an object");let{random:n=Math.random}=r,o=new rX(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)o.set(r,t,n());return o}static randInt(t,e,r={}){if("object"!=typeof r)throw TypeError("options must be an object");let{min:n=0,max:o=1e3,random:i=Math.random}=r;if(!Number.isInteger(n))throw TypeError("min must be an integer");if(!Number.isInteger(o))throw TypeError("max must be an integer");if(n>=o)throw RangeError("min must be smaller than max");let a=o-n,s=new rX(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=n+Math.round(i()*a);s.set(r,t,e)}return s}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let n=Math.min(t,e),o=this.zeros(t,e);for(let t=0;t<n;t++)o.set(t,t,r);return o}static diag(t,e,r){let n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);let o=Math.min(n,e,r),i=this.zeros(e,r);for(let e=0;e<o;e++)i.set(e,e,t[e]);return i}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,o=new rX(r,n);for(let i=0;i<r;i++)for(let r=0;r<n;r++)o.set(i,r,Math.min(t.get(i,r),e.get(i,r)));return o}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,o=new this(r,n);for(let i=0;i<r;i++)for(let r=0;r<n;r++)o.set(i,r,Math.max(t.get(i,r),e.get(i,r)));return o}static checkMatrix(t){return rH.isMatrix(t)?t:new rX(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}isEchelonForm(){let t=0,e=0,r=-1,n=!0,o=!1;for(;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,o=!1;for(;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let n=e;for(let o=e;o<t.rows;o++)t.get(o,r)>t.get(n,r)&&(n=o);if(0===t.get(n,r))r++;else{t.swapRows(e,n);let o=t.get(e,r);for(let n=r;n<t.columns;n++)t.set(e,n,t.get(e,n)/o);for(let n=e+1;n<t.rows;n++){let o=t.get(n,r)/t.get(e,r);t.set(n,r,0);for(let i=r+1;i<t.columns;i++)t.set(n,i,t.get(n,i)-t.get(e,i)*o)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;for(;n>=0;)if(0===t.maxRow(n))n--;else{let o=0,i=!1;for(;o<r&&!1===i;)1===t.get(n,o)?i=!0:o++;for(let r=0;r<n;r++){let i=t.get(r,o);for(let a=o;a<e;a++){let e=t.get(r,a)-i*t.get(n,a);t.set(r,a,e)}}n--}return t}set(){throw Error("set method is unimplemented")}get(){throw Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw TypeError("options must be an object");let{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw TypeError("columns must be a positive integer");let n=new rX(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)n.setSubMatrix(this,this.rows*t,this.columns*e);return n}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){rC(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return rX.rowVector(this.getRow(t))}setRow(t,e){rC(this,t),e=rq(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){rC(this,t),rC(this,e);for(let r=0;r<this.columns;r++){let n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){rF(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return rX.columnVector(this.getColumn(t))}setColumn(t,e){rF(this,t),e=rB(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){rF(this,t),rF(this,e);for(let r=0;r<this.rows;r++){let n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=rq(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=rq(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=rq(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=rq(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=rB(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=rB(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=rB(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=rB(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){rC(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){rF(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{let t=Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[e]&&(t[e]=this.get(e,r));return t}case"column":{let t=Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}default:throw Error(`invalid option: ${t}`)}}maxIndex(){rW(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{let t=Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[e]&&(t[e]=this.get(e,r));return t}case"column":{let t=Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}default:throw Error(`invalid option: ${t}`)}}minIndex(){rW(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){if(rC(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){rC(this,t),rW(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){if(rC(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){rC(this,t),rW(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){if(rF(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){rF(this,t),rW(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){if(rF(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){rF(this,t),rW(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){rH.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw RangeError("vectors do not have the same size");let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=rX.checkMatrix(t);let e=this.rows,r=this.columns,n=t.columns,o=new rX(e,n),i=new Float64Array(r);for(let a=0;a<n;a++){for(let e=0;e<r;e++)i[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let n=0;n<r;n++)e+=this.get(t,n)*i[n];o.set(t,a,e)}}return o}mpow(t){if(!this.isSquare())throw RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw RangeError("Exponent must be a non-negative integer");let e=rX.eye(this.rows),r=this;for(let n=t;n>1;n/=2)(1&n)!=0&&(e=e.mmul(r)),r=r.mmul(r);return e}strassen2x2(t){t=rX.checkMatrix(t);let e=new rX(2,2),r=this.get(0,0),n=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),d=t.get(1,1),l=(r+u)*(n+d),h=(a+u)*n,c=r*(i-d),f=u*(s-n),g=(r+o)*d;return e.set(0,0,l+f-g+(o-u)*(s+d)),e.set(0,1,c+g),e.set(1,0,h+f),e.set(1,1,l-h+c+(a-r)*(n+i)),e}strassen3x3(t){t=rX.checkMatrix(t);let e=new rX(3,3),r=this.get(0,0),n=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),d=this.get(2,1),l=this.get(2,2),h=t.get(0,0),c=t.get(0,1),f=t.get(0,2),g=t.get(1,0),p=t.get(1,1),v=t.get(1,2),y=t.get(2,0),m=t.get(2,1),x=t.get(2,2),w=(r-i)*(-c+p),b=(-r+i+a)*(h-c+p),E=(i+a)*(-h+c),N=r*h,M=(-r+u+d)*(h-f+v),_=(-r+u)*(f-v),k=(u+d)*(-h+f),j=(-o+d+l)*(p+y-m),O=(o-l)*(p-m),A=o*y,S=(d+l)*(-y+m),z=(-o+a+s)*(v+y-x),I=(o-s)*(v-x),D=(a+s)*(-y+x);return e.set(0,0,N+A+n*g),e.set(0,1,(r+n+o-i-a-d-l)*p+b+E+N+j+A+S),e.set(0,2,N+M+k+(r+n+o-a-s-u-d)*v+A+z+D),e.set(1,0,w+a*(-h+c+g-p-v-y+x)+b+N+A+z+I),e.set(1,1,w+b+E+N+s*m),e.set(1,2,A+z+I+D+i*f),e.set(2,0,N+M+_+d*(-h+f+g-p-v-y+m)+j+O+A),e.set(2,1,j+O+A+S+u*c),e.set(2,2,N+M+_+k+l*x),e}mmulStrassen(t){t=rX.checkMatrix(t);let e=this.clone(),r=e.rows,n=e.columns,o=t.rows,i=t.columns;function a(t,e,r){let n=t.rows,o=t.columns;return n===e&&o===r?t:rH.zeros(e,r).setSubMatrix(t,0,0)}n!==o&&console.warn(`Multiplying ${r} x ${n} and ${o} x ${i} matrix: dimensions do not match.`);let s=Math.max(r,o),u=Math.max(n,i);return function t(e,r,n,o){if(n<=512||o<=512)return e.mmul(r);n%2==1&&o%2==1?(e=a(e,n+1,o+1),r=a(r,n+1,o+1)):n%2==1?(e=a(e,n+1,o),r=a(r,n+1,o)):o%2==1&&(e=a(e,n,o+1),r=a(r,n,o+1));let i=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),u=e.subMatrix(0,i-1,0,s-1),d=r.subMatrix(0,i-1,0,s-1),l=e.subMatrix(0,i-1,s,e.columns-1),h=r.subMatrix(0,i-1,s,r.columns-1),c=e.subMatrix(i,e.rows-1,0,s-1),f=r.subMatrix(i,r.rows-1,0,s-1),g=e.subMatrix(i,e.rows-1,s,e.columns-1),p=r.subMatrix(i,r.rows-1,s,r.columns-1),v=t(rH.add(u,g),rH.add(d,p),i,s),y=t(rH.add(c,g),d,i,s),m=t(u,rH.sub(h,p),i,s),x=t(g,rH.sub(f,d),i,s),w=t(rH.add(u,l),p,i,s),b=t(rH.sub(c,u),rH.add(d,h),i,s),E=t(rH.sub(l,g),rH.add(f,p),i,s),N=rH.add(v,x);N.sub(w),N.add(E);let M=rH.add(m,w),_=rH.add(y,x),k=rH.sub(v,y);k.add(m),k.add(b);let j=rH.zeros(2*N.rows,2*N.columns);return(j=(j=(j=(j=j.setSubMatrix(N,0,0)).setSubMatrix(M,N.rows,0)).setSubMatrix(_,0,N.columns)).setSubMatrix(k,N.rows,N.columns)).subMatrix(0,n-1,0,o-1)}(e=a(e,s,u),t=a(t,s,u),s,u)}scaleRows(t={}){if("object"!=typeof t)throw TypeError("options must be an object");let{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw TypeError("min must be a number");if(!Number.isFinite(r))throw TypeError("max must be a number");if(e>=r)throw RangeError("min must be smaller than max");let n=new rX(this.rows,this.columns);for(let t=0;t<this.rows;t++){let o=this.getRow(t);o.length>0&&rD(o,{min:e,max:r,output:o}),n.setRow(t,o)}return n}scaleColumns(t={}){if("object"!=typeof t)throw TypeError("options must be an object");let{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw TypeError("min must be a number");if(!Number.isFinite(r))throw TypeError("max must be a number");if(e>=r)throw RangeError("min must be smaller than max");let n=new rX(this.rows,this.columns);for(let t=0;t<this.columns;t++){let o=this.getColumn(t);o.length&&rD(o,{min:e,max:r,output:o}),n.setColumn(t,o)}return n}flipRows(){let t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),n=this.get(e,this.columns-1-r);this.set(e,r,n),this.set(e,this.columns-1-r,t)}return this}flipColumns(){let t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),n=this.get(this.rows-1-r,e);this.set(r,e,n),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=rX.checkMatrix(t);let e=this.rows,r=this.columns,n=t.rows,o=t.columns,i=new rX(e*n,r*o);for(let a=0;a<e;a++)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let s=0;s<o;s++)i.set(n*a+r,o*e+s,this.get(a,e)*t.get(r,s));return i}kroneckerSum(t){if(t=rX.checkMatrix(t),!this.isSquare()||!t.isSquare())throw Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,n=this.kroneckerProduct(rX.eye(r,r)),o=rX.eye(e,e).kroneckerProduct(t);return n.add(o)}transpose(){let t=new rX(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=rJ){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=rJ){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){rV(this,t,e,r,n);let o=new rX(e-t+1,n-r+1);for(let i=t;i<=e;i++)for(let e=r;e<=n;e++)o.set(i-t,e-r,this.get(i,e));return o}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw RangeError("Argument out of range");let n=new rX(t.length,r-e+1);for(let o=0;o<t.length;o++)for(let i=e;i<=r;i++){if(t[o]<0||t[o]>=this.rows)throw RangeError(`Row index out of range: ${t[o]}`);n.set(o,i-e,this.get(t[o],i))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw RangeError("Argument out of range");let n=new rX(r-e+1,t.length);for(let o=0;o<t.length;o++)for(let i=e;i<=r;i++){if(t[o]<0||t[o]>=this.columns)throw RangeError(`Column index out of range: ${t[o]}`);n.set(i-e,o,this.get(i,t[o]))}return n}setSubMatrix(t,e,r){if((t=rX.checkMatrix(t)).isEmpty())return this;let n=e+t.rows-1,o=r+t.columns-1;rV(this,e,n,r,o);for(let n=0;n<t.rows;n++)for(let o=0;o<t.columns;o++)this.set(e+n,r+o,t.get(n,o));return this}selection(t,e){!function(t,e){if(!rI(e))throw TypeError("row indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.rows)throw RangeError("row indices are out of range")}(this,t),function(t,e){if(!rI(e))throw TypeError("column indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.columns)throw RangeError("column indices are out of range")}(this,e);let r=new rX(t.length,e.length);for(let n=0;n<t.length;n++){let o=t[n];for(let t=0;t<e.length;t++){let i=e[t];r.set(n,t,this.get(o,i))}}return r}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){return this.constructor.copy(this,new rX(this.rows,this.columns))}static copy(t,e){for(let[r,n,o]of t.entries())e.set(r,n,o);return e}sum(t){switch(t){case"row":return function(t){let e=rU(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){let e=rU(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=rU(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){let e=rU(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw Error(`invalid option: ${t}`)}}mean(t){let e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw TypeError("options must be an object");let{unbiased:r=!0,mean:n=this.mean(t)}=e;if("boolean"!=typeof r)throw TypeError("unbiased must be a boolean");switch(t){case"row":if(!rI(n))throw TypeError("mean must be an array");return function(t,e,r){let n=t.rows,o=t.columns,i=[];for(let a=0;a<n;a++){let n=0,s=0,u=0;for(let e=0;e<o;e++)n+=u=t.get(a,e)-r[a],s+=u*u;e?i.push((s-n*n/o)/(o-1)):i.push((s-n*n/o)/o)}return i}(this,r,n);case"column":if(!rI(n))throw TypeError("mean must be an array");return function(t,e,r){let n=t.rows,o=t.columns,i=[];for(let a=0;a<o;a++){let o=0,s=0,u=0;for(let e=0;e<n;e++)o+=u=t.get(e,a)-r[a],s+=u*u;e?i.push((s-o*o/n)/(n-1)):i.push((s-o*o/n)/n)}return i}(this,r,n);case void 0:if("number"!=typeof n)throw TypeError("mean must be a number");return function(t,e,r){let n=t.rows,o=t.columns,i=n*o,a=0,s=0,u=0;for(let e=0;e<n;e++)for(let n=0;n<o;n++)a+=u=t.get(e,n)-r,s+=u*u;return e?(s-a*a/i)/(i-1):(s-a*a/i)/i}(this,r,n);default:throw Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);let r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw TypeError("options must be an object");let{center:r=this.mean(t)}=e;switch(t){case"row":if(!rI(r))throw TypeError("center must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,r),this;case"column":if(!rI(r))throw TypeError("center must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,r),this;case void 0:if("number"!=typeof r)throw TypeError("center must be a number");return!function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,r),this;default:throw Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){let e=[];for(let r=0;r<t.rows;r++){let n=0;for(let e=0;e<t.columns;e++)n+=t.get(r,e)**2/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!rI(r))throw TypeError("scale must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){let e=[];for(let r=0;r<t.columns;r++){let n=0;for(let e=0;e<t.rows;e++)n+=t.get(e,r)**2/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!rI(r))throw TypeError("scale must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){let e=t.size-1,r=0;for(let n=0;n<t.columns;n++)for(let o=0;o<t.rows;o++)r+=t.get(o,n)**2/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw TypeError("scale must be a number");return!function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw Error(`invalid option: ${t}`)}}toString(t){return rT(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}function rJ(t,e){return t-e}rH.prototype.klass="Matrix","undefined"!=typeof Symbol&&(rH.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return rT(this)}),rH.random=rH.rand,rH.randomInt=rH.randInt,rH.diagonal=rH.diag,rH.prototype.diagonal=rH.prototype.diag,rH.identity=rH.eye,rH.prototype.negate=rH.prototype.neg,rH.prototype.tensorProduct=rH.prototype.kroneckerProduct;class rX extends rH{data;#t(t,e){if(this.data=[],Number.isInteger(e)&&e>=0)for(let r=0;r<t;r++)this.data.push(new Float64Array(e));else throw TypeError("nColumns must be a positive integer");this.rows=t,this.columns=e}constructor(t,e){if(super(),rX.isMatrix(t))this.#t(t.rows,t.columns),rX.copy(t,this);else if(Number.isInteger(t)&&t>=0)this.#t(t,e);else if(rI(t)){let r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<t;n++){if(r[n].length!==e)throw RangeError("Inconsistent array dimensions");if(!r[n].every(t=>"number"==typeof t))throw TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[n]))}this.rows=t,this.columns=e}else throw TypeError("First argument must be a positive number or an array")}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return rC(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),rC(this,t,!0),e=Float64Array.from(rq(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){rF(this,t);for(let e=0;e<this.rows;e++){let r=new Float64Array(this.columns-1);for(let n=0;n<t;n++)r[n]=this.data[e][n];for(let n=t+1;n<this.columns;n++)r[n-1]=this.data[e][n];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),rF(this,t,!0),e=rB(this,e);for(let r=0;r<this.rows;r++){let n=new Float64Array(this.columns+1),o=0;for(;o<t;o++)n[o]=this.data[r][o];for(n[o++]=e[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}}rH.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},rH.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},rH.prototype.addM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},rH.add=function(t,e){return new rX(t).add(e)},rH.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},rH.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},rH.prototype.subM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},rH.sub=function(t,e){return new rX(t).sub(e)},rH.prototype.subtract=rH.prototype.sub,rH.prototype.subtractS=rH.prototype.subS,rH.prototype.subtractM=rH.prototype.subM,rH.subtract=rH.sub,rH.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},rH.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},rH.prototype.mulM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},rH.mul=function(t,e){return new rX(t).mul(e)},rH.prototype.multiply=rH.prototype.mul,rH.prototype.multiplyS=rH.prototype.mulS,rH.prototype.multiplyM=rH.prototype.mulM,rH.multiply=rH.mul,rH.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},rH.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},rH.prototype.divM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},rH.div=function(t,e){return new rX(t).div(e)},rH.prototype.divide=rH.prototype.div,rH.prototype.divideS=rH.prototype.divS,rH.prototype.divideM=rH.prototype.divM,rH.divide=rH.div,rH.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},rH.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},rH.prototype.modM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},rH.mod=function(t,e){return new rX(t).mod(e)},rH.prototype.modulus=rH.prototype.mod,rH.prototype.modulusS=rH.prototype.modS,rH.prototype.modulusM=rH.prototype.modM,rH.modulus=rH.mod,rH.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},rH.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},rH.prototype.andM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},rH.and=function(t,e){return new rX(t).and(e)},rH.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},rH.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},rH.prototype.orM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},rH.or=function(t,e){return new rX(t).or(e)},rH.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},rH.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},rH.prototype.xorM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},rH.xor=function(t,e){return new rX(t).xor(e)},rH.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},rH.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},rH.prototype.leftShiftM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},rH.leftShift=function(t,e){return new rX(t).leftShift(e)},rH.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},rH.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},rH.prototype.signPropagatingRightShiftM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},rH.signPropagatingRightShift=function(t,e){return new rX(t).signPropagatingRightShift(e)},rH.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},rH.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},rH.prototype.rightShiftM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},rH.rightShift=function(t,e){return new rX(t).rightShift(e)},rH.prototype.zeroFillRightShift=rH.prototype.rightShift,rH.prototype.zeroFillRightShiftS=rH.prototype.rightShiftS,rH.prototype.zeroFillRightShiftM=rH.prototype.rightShiftM,rH.zeroFillRightShift=rH.rightShift,rH.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},rH.not=function(t){return new rX(t).not()},rH.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},rH.abs=function(t){return new rX(t).abs()},rH.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},rH.acos=function(t){return new rX(t).acos()},rH.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},rH.acosh=function(t){return new rX(t).acosh()},rH.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},rH.asin=function(t){return new rX(t).asin()},rH.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},rH.asinh=function(t){return new rX(t).asinh()},rH.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},rH.atan=function(t){return new rX(t).atan()},rH.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},rH.atanh=function(t){return new rX(t).atanh()},rH.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},rH.cbrt=function(t){return new rX(t).cbrt()},rH.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},rH.ceil=function(t){return new rX(t).ceil()},rH.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},rH.clz32=function(t){return new rX(t).clz32()},rH.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},rH.cos=function(t){return new rX(t).cos()},rH.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},rH.cosh=function(t){return new rX(t).cosh()},rH.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},rH.exp=function(t){return new rX(t).exp()},rH.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},rH.expm1=function(t){return new rX(t).expm1()},rH.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},rH.floor=function(t){return new rX(t).floor()},rH.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},rH.fround=function(t){return new rX(t).fround()},rH.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},rH.log=function(t){return new rX(t).log()},rH.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},rH.log1p=function(t){return new rX(t).log1p()},rH.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},rH.log10=function(t){return new rX(t).log10()},rH.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},rH.log2=function(t){return new rX(t).log2()},rH.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},rH.round=function(t){return new rX(t).round()},rH.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},rH.sign=function(t){return new rX(t).sign()},rH.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},rH.sin=function(t){return new rX(t).sin()},rH.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},rH.sinh=function(t){return new rX(t).sinh()},rH.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},rH.sqrt=function(t){return new rX(t).sqrt()},rH.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},rH.tan=function(t){return new rX(t).tan()},rH.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},rH.tanh=function(t){return new rX(t).tanh()},rH.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},rH.trunc=function(t){return new rX(t).trunc()},rH.pow=function(t,e){return new rX(t).pow(e)},rH.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},rH.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)**t);return this},rH.prototype.powM=function(t){if(t=rX.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)**t.get(e,r));return this};class r$ extends rH{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}function rK(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class rY{constructor(t,e={}){let r;if((t=r$.checkMatrix(t)).isEmpty())throw Error("Matrix must be non-empty");let n=t.rows,o=t.columns,{computeLeftSingularVectors:i=!0,computeRightSingularVectors:a=!0,autoTranspose:s=!1}=e,u=!!i,d=!!a,l=!1;if(n<o){if(s){n=(r=t.transpose()).rows,o=r.columns,l=!0;let e=u;u=d,d=e}else r=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose")}else r=t.clone();let h=Math.min(n,o),c=Math.min(n+1,o),f=new Float64Array(c),g=new rX(n,h),p=new rX(o,o),v=new Float64Array(o),y=new Float64Array(n),m=new Float64Array(c);for(let t=0;t<c;t++)m[t]=t;let x=Math.min(n-1,o),w=Math.max(0,Math.min(o-2,n)),b=Math.max(x,w);for(let t=0;t<b;t++){if(t<x){f[t]=0;for(let e=t;e<n;e++)f[t]=rK(f[t],r.get(e,t));if(0!==f[t]){0>r.get(t,t)&&(f[t]=-f[t]);for(let e=t;e<n;e++)r.set(e,t,r.get(e,t)/f[t]);r.set(t,t,r.get(t,t)+1)}f[t]=-f[t]}for(let e=t+1;e<o;e++){if(t<x&&0!==f[t]){let o=0;for(let i=t;i<n;i++)o+=r.get(i,t)*r.get(i,e);o=-o/r.get(t,t);for(let i=t;i<n;i++)r.set(i,e,r.get(i,e)+o*r.get(i,t))}v[e]=r.get(t,e)}if(u&&t<x)for(let e=t;e<n;e++)g.set(e,t,r.get(e,t));if(t<w){v[t]=0;for(let e=t+1;e<o;e++)v[t]=rK(v[t],v[e]);if(0!==v[t]){v[t+1]<0&&(v[t]=0-v[t]);for(let e=t+1;e<o;e++)v[e]/=v[t];v[t+1]+=1}if(v[t]=-v[t],t+1<n&&0!==v[t]){for(let e=t+1;e<n;e++)y[e]=0;for(let e=t+1;e<n;e++)for(let n=t+1;n<o;n++)y[e]+=v[n]*r.get(e,n);for(let e=t+1;e<o;e++){let o=-v[e]/v[t+1];for(let i=t+1;i<n;i++)r.set(i,e,r.get(i,e)+o*y[i])}}if(d)for(let e=t+1;e<o;e++)p.set(e,t,v[e])}}let E=Math.min(o,n+1);if(x<o&&(f[x]=r.get(x,x)),n<E&&(f[E-1]=0),w+1<E&&(v[w]=r.get(w,E-1)),v[E-1]=0,u){for(let t=x;t<h;t++){for(let e=0;e<n;e++)g.set(e,t,0);g.set(t,t,1)}for(let t=x-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<h;e++){let r=0;for(let o=t;o<n;o++)r+=g.get(o,t)*g.get(o,e);r=-r/g.get(t,t);for(let o=t;o<n;o++)g.set(o,e,g.get(o,e)+r*g.get(o,t))}for(let e=t;e<n;e++)g.set(e,t,-g.get(e,t));g.set(t,t,1+g.get(t,t));for(let e=0;e<t-1;e++)g.set(e,t,0)}else{for(let e=0;e<n;e++)g.set(e,t,0);g.set(t,t,1)}}if(d)for(let t=o-1;t>=0;t--){if(t<w&&0!==v[t])for(let e=t+1;e<o;e++){let r=0;for(let n=t+1;n<o;n++)r+=p.get(n,t)*p.get(n,e);r=-r/p.get(t+1,t);for(let n=t+1;n<o;n++)p.set(n,e,p.get(n,e)+r*p.get(n,t))}for(let e=0;e<o;e++)p.set(e,t,0);p.set(t,t,1)}let N=E-1,M=Number.EPSILON;for(;E>0;){let t,e;for(t=E-2;t>=-1&&-1!==t;t--){let e=Number.MIN_VALUE+M*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(v[t])<=e||Number.isNaN(v[t])){v[t]=0;break}}if(t===E-2)e=4;else{let r;for(r=E-1;r>=t&&r!==t;r--){let e=(r!==E?Math.abs(v[r]):0)+(r!==t+1?Math.abs(v[r-1]):0);if(Math.abs(f[r])<=M*e){f[r]=0;break}}r===t?e=3:r===E-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=v[E-2];v[E-2]=0;for(let r=E-2;r>=t;r--){let n=rK(f[r],e),i=f[r]/n,a=e/n;if(f[r]=n,r!==t&&(e=-a*v[r-1],v[r-1]=i*v[r-1]),d)for(let t=0;t<o;t++)n=i*p.get(t,r)+a*p.get(t,E-1),p.set(t,E-1,-a*p.get(t,r)+i*p.get(t,E-1)),p.set(t,r,n)}break}case 2:{let e=v[t-1];v[t-1]=0;for(let r=t;r<E;r++){let o=rK(f[r],e),i=f[r]/o,a=e/o;if(f[r]=o,e=-a*v[r],v[r]=i*v[r],u)for(let e=0;e<n;e++)o=i*g.get(e,r)+a*g.get(e,t-1),g.set(e,t-1,-a*g.get(e,r)+i*g.get(e,t-1)),g.set(e,r,o)}break}case 3:{let e=Math.max(Math.abs(f[E-1]),Math.abs(f[E-2]),Math.abs(v[E-2]),Math.abs(f[t]),Math.abs(v[t])),r=f[E-1]/e,i=f[E-2]/e,a=v[E-2]/e,s=f[t]/e,l=v[t]/e,h=((i+r)*(i-r)+a*a)/2,c=r*a*(r*a),y=0;(0!==h||0!==c)&&(y=h<0?0-Math.sqrt(h*h+c):Math.sqrt(h*h+c),y=c/(h+y));let m=(s+r)*(s-r)+y,x=s*l;for(let e=t;e<E-1;e++){let r=rK(m,x);0===r&&(r=Number.MIN_VALUE);let i=m/r,a=x/r;if(e!==t&&(v[e-1]=r),m=i*f[e]+a*v[e],v[e]=i*v[e]-a*f[e],x=a*f[e+1],f[e+1]=i*f[e+1],d)for(let t=0;t<o;t++)r=i*p.get(t,e)+a*p.get(t,e+1),p.set(t,e+1,-a*p.get(t,e)+i*p.get(t,e+1)),p.set(t,e,r);if(0===(r=rK(m,x))&&(r=Number.MIN_VALUE),i=m/r,a=x/r,f[e]=r,m=i*v[e]+a*f[e+1],f[e+1]=-a*v[e]+i*f[e+1],x=a*v[e+1],v[e+1]=i*v[e+1],u&&e<n-1)for(let t=0;t<n;t++)r=i*g.get(t,e)+a*g.get(t,e+1),g.set(t,e+1,-a*g.get(t,e)+i*g.get(t,e+1)),g.set(t,e,r)}v[E-2]=m;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,d))for(let e=0;e<=N;e++)p.set(e,t,-p.get(e,t));for(;t<N&&!(f[t]>=f[t+1]);){let e=f[t];if(f[t]=f[t+1],f[t+1]=e,d&&t<o-1)for(let r=0;r<o;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);if(u&&t<n-1)for(let r=0;r<n;r++)e=g.get(r,t+1),g.set(r,t+1,g.get(r,t)),g.set(r,t,e);t++}E--}}if(l){let t=p;p=g,g=t}this.m=n,this.n=o,this.s=f,this.U=g,this.V=p}solve(t){let e=this.threshold,r=this.s.length,n=rX.zeros(r,r);for(let t=0;t<r;t++)Math.abs(this.s[t])<=e?n.set(t,t,0):n.set(t,t,1/this.s[t]);let o=this.U,i=this.rightSingularVectors,a=i.mmul(n),s=i.rows,u=o.rows,d=rX.zeros(s,u);for(let t=0;t<s;t++)for(let e=0;e<u;e++){let n=0;for(let i=0;i<r;i++)n+=a.get(t,i)*o.get(e,i);d.set(t,e,n)}return d.mmul(t)}solveForDiagonal(t){return this.solve(rX.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,n=t.columns,o=new rX(r,this.s.length);for(let i=0;i<r;i++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e&&o.set(i,r,t.get(i,r)/this.s[r]);let i=this.U,a=i.rows,s=i.columns,u=new rX(r,a);for(let t=0;t<r;t++)for(let e=0;e<a;e++){let r=0;for(let n=0;n<s;n++)r+=o.get(t,n)*i.get(e,n);u.set(t,e,r)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let n=0,o=r.length;n<o;n++)r[n]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return rX.diag(this.s)}}let rZ=t=>{let e=[],r=t.length;for(let n=0;n<r;n+=1){e[n]=[];for(let o=0;o<r;o+=1)n===o?e[n][o]=0:0!==t[n][o]&&t[n][o]?e[n][o]=t[n][o]:e[n][o]=1/0}for(let t=0;t<r;t+=1)for(let n=0;n<r;n+=1)for(let o=0;o<r;o+=1)e[n][o]>e[n][t]+e[t][o]&&(e[n][o]=e[n][t]+e[t][o]);return e},rQ=(t,e)=>{let{nodes:r,edges:n}=t,o=[],i={};if(!r)throw Error("invalid nodes data!");return r&&r.forEach((t,e)=>{i[t.id]=e,o.push([])}),null==n||n.forEach(t=>{let{source:r,target:n}=t,a=i[r],s=i[n];void 0===a||void 0===s||(o[a][s]=1,e||(o[s][a]=1))}),o},r0=(t,e)=>{let r=[];return t.forEach(t=>{let n=[];t.forEach(t=>{n.push(t*e)}),r.push(n)}),r},r1=t=>{let e=1/0,r=1/0,n=-1/0,o=-1/0;return t.forEach(t=>{let i=t.data.size;rr(i)?1===i.length&&(i=[i[0],i[0]]):z(i)?i=[i,i]:(void 0===i||isNaN(i))&&(i=[30,30]);let a=[i[0]/2,i[1]/2],s=t.data.x-a[0],u=t.data.x+a[0],d=t.data.y-a[1],l=t.data.y+a[1];e>s&&(e=s),r>d&&(r=d),n<u&&(n=u),o<l&&(o=l)}),{minX:e,minY:r,maxX:n,maxY:o}},r2=(t,e)=>Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),r3=(t,e,r,n="TB",o,i={})=>{if(!(null==e?void 0:e.length))return;let{stopBranchFn:a,stopAllFn:s}=i;for(let u=0;u<e.length;u++){let d=e[u];if(t.hasNode(d.id)&&(null==a||!a(d))){if(null==s?void 0:s(d))return;"TB"===n&&r(d),r3(t,t.getChildren(d.id,o),r,n,o,i),"TB"!==n&&r(d)}}},r6={center:[0,0],linkDistance:50};class r8{constructor(t={}){this.options=t,this.id="mds",this.options=Object.assign(Object.assign({},r6),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,t,e)})}genericMDSLayout(t,e,r){return a(this,void 0,void 0,function*(){let{center:n=[0,0],linkDistance:o=50}=Object.assign(Object.assign({},this.options),r),i=e.getAllNodes(),a=e.getAllEdges();if(!(null==i?void 0:i.length)||1===i.length)return e4(e,t,n);let s=rZ(rQ({nodes:i,edges:a},!1));r5(s);let u=r4(r0(s,o)),d=[];return u.forEach((t,e)=>{let r=eZ(i[e]);r.data.x=t[0]+n[0],r.data.y=t[1]+n[1],d.push(r)}),t&&d.forEach(t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})),{nodes:d,edges:a}})}}let r5=t=>{let e=-999999;t.forEach(t=>{t.forEach(t=>{t!==1/0&&e<t&&(e=t)})}),t.forEach((r,n)=>{r.forEach((r,o)=>{r===1/0&&(t[n][o]=e)})})},r4=t=>{let e=rX.mul(rX.pow(t,2),-.5),r=e.mean("row"),n=e.mean("column"),o=e.mean();e.add(o).subRowVector(r).subColumnVector(n);let i=new rY(e),a=rX.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map(t=>rX.mul([t],[a]).toJSON()[0].splice(0,2))};function r9(t){return!!t.tick&&!!t.stop}let r7={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},nt={center:[0,0],comboPadding:10,treeKey:"combo"};function ne(t,e,r,n){var o;return a(this,void 0,void 0,function*(){return r9(t)?(t.execute(e,r),t.stop(),t.tick(null!==(o=r.iterations)&&void 0!==o?o:300)):n?yield t.assign(e,r):yield t.execute(e,r)})}var nr={}.toString,nn=function(t){if(!("object"==typeof t&&null!==t)||"[object Object]"!==nr.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},no=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)!function t(e,r,n,o){for(var i in n=n||0,o=o||5,r)if(function(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}(r,i)){var a=r[i];null!==a&&nn(a)?(nn(e[i])||(e[i]={}),n<o?t(e[i],a,n+1,o):e[i]=r[i]):t_(a)?(e[i]=[],e[i]=e[i].concat(a)):void 0!==a&&(e[i]=a)}}(t,e[n]);return t},ni=function(t,e){if(t){if(t_(t))for(var r=0,n=t.length;r<n&&!1!==e(t[r],r);r++);else if(e0(t)){for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}}},na=Object.prototype.hasOwnProperty,ns=function(t,e){if(null===t||!nn(t))return{};var r={};return ni(e,function(e){na.call(t,e)&&(r[e]=t[e])}),r};function nu(t,e){var r,n=1;function o(){var o,i,a=r.length,s=0,u=0;for(o=0;o<a;++o)s+=(i=r[o]).x,u+=i.y;for(s=(s/a-t)*n,u=(u/a-e)*n,o=0;o<a;++o)i=r[o],i.x-=s,i.y-=u}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(n=+t,o):n},o}function nd(t){return function(){return t}}function nl(t){return(t()-.5)*1e-6}function nh(t){return t.x+t.vx}function nc(t){return t.y+t.vy}function nf(t){var e,r,n,o=1,i=1;function a(){for(var t,a,u,d,l,h,c,f=e.length,g=0;g<i;++g)for(t=0,a=rd(e,nh,nc).visitAfter(s);t<f;++t)c=(h=r[(u=e[t]).index])*h,d=u.x+u.vx,l=u.y+u.vy,a.visit(p);function p(t,e,r,i,a){var s=t.data,f=t.r,g=h+f;if(s){if(s.index>u.index){var p=d-s.x-s.vx,v=l-s.y-s.vy,y=p*p+v*v;y<g*g&&(0===p&&(y+=(p=nl(n))*p),0===v&&(y+=(v=nl(n))*v),y=(g-(y=Math.sqrt(y)))/y*o,u.vx+=(p*=y)*(g=(f*=f)/(c+f)),u.vy+=(v*=y)*g,s.vx-=p*(g=1-g),s.vy-=v*g)}return}return e>d+g||i<d-g||r>l+g||a<l-g}}function s(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var n,o,i=e.length;for(n=0,r=Array(i);n<i;++n)r[(o=e[n]).index]=+t(o,n,e)}}return"function"!=typeof t&&(t=nd(null==t?1:+t)),a.initialize=function(t,r){e=t,n=r,u()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:nd(+e),u(),a):t},a}function ng(t){return t.index}function np(t,e){var r=t.get(e);if(!r)throw Error("node not found: "+e);return r}function nv(t){var e,r,n,o,i,a,s=ng,u=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},d=nd(30),l=1;function h(n){for(var o=0,s=t.length;o<l;++o)for(var u,d,h,c,f,g,p,v=0;v<s;++v)d=(u=t[v]).source,g=((g=Math.sqrt((c=(h=u.target).x+h.vx-d.x-d.vx||nl(a))*c+(f=h.y+h.vy-d.y-d.vy||nl(a))*f))-r[v])/g*n*e[v],c*=g,f*=g,h.vx-=c*(p=i[v]),h.vy-=f*p,d.vx+=c*(p=1-p),d.vy+=f*p}function c(){if(n){var a,u,d=n.length,l=t.length,h=new Map(n.map((t,e)=>[s(t,e,n),t]));for(a=0,o=Array(d);a<l;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=np(h,u.source)),"object"!=typeof u.target&&(u.target=np(h,u.target)),o[u.source.index]=(o[u.source.index]||0)+1,o[u.target.index]=(o[u.target.index]||0)+1;for(a=0,i=Array(l);a<l;++a)u=t[a],i[a]=o[u.source.index]/(o[u.source.index]+o[u.target.index]);e=Array(l),f(),r=Array(l),g()}}function f(){if(n)for(var r=0,o=t.length;r<o;++r)e[r]=+u(t[r],r,t)}function g(){if(n)for(var e=0,o=t.length;e<o;++e)r[e]=+d(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){n=t,a=e,c()},h.links=function(e){return arguments.length?(t=e,c(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(l=+t,h):l},h.strength=function(t){return arguments.length?(u="function"==typeof t?t:nd(+t),f(),h):u},h.distance=function(t){return arguments.length?(d="function"==typeof t?t:nd(+t),g(),h):d},h}var ny={value:()=>{}};function nm(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw Error("illegal type: "+t);n[t]=[]}return new nx(n)}function nx(t){this._=t}function nw(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=ny,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}nx.prototype=nm.prototype={constructor:nx,on:function(t,e){var r,n=this._,o=(t+"").trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(t=o[i]).type)&&(r=function(t,e){for(var r,n=0,o=t.length;n<o;++n)if((r=t[n]).name===e)return r.value}(n[r],t.name)))return r;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++i<a;)if(r=(t=o[i]).type)n[r]=nw(n[r],t.name,e);else if(null==e)for(r in n)n[r]=nw(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new nx(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,o=Array(r),i=0;i<r;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(n=this._[t],i=0,r=n.length;i<r;++i)n[i].value.apply(e,o)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};var nb,nE,nN=0,nM=0,n_=0,nk=0,nj=0,nO=0,nA="object"==typeof performance&&performance.now?performance:Date,nS="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nz(){return nj||(nS(nI),nj=nA.now()+nO)}function nI(){nj=0}function nD(){this._call=this._time=this._next=null}function nR(t,e,r){var n=new nD;return n.restart(t,e,r),n}function nP(){nj=(nk=nA.now())+nO,nN=nM=0;try{!function(){nz(),++nN;for(var t,e=nb;e;)(t=nj-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nN}()}finally{nN=0,function(){for(var t,e,r=nb,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:nb=e);nE=t,nL(n)}(),nj=0}}function nT(){var t=nA.now(),e=t-nk;e>1e3&&(nO-=e,nk=t)}function nL(t){!nN&&(nM&&(nM=clearTimeout(nM)),t-nj>24?(t<1/0&&(nM=setTimeout(nP,t-nA.now()-nO)),n_&&(n_=clearInterval(n_))):(n_||(nk=nA.now(),n_=setInterval(nT,1e3)),nN=1,nS(nP)))}function nC(t){return t.x}function nF(t){return t.y}nD.prototype=nR.prototype={constructor:nD,restart:function(t,e,r){if("function"!=typeof t)throw TypeError("callback is not a function");r=(null==r?nz():+r)+(null==e?0:+e),this._next||nE===this||(nE?nE._next=this:nb=this,nE=this),this._call=t,this._time=r,nL()},stop:function(){this._call&&(this._call=null,this._time=1/0,nL())}};var nq=Math.PI*(3-Math.sqrt(5));function nB(){var t,e,r,n,o,i=nd(-30),a=1,s=1/0,u=.81;function d(r){var o,i=t.length,a=rd(t,nC,nF).visitAfter(h);for(n=r,o=0;o<i;++o)e=t[o],a.visit(c)}function l(){if(t){var e,r,n=t.length;for(e=0,o=Array(n);e<n;++e)o[(r=t[e]).index]=+i(r,e,t)}}function h(t){var e,r,n,i,a,s=0,u=0;if(t.length){for(n=i=a=0;a<4;++a)(e=t[a])&&(r=Math.abs(e.value))&&(s+=e.value,u+=r,n+=r*e.x,i+=r*e.y);t.x=n/u,t.y=i/u}else{(e=t).x=e.data.x,e.y=e.data.y;do s+=o[e.data.index];while(e=e.next)}t.value=s}function c(t,i,d,l){if(!t.value)return!0;var h=t.x-e.x,c=t.y-e.y,f=l-i,g=h*h+c*c;if(f*f/u<g)return g<s&&(0===h&&(g+=(h=nl(r))*h),0===c&&(g+=(c=nl(r))*c),g<a&&(g=Math.sqrt(a*g)),e.vx+=h*t.value*n/g,e.vy+=c*t.value*n/g),!0;if(!t.length&&!(g>=s)){(t.data!==e||t.next)&&(0===h&&(g+=(h=nl(r))*h),0===c&&(g+=(c=nl(r))*c),g<a&&(g=Math.sqrt(a*g)));do t.data!==e&&(f=o[t.data.index]*n/g,e.vx+=h*f,e.vy+=c*f);while(t=t.next)}}return d.initialize=function(e,n){t=e,r=n,l()},d.strength=function(t){return arguments.length?(i="function"==typeof t?t:nd(+t),l(),d):i},d.distanceMin=function(t){return arguments.length?(a=t*t,d):Math.sqrt(a)},d.distanceMax=function(t){return arguments.length?(s=t*t,d):Math.sqrt(s)},d.theta=function(t){return arguments.length?(u=t*t,d):Math.sqrt(u)},d}function nV(t,e,r){var n,o,i,a=nd(.1);function s(t){for(var a=0,s=n.length;a<s;++a){var u=n[a],d=u.x-e||1e-6,l=u.y-r||1e-6,h=Math.sqrt(d*d+l*l),c=(i[a]-h)*o[a]*t/h;u.vx+=d*c,u.vy+=l*c}}function u(){if(n){var e,r=n.length;for(e=0,o=Array(r),i=Array(r);e<r;++e)i[e]=+t(n[e],e,n),o[e]=isNaN(i[e])?0:+a(n[e],e,n)}}return"function"!=typeof t&&(t=nd(+t)),null==e&&(e=0),null==r&&(r=0),s.initialize=function(t){n=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:nd(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:nd(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(r=+t,s):r},s}function nU(t){var e,r,n,o=nd(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)o=e[i],o.vx+=(n[i]-o.x)*r[i]*t}function a(){if(e){var i,a=e.length;for(i=0,r=Array(a),n=Array(a);i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=nd(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:nd(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:nd(+e),a(),i):t},i}function nG(t){var e,r,n,o=nd(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)o=e[i],o.vy+=(n[i]-o.y)*r[i]*t}function a(){if(e){var i,a=e.length;for(i=0,r=Array(a),n=Array(a);i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=nd(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:nd(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:nd(+e),a(),i):t},i}class nW{constructor(t){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:nv,manyBody:nB,center:nu,collide:nf,radial:nV,x:nU,y:nG},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},no(this.options,t),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericLayout(!0,t,e)})}stop(){this.simulation.stop()}tick(t){return this.simulation.tick(t),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(t,e){let r=this.context.nodes.find(e=>e.id===t);r&&e.forEach((t,e)=>{("number"==typeof t||null===t)&&(r[["fx","fy","fz"][e]]=t)})}getOptions(t){var e,r;let n=no({},this.options,t);return n.collide&&(null===(e=n.collide)||void 0===e?void 0:e.radius)===void 0&&(n.collide=n.collide||{},n.collide.radius=null!==(r=n.nodeSize)&&void 0!==r?r:10),void 0===n.iterations&&(n.link&&void 0===n.link.iterations&&(n.iterations=n.link.iterations),n.collide&&void 0===n.collide.iterations&&(n.iterations=n.collide.iterations)),this.context.options=n,n}genericLayout(t,e,r){var n;return a(this,void 0,void 0,function*(){let o=this.getOptions(r),i=e.getAllNodes().map(({id:t,data:e})=>Object.assign(Object.assign({id:t},e),ns(e.data,this.config.inputNodeAttrs))),a=e.getAllEdges().map(t=>Object.assign({},t));Object.assign(this.context,{assign:t,nodes:i,edges:a,graph:e});let s=new Promise(t=>{this.resolver=t}),u=this.setSimulation(o);return u.nodes(i),null===(n=u.force("link"))||void 0===n||n.links(a),s})}getResult(){let{assign:t,nodes:e,edges:r,graph:n}=this.context,o=e.map(t=>({id:t.id,data:Object.assign(Object.assign({},t.data),ns(t,this.config.outputNodeAttrs))})),i=r.map(({id:t,source:e,target:r,data:n})=>({id:t,source:"object"==typeof e?e.id:e,target:"object"==typeof r?r.id:r,data:n}));return t&&o.forEach(t=>n.mergeNodeData(t.id,t.data)),{nodes:o,edges:i}}initSimulation(){return function(t){let e;var r,n=1,o=.001,i=1-Math.pow(.001,1/300),a=0,s=.6,u=new Map,d=nR(c),l=nm("tick","end"),h=(e=1,()=>(e=(1664525*e+0x3c6ef35f)%0x100000000)/0x100000000);function c(){f(),l.call("tick",r),n<o&&(d.stop(),l.call("end",r))}function f(e){var o,d,l=t.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(n+=(a-n)*i,u.forEach(function(t){t(n)}),o=0;o<l;++o)null==(d=t[o]).fx?d.x+=d.vx*=s:(d.x=d.fx,d.vx=0),null==d.fy?d.y+=d.vy*=s:(d.y=d.fy,d.vy=0);return r}function g(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+r),i=r*nq;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),g(),r={tick:f,restart:function(){return d.restart(c),r},stop:function(){return d.stop(),r},nodes:function(e){return arguments.length?(t=e,g(),u.forEach(p),r):t},alpha:function(t){return arguments.length?(n=+t,r):n},alphaMin:function(t){return arguments.length?(o=+t,r):o},alphaDecay:function(t){return arguments.length?(i=+t,r):+i},alphaTarget:function(t){return arguments.length?(a=+t,r):a},velocityDecay:function(t){return arguments.length?(s=1-t,r):1-s},randomSource:function(t){return arguments.length?(h=t,u.forEach(p),r):h},force:function(t,e){return arguments.length>1?(null==e?u.delete(t):u.set(t,p(e)),r):u.get(t)},find:function(e,r,n){var o,i,a,s,u,d=0,l=t.length;for(null==n?n=1/0:n*=n,d=0;d<l;++d)(a=(o=e-(s=t[d]).x)*o+(i=r-s.y)*i)<n&&(u=s,n=a);return u},on:function(t,e){return arguments.length>1?(l.on(t,e),r):l.on(t)}}}()}setSimulation(t){let e=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=e.on("tick",()=>{var e;return null===(e=t.onTick)||void 0===e?void 0:e.call(t,this.getResult())}).on("end",()=>{var t;return null===(t=this.resolver)||void 0===t?void 0:t.call(this,this.getResult())})),nH(e,this.config.simulationAttrs.map(e=>[e,t[e]])),Object.entries(this.forceMap).forEach(([r,n])=>{if(t[r]){let o=e.force(r);o||(o=n(),e.force(r,o)),nH(o,Object.entries(t[r]))}else e.force(r,null)}),e}}let nH=(t,e)=>e.reduce((e,[r,n])=>e[r]&&void 0!==n?e[r].call(t,n):e,t);function nJ(t,e,r){var n,o=1;function i(){var i,a,s=n.length,u=0,d=0,l=0;for(i=0;i<s;++i)u+=(a=n[i]).x||0,d+=a.y||0,l+=a.z||0;for(u=(u/s-t)*o,d=(d/s-e)*o,l=(l/s-r)*o,i=0;i<s;++i)a=n[i],u&&(a.x-=u),d&&(a.y-=d),l&&(a.z-=l)}return null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.z=function(t){return arguments.length?(r=+t,i):r},i.strength=function(t){return arguments.length?(o=+t,i):o},i}function nX(t,e,r){if(isNaN(e))return t;var n,o,i,a,s,u,d=t._root,l={data:r},h=t._x0,c=t._x1;if(!d)return t._root=l,t;for(;d.length;)if((a=e>=(o=(h+c)/2))?h=o:c=o,n=d,!(d=d[s=+a]))return n[s]=l,t;if(e===(i=+t._x.call(null,d.data)))return l.next=d,n?n[s]=l:t._root=l,t;do n=n?n[s]=[,,]:t._root=[,,],(a=e>=(o=(h+c)/2))?h=o:c=o;while((s=+a)==(u=+(i>=o)))return n[u]=d,n[s]=l,t}function n$(t,e,r){this.node=t,this.x0=e,this.x1=r}function nK(t){return t[0]}function nY(t,e){var r=new nZ(null==e?nK:e,NaN,NaN);return null==t?r:r.addAll(t)}function nZ(t,e,r){this._x=t,this._x0=e,this._x1=r,this._root=void 0}function nQ(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var n0=nY.prototype=nZ.prototype;function n1(t){return function(){return t}}function n2(t){return(t()-.5)*1e-6}function n3(t){return t.x+t.vx}function n6(t){return t.y+t.vy}function n8(t){return t.z+t.vz}function n5(t){var e,r,n,o,i=1,a=1;function s(){for(var t,s,d,l,h,c,f,g,p=e.length,v=0;v<a;++v)for(t=0,s=(1===r?nY(e,n3):2===r?rd(e,n3,n6):3===r?rm(e,n3,n6,n8):null).visitAfter(u);t<p;++t)g=(f=n[(d=e[t]).index])*f,l=d.x+d.vx,r>1&&(h=d.y+d.vy),r>2&&(c=d.z+d.vz),s.visit(y);function y(t,e,n,a,s,u,p){var v=[e,n,a,s,u,p],y=v[0],m=v[1],x=v[2],w=v[r],b=v[r+1],E=v[r+2],N=t.data,M=t.r,_=f+M;if(N){if(N.index>d.index){var k=l-N.x-N.vx,j=r>1?h-N.y-N.vy:0,O=r>2?c-N.z-N.vz:0,A=k*k+j*j+O*O;A<_*_&&(0===k&&(A+=(k=n2(o))*k),r>1&&0===j&&(A+=(j=n2(o))*j),r>2&&0===O&&(A+=(O=n2(o))*O),A=(_-(A=Math.sqrt(A)))/A*i,d.vx+=(k*=A)*(_=(M*=M)/(g+M)),r>1&&(d.vy+=(j*=A)*_),r>2&&(d.vz+=(O*=A)*_),N.vx-=k*(_=1-_),r>1&&(N.vy-=j*_),r>2&&(N.vz-=O*_))}return}return y>l+_||w<l-_||r>1&&(m>h+_||b<h-_)||r>2&&(x>c+_||E<c-_)}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<Math.pow(2,r);++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function d(){if(e){var r,o,i=e.length;for(r=0,n=Array(i);r<i;++r)n[(o=e[r]).index]=+t(o,r,e)}}return"function"!=typeof t&&(t=n1(null==t?1:+t)),s.initialize=function(t,...n){e=t,o=n.find(t=>"function"==typeof t)||Math.random,r=n.find(t=>[1,2,3].includes(t))||2,d()},s.iterations=function(t){return arguments.length?(a=+t,s):a},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:n1(+e),d(),s):t},s}function n4(t){return t.index}function n9(t,e){var r=t.get(e);if(!r)throw Error("node not found: "+e);return r}function n7(t){var e,r,n,o,i,a,s,u=n4,d=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=n1(30),h=1;function c(n){for(var i=0,u=t.length;i<h;++i)for(var d,l,c,f,g,p=0,v=0,y=0,m=0;p<u;++p)l=(d=t[p]).source,v=(c=d.target).x+c.vx-l.x-l.vx||n2(s),o>1&&(y=c.y+c.vy-l.y-l.vy||n2(s)),o>2&&(m=c.z+c.vz-l.z-l.vz||n2(s)),f=((f=Math.sqrt(v*v+y*y+m*m))-r[p])/f*n*e[p],v*=f,y*=f,m*=f,c.vx-=v*(g=a[p]),o>1&&(c.vy-=y*g),o>2&&(c.vz-=m*g),l.vx+=v*(g=1-g),o>1&&(l.vy+=y*g),o>2&&(l.vz+=m*g)}function f(){if(n){var o,s,d=n.length,l=t.length,h=new Map(n.map((t,e)=>[u(t,e,n),t]));for(o=0,i=Array(d);o<l;++o)(s=t[o]).index=o,"object"!=typeof s.source&&(s.source=n9(h,s.source)),"object"!=typeof s.target&&(s.target=n9(h,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(o=0,a=Array(l);o<l;++o)s=t[o],a[o]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);e=Array(l),g(),r=Array(l),p()}}function g(){if(n)for(var r=0,o=t.length;r<o;++r)e[r]=+d(t[r],r,t)}function p(){if(n)for(var e=0,o=t.length;e<o;++e)r[e]=+l(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,...e){n=t,s=e.find(t=>"function"==typeof t)||Math.random,o=e.find(t=>[1,2,3].includes(t))||2,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(u=t,c):u},c.iterations=function(t){return arguments.length?(h=+t,c):h},c.strength=function(t){return arguments.length?(d="function"==typeof t?t:n1(+t),g(),c):d},c.distance=function(t){return arguments.length?(l="function"==typeof t?t:n1(+t),p(),c):l},c}function ot(t){return t.x}function oe(t){return t.y}function or(t){return t.z}n0.copy=function(){var t,e,r=new nZ(this._x,this._x0,this._x1),n=this._root;if(!n)return r;if(!n.length)return r._root=nQ(n),r;for(t=[{source:n,target:r._root=[,,]}];n=t.pop();)for(var o=0;o<2;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=[,,]}):n.target[o]=nQ(e));return r},n0.add=function(t){let e=+this._x.call(null,t);return nX(this.cover(e),e,t)},n0.addAll=function(t){Array.isArray(t)||(t=Array.from(t));let e=t.length,r=new Float64Array(e),n=1/0,o=-1/0;for(let i=0,a;i<e;++i)!isNaN(a=+this._x.call(null,t[i]))&&(r[i]=a,a<n&&(n=a),a>o&&(o=a));if(n>o)return this;this.cover(n).cover(o);for(let n=0;n<e;++n)nX(this,r[n],t[n]);return this},n0.cover=function(t){if(isNaN(t=+t))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(t))+1;else{for(var n,o,i=r-e||1,a=this._root;e>t||t>=r;)switch(o=+(t<e),(n=[,,])[o]=a,a=n,i*=2,o){case 0:r=e+i;break;case 1:e=r-i}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=r,this},n0.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},n0.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},n0.find=function(t,e){var r,n,o,i,a,s=this._x0,u=this._x1,d=[],l=this._root;for(l&&d.push(new n$(l,s,u)),null==e?e=1/0:(s=t-e,u=t+e);i=d.pop();)if((l=i.node)&&!((n=i.x0)>u)&&!((o=i.x1)<s)){if(l.length){var h=(n+o)/2;d.push(new n$(l[1],h,o),new n$(l[0],n,h)),(a=+(t>=h))&&(i=d[d.length-1],d[d.length-1]=d[d.length-1-a],d[d.length-1-a]=i)}else{var c=Math.abs(t-+this._x.call(null,l.data));c<e&&(e=c,s=t-c,u=t+c,r=l.data)}}return r},n0.remove=function(t){if(isNaN(i=+this._x.call(null,t)))return this;var e,r,n,o,i,a,s,u,d,l=this._root,h=this._x0,c=this._x1;if(!l)return this;if(l.length)for(;;){if((s=i>=(a=(h+c)/2))?h=a:c=a,e=l,!(l=l[u=+s]))return this;if(!l.length)break;e[u+1&1]&&(r=e,d=u)}for(;l.data!==t;)if(n=l,!(l=l.next))return this;return((o=l.next)&&delete l.next,n)?o?n.next=o:delete n.next:e?(o?e[u]=o:delete e[u],(l=e[0]||e[1])&&l===(e[1]||e[0])&&!l.length&&(r?r[d]=l:this._root=l)):this._root=o,this},n0.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},n0.root=function(){return this._root},n0.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},n0.visit=function(t){var e,r,n,o,i=[],a=this._root;for(a&&i.push(new n$(a,this._x0,this._x1));e=i.pop();)if(!t(a=e.node,n=e.x0,o=e.x1)&&a.length){var s=(n+o)/2;(r=a[1])&&i.push(new n$(r,s,o)),(r=a[0])&&i.push(new n$(r,n,s))}return this},n0.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new n$(this._root,this._x0,this._x1));e=r.pop();){var o=e.node;if(o.length){var i,a=e.x0,s=e.x1,u=(a+s)/2;(i=o[0])&&r.push(new n$(i,a,u)),(i=o[1])&&r.push(new n$(i,u,s))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.x1);return this},n0.x=function(t){return arguments.length?(this._x=t,this):this._x};var on=Math.PI*(3-Math.sqrt(5)),oo=20*Math.PI/(9+Math.sqrt(221));function oi(){var t,e,r,n,o,i,a=n1(-30),s=1,u=1/0,d=.81;function l(n){var i,a=t.length,s=(1===e?nY(t,ot):2===e?rd(t,ot,oe):3===e?rm(t,ot,oe,or):null).visitAfter(c);for(o=n,i=0;i<a;++i)r=t[i],s.visit(f)}function h(){if(t){var e,r,n=t.length;for(e=0,i=Array(n);e<n;++e)i[(r=t[e]).index]=+a(r,e,t)}}function c(t){var r,n,o,a,s,u,d=0,l=0,h=t.length;if(h){for(o=a=s=u=0;u<h;++u)(r=t[u])&&(n=Math.abs(r.value))&&(d+=r.value,l+=n,o+=n*(r.x||0),a+=n*(r.y||0),s+=n*(r.z||0));d*=Math.sqrt(4/h),t.x=o/l,e>1&&(t.y=a/l),e>2&&(t.z=s/l)}else{(r=t).x=r.data.x,e>1&&(r.y=r.data.y),e>2&&(r.z=r.data.z);do d+=i[r.data.index];while(r=r.next)}t.value=d}function f(t,a,l,h,c){if(!t.value)return!0;var f=[l,h,c][e-1],g=t.x-r.x,p=e>1?t.y-r.y:0,v=e>2?t.z-r.z:0,y=f-a,m=g*g+p*p+v*v;if(y*y/d<m)return m<u&&(0===g&&(m+=(g=n2(n))*g),e>1&&0===p&&(m+=(p=n2(n))*p),e>2&&0===v&&(m+=(v=n2(n))*v),m<s&&(m=Math.sqrt(s*m)),r.vx+=g*t.value*o/m,e>1&&(r.vy+=p*t.value*o/m),e>2&&(r.vz+=v*t.value*o/m)),!0;if(!t.length&&!(m>=u)){(t.data!==r||t.next)&&(0===g&&(m+=(g=n2(n))*g),e>1&&0===p&&(m+=(p=n2(n))*p),e>2&&0===v&&(m+=(v=n2(n))*v),m<s&&(m=Math.sqrt(s*m)));do t.data!==r&&(y=i[t.data.index]*o/m,r.vx+=g*y,e>1&&(r.vy+=p*y),e>2&&(r.vz+=v*y));while(t=t.next)}}return l.initialize=function(r,...o){t=r,n=o.find(t=>"function"==typeof t)||Math.random,e=o.find(t=>[1,2,3].includes(t))||2,h()},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:n1(+t),h(),l):a},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l.theta=function(t){return arguments.length?(d=t*t,l):Math.sqrt(d)},l}function oa(t,e,r,n){var o,i,a,s,u=n1(.1);function d(t){for(var u=0,d=o.length;u<d;++u){var l=o[u],h=l.x-e||1e-6,c=(l.y||0)-r||1e-6,f=(l.z||0)-n||1e-6,g=Math.sqrt(h*h+c*c+f*f),p=(s[u]-g)*a[u]*t/g;l.vx+=h*p,i>1&&(l.vy+=c*p),i>2&&(l.vz+=f*p)}}function l(){if(o){var e,r=o.length;for(e=0,a=Array(r),s=Array(r);e<r;++e)s[e]=+t(o[e],e,o),a[e]=isNaN(s[e])?0:+u(o[e],e,o)}}return"function"!=typeof t&&(t=n1(+t)),null==e&&(e=0),null==r&&(r=0),null==n&&(n=0),d.initialize=function(t,...e){o=t,i=e.find(t=>[1,2,3].includes(t))||2,l()},d.strength=function(t){return arguments.length?(u="function"==typeof t?t:n1(+t),l(),d):u},d.radius=function(e){return arguments.length?(t="function"==typeof e?e:n1(+e),l(),d):t},d.x=function(t){return arguments.length?(e=+t,d):e},d.y=function(t){return arguments.length?(r=+t,d):r},d.z=function(t){return arguments.length?(n=+t,d):n},d}function os(t){var e,r,n,o=n1(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)o=e[i],o.vx+=(n[i]-o.x)*r[i]*t}function a(){if(e){var i,a=e.length;for(i=0,r=Array(a),n=Array(a);i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=n1(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:n1(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:n1(+e),a(),i):t},i}function ou(t){var e,r,n,o=n1(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)o=e[i],o.vy+=(n[i]-o.y)*r[i]*t}function a(){if(e){var i,a=e.length;for(i=0,r=Array(a),n=Array(a);i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=n1(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:n1(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:n1(+e),a(),i):t},i}function od(t){var e,r,n,o=n1(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)o=e[i],o.vz+=(n[i]-o.z)*r[i]*t}function a(){if(e){var i,a=e.length;for(i=0,r=Array(a),n=Array(a);i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=n1(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:n1(+t),a(),i):o},i.z=function(e){return arguments.length?(t="function"==typeof e?e:n1(+e),a(),i):t},i}var ol={};ol={graphlib:o("3vj6M"),layout:o("49gez"),debug:o("21fNM"),util:{time:o("2o807").time,notime:o("2o807").notime},version:o("8PPkN")};class oh{constructor(t){this.id="dagre",this.options={},Object.assign(this.options,oh.defaultOptions,t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,t,Object.assign(Object.assign({},this.options),e))})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,t,Object.assign(Object.assign({},this.options),e))})}genericDagreLayout(t,e,r){return a(this,void 0,void 0,function*(){var n;let{nodeSize:o}=r,i=new ol.graphlib.Graph;i.setGraph(r),i.setDefaultEdgeLabel(()=>({})),[...e.getAllNodes(),...e.getAllEdges()].some(({id:t})=>z(t))&&console.error("Dagre layout only support string id, it will convert number to string."),e.getAllNodes().forEach(t=>{let{id:e}=t,r=Object.assign({},t.data);if(void 0!==o){let[e,n]=e1(eQ(o)?o(t):o);Object.assign(r,{width:e,height:n})}i.setNode(e.toString(),r)}),e.getAllEdges().forEach(({id:t,source:e,target:r})=>{i.setEdge(e.toString(),r.toString(),{id:t})}),((n=ol)&&n.__esModule?n.default:n).layout(i);let a={nodes:[],edges:[]};return i.nodes().forEach(r=>{let n=i.node(r);a.nodes.push({id:r,data:n}),t&&e.mergeNodeData(r,n)}),i.edges().forEach(r=>{let n=i.edge(r),{id:o}=n,s=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)0>e.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}(n,["id"]),{v:u,w:d}=r;a.edges.push({id:o,source:u,target:d,data:s}),t&&e.mergeEdgeData(o,s)}),a})}}oh.defaultOptions={};class oc{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){return Math.hypot(this.rx-t.rx,this.ry-t.ry)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){let e=t.rx-this.rx,r=t.ry-this.ry,n=Math.hypot(e,r);n=n<1e-4?1e-4:n;let o=this.g*(this.degree+1)*(t.degree+1)/n;this.fx+=o*e/n,this.fy+=o*r/n}in(t){return t.contains(this.rx,this.ry)}add(t){let e=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/e;return new oc({rx:r,ry:(this.ry*this.mass+t.ry*t.mass)/e,mass:e,degree:this.degree+t.degree})}}class of{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){let r=this.length/2;return t<=this.xmid+r&&t>=this.xmid-r&&e<=this.ymid+r&&e>=this.ymid-r}NW(){let t=this.xmid-this.length/4;return new of({xmid:t,ymid:this.ymid+this.length/4,length:this.length/2})}NE(){let t=this.xmid+this.length/4;return new of({xmid:t,ymid:this.ymid+this.length/4,length:this.length/2})}SW(){let t=this.xmid-this.length/4;return new of({xmid:t,ymid:this.ymid-this.length/4,length:this.length/2})}SE(){let t=this.xmid+this.length/4;return new of({xmid:t,ymid:this.ymid-this.length/4,length:this.length/2})}}class og{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}insert(t){if(null==this.body){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new og(this.quad.NW()),this.NE=new og(this.quad.NE()),this.SW=new og(this.quad.SW()),this.SE=new og(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}updateForce(t){null!=this.body&&t!==this.body&&(this._isExternal()?t.addForce(this.body):(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))}}let op={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1},ov={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},oy={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300},om=(t,e)=>{let r;let n=t.rows||5,o=t.cols||5;return null==e?r=Math.min(n,o):Math.min(n,o)===t.rows?t.rows=e:t.cols=e,r},ox=(t,e)=>{let r;let n=t.rows||5,o=t.cols||5;return null==e?r=Math.max(n,o):Math.max(n,o)===t.rows?t.rows=e:t.cols=e,r},ow=(t,e)=>t[`c-${e.row}-${e.col}`]||!1,ob=(t,e)=>t[`c-${e.row}-${e.col}`]=!0,oE=(t,e)=>{let r=t.cols||5;e.col++,e.col>=r&&(e.col=0,e.row++)},oN=(t,e,r,n,o,i,a,s)=>{let u,d;let l=o[t.id];if(l)u=l.col*r+r/2+e[0],d=l.row*n+n/2+e[1];else{for(;ow(s,a);)oE(i,a);u=a.col*r+r/2+e[0],d=a.row*n+n/2+e[1],ob(s,a),oE(i,a)}t.data.x=u,t.data.y=d},oM=(t,e,r)=>{try{let r=rX.mul(rX.pow(e,2),-.5),n=r.mean("row"),o=r.mean("column"),i=r.mean();r.add(i).subRowVector(n).subColumnVector(o);let a=new rY(r),s=rX.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map(e=>rX.mul([e],[s]).toJSON()[0].splice(0,t))}catch(n){let t=[];for(let n=0;n<e.length;n++){let e=Math.random()*r,n=Math.random()*r;t.push([e,n])}return t}},o_={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},ok=(t,e)=>{let{positions:r,iterations:n,width:o,k:i,speed:a=100,strictRadial:s,focusIdx:u,radii:d=[],nodeSizeFunc:l}=Object.assign(Object.assign({},o_),e),h=t.getAllNodes(),c=[],f=o/10;for(let t=0;t<n;t++)r.forEach((t,e)=>{c[e]={x:0,y:0}}),oj(h,r,c,i,d,l),oO(r,c,a,s,u,f,o,d);return r},oj=(t,e,r,n,o,i)=>{e.forEach((a,s)=>{r[s]={x:0,y:0},e.forEach((e,u)=>{if(s===u||o[s]!==o[u])return;let d=a.x-e.x,l=a.y-e.y,h=Math.sqrt(d*d+l*l);if(0===h){h=1;let t=s>u?1:-1;d=.01*t,l=.01*t}if(h<i(t[s])/2+i(t[u])/2){let t=n*n/h;r[s].x+=d/h*t,r[s].y+=l/h*t}})})},oO=(t,e,r,n,o,i,a,s)=>{let u=i||a/10;return n&&e.forEach((e,r)=>{let n=t[r].x-t[o].x,i=t[r].y-t[o].y,a=Math.sqrt(n*n+i*i),s=i/a,u=-n/a,d=Math.sqrt(e.x*e.x+e.y*e.y),l=Math.acos((s*e.x+u*e.y)/d);l>Math.PI/2&&(l-=Math.PI/2,s*=-1,u*=-1);let h=Math.cos(l)*d;e.x=s*h,e.y=u*h}),t.forEach((i,a)=>{if(a===o)return;let d=Math.sqrt(e[a].x*e[a].x+e[a].y*e[a].y);if(d>0&&a!==o){let l=Math.min(r/800*u,d);if(i.x+=e[a].x/d*l,i.y+=e[a].y/d*l,n){let e=i.x-t[o].x,r=i.y-t[o].y,n=Math.sqrt(e*e+r*r);e=e/n*s[a],r=r/n*s[a],i.x=t[o].x+e,i.y=t[o].y+r}}}),t},oA={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10},oS=(t,e,r,n,o,i,a)=>{if(!t)return[];let s=[];if(e){let u={};e.forEach((e,d)=>{let l=[];e.forEach((e,s)=>{var h,c;if(d===s)l.push(0);else if(n[d]===n[s]){if("data"===i)l.push(Math.abs(d-s)*a*e/(n[d]/o));else if(i){let r,f;if(u[t[d].id])r=u[t[d].id];else{let e=("id"===i?t[d].id:null===(h=t[d].data)||void 0===h?void 0:h[i])||0;r=re(e)?e.charCodeAt(0):e,u[t[d].id]=r}if(u[t[s].id])f=u[t[s].id];else{let e=("id"===i?t[s].id:null===(c=t[s].data)||void 0===c?void 0:c[i])||0;f=re(e)?e.charCodeAt(0):e,u[t[s].id]=f}l.push(Math.abs(r-f)*a*e/(n[d]/o))}else l.push(e*r/(n[d]/o))}else l.push((r+o)/2*e)}),s.push(l)})}return s},oz=t=>{let e=t.length,r=t[0].length,n=[];for(let o=0;o<e;o++){let e=[];for(let n=0;n<r;n++)0!==t[o][n]?e.push(1/(t[o][n]*t[o][n])):e.push(0);n.push(e)}return n},oI=(t,e)=>{let r=-1;return t.forEach((t,n)=>{t.id===e&&(r=n)}),Math.max(r,0)},oD=(t,e,r)=>{let n=t.length;for(let o=0;o<n;o++)if(t[e][o]===1/0){t[e][o]=r,t[o][e]=r;for(let i=0;i<n;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=r+t[o][i],t[i][e]=r+t[o][i])}for(let r=0;r<n;r++)if(r!==e){for(let o=0;o<n;o++)if(t[r][o]===1/0){let n=Math.abs(t[e][r]-t[e][o]);n=0===n?1:n,t[r][o]=n}}},oR=(t,e)=>{let r=0;for(let n=0;n<t[e].length;n++)t[e][n]!==1/0&&(r=t[e][n]>r?t[e][n]:r);return r},oP={center:[0,0],width:300,height:300},oT={circular:class{constructor(t={}){this.options=t,this.id="circular",this.options=Object.assign(Object.assign({},e9),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,t,e)})}genericCircularLayout(t,e,r){return a(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.options),r),{width:o,height:i,center:a,divisions:s,startAngle:u=0,endAngle:d=2*Math.PI,angleRatio:l,ordering:h,clockwise:c,nodeSpacing:f,nodeSize:g}=n,p=e.getAllNodes(),v=e.getAllEdges(),[y,m,x]=rt(o,i,a),w=null==p?void 0:p.length;if(!w||1===w)return e4(e,t,x);let{radius:b,startRadius:E,endRadius:N}=n;if(f){let t=e2(10,f),e=e3(10,g),r=-1/0;p.forEach(t=>{let n=e(t);r<n&&(r=n)});let n=0;p.forEach((e,o)=>{0===o?n+=r||10:n+=(t(e)||0)+(r||10)}),b=n/(2*Math.PI)}else b||E||N?!E&&N?E=N:E&&!N&&(N=E):b=Math.min(m,y)/2;let M=(d-u)/w*l,_=[];_="topology"===h?e7(e,p):"topology-directed"===h?e7(e,p,!0):"degree"===h?function(t,e){let r=[];return e.forEach((t,e)=>{r.push(eZ(t))}),r.sort((e,r)=>t.getDegree(e.id,"both")-t.getDegree(r.id,"both")),r}(e,p):p.map(t=>eZ(t));let k=Math.ceil(w/s);for(let t=0;t<w;++t){let e=b;e||null===E||null===N||(e=E+t*(N-E)/(w-1)),e||(e=10+100*t/(w-1));let r=u+t%k*M+2*Math.PI/s*Math.floor(t/k);c||(r=d-t%k*M-2*Math.PI/s*Math.floor(t/k)),_[t].data.x=x[0]+Math.cos(r)*e,_[t].data.y=x[1]+Math.sin(r)*e}return t&&_.forEach(t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),{nodes:_,edges:v}})}},concentric:ro,mds:r8,random:class{constructor(t={}){this.options=t,this.id="random",this.options=Object.assign(Object.assign({},oP),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,t,e)})}genericRandomLayout(t,e,r){return a(this,void 0,void 0,function*(){let{center:n,width:o,height:i}=Object.assign(Object.assign({},this.options),r),a=e.getAllNodes(),s=o||"undefined"==typeof window?o:window.innerWidth,u=i||"undefined"==typeof window?i:window.innerHeight,d=n||[s/2,u/2],l=[];return a&&a.forEach(t=>{l.push({id:t.id,data:{x:(Math.random()-.5)*.9*s+d[0],y:(Math.random()-.5)*.9*u+d[1]}})}),t&&l.forEach(t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})),{nodes:l,edges:e.getAllEdges()}})}},grid:class{constructor(t={}){this.options=t,this.id="grid",this.options=Object.assign(Object.assign({},oy),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericGridLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,t,e)})}genericGridLayout(t,e,r){return a(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.options),r),{begin:o=[0,0],condense:i,preventOverlapPadding:a,preventOverlap:s,rows:u,cols:d,nodeSpacing:l,nodeSize:h,width:c,height:f,position:g}=n,{sortBy:p}=n,v=e.getAllNodes(),y=e.getAllEdges(),m=null==v?void 0:v.length;if(!m||1===m)return e4(e,t,o);let x=v.map(t=>eZ(t));"id"===p||re(p)&&void 0!==x[0].data[p]||(p="degree"),"degree"===p?x.sort((t,r)=>e.getDegree(r.id,"both")-e.getDegree(t.id,"both")):"id"===p?x.sort((t,e)=>z(e.id)&&z(t.id)?e.id-t.id:`${t.id}`.localeCompare(`${e.id}`)):x.sort((t,e)=>e.data[p]-t.data[p]);let w=c||"undefined"==typeof window?c:window.innerWidth,b=f||"undefined"==typeof window?f:window.innerHeight,E={rows:u,cols:d};if(null!=u&&null!=d)E.rows=u,E.cols=d;else if(null!=u&&null==d)E.rows=u,E.cols=Math.ceil(m/E.rows);else if(null==u&&null!=d)E.cols=d,E.rows=Math.ceil(m/E.cols);else{let t=Math.sqrt(m*b/w);E.rows=Math.round(t),E.cols=Math.round(w/b*t)}if(E.rows=Math.max(E.rows,1),E.cols=Math.max(E.cols,1),E.cols*E.rows>m){let t=om(E),e=ox(E);(t-1)*e>=m?om(E,t-1):(e-1)*t>=m&&ox(E,e-1)}else for(;E.cols*E.rows<m;){let t=om(E),e=ox(E);(e+1)*t>=m?ox(E,e+1):om(E,t+1)}let N=i?0:w/E.cols,M=i?0:b/E.rows;if(s||l){let t=e2(10,l),r=e3(30,h,!1);x.forEach(n=>{n.data.x&&n.data.y||(n.data.x=0,n.data.y=0);let[o,i]=e1(r(e.getNode(n.id))||30),s=void 0!==t?t(n):a;N=Math.max(N,o+s),M=Math.max(M,i+s)})}let _={},k={row:0,col:0},j={};for(let t=0;t<x.length;t++){let r;let n=x[t];if(g&&(r=g(e.getNode(n.id))),r&&(void 0!==r.row||void 0!==r.col)){let t={row:r.row,col:r.col};if(void 0===t.col)for(t.col=0;ow(_,t);)t.col++;else if(void 0===t.row)for(t.row=0;ow(_,t);)t.row++;j[n.id]=t,ob(_,t)}oN(n,o,N,M,j,E,k,_)}return t&&x.forEach(t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),{nodes:x,edges:y}})}},radial:class{constructor(t={}){this.options=t,this.id="radial",this.options=Object.assign(Object.assign({},oA),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,t,e)})}genericRadialLayout(t,e,r){return a(this,void 0,void 0,function*(){let{width:n,height:o,center:i,focusNode:a,unitRadius:s,nodeSize:u,nodeSpacing:d,strictRadial:l,preventOverlap:h,maxPreventOverlapIteration:c,sortBy:f,linkDistance:g=50,sortStrength:p=10,maxIteration:v=1e3}=Object.assign(Object.assign({},this.options),r),y=e.getAllNodes(),m=e.getAllEdges(),x=n||"undefined"==typeof window?n:window.innerWidth,w=o||"undefined"==typeof window?o:window.innerHeight,b=i||[x/2,w/2];if(!(null==y?void 0:y.length)||1===y.length)return e4(e,t,b);let E=y[0];if(re(a)){for(let t=0;t<y.length;t++)if(y[t].id===a){E=y[t];break}}else E=a||y[0];let N=oI(y,E.id),M=rZ(rQ({nodes:y,edges:m},!1)),_=oR(M,N);oD(M,N,_+1);let k=M[N],j=x-b[0]>b[0]?b[0]:x-b[0],O=w-b[1]>b[1]?b[1]:w-b[1];0===j&&(j=x/2),0===O&&(O=w/2);let A=Math.min(j,O),S=Math.max(...k),z=[],I=s||A/S;k.forEach((t,e)=>{z[e]=t*I});let D=oS(y,M,g,z,I,f,p),R=oz(D),P=oM(g,D,g),T=P.map(([t,e])=>({x:(isNaN(t)?Math.random()*g:t)-P[N][0],y:(isNaN(e)?Math.random()*g:e)-P[N][1]}));this.run(v,T,R,D,z,N),h&&(T=ok(e,{nodes:y,nodeSizeFunc:e6(u,d),positions:T,radii:z,height:w,width:x,strictRadial:!!l,focusIdx:N,iterations:c||200,k:T.length/4.5}));let L=[];return T.forEach((t,e)=>{let r=eZ(y[e]);r.data.x=t.x+b[0],r.data.y=t.y+b[1],L.push(r)}),t&&L.forEach(t=>e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})),{nodes:L,edges:m}})}run(t,e,r,n,o,i){for(let a=0;a<=t;a++){let s=a/t;this.oneIteration(s,e,o,n,r,i)}}oneIteration(t,e,r,n,o,i){let a=1-t;e.forEach((s,u)=>{let d=r2(s,{x:0,y:0}),l=0===d?0:1/d;if(u===i)return;let h=0,c=0,f=0;e.forEach((t,e)=>{if(u===e)return;let r=r2(s,t),i=0===r?0:1/r,a=n[e][u];f+=o[u][e],h+=o[u][e]*(t.x+a*(s.x-t.x)*i),c+=o[u][e]*(t.y+a*(s.y-t.y)*i)});let g=0===r[u]?0:1/r[u];f*=a,f+=t*g*g,h*=a,h+=t*g*s.x*l,s.x=h/f,c*=a,c+=t*g*s.y*l,s.y=c/f})}},force:r_,d3force:nW,"d3-force-3d":class extends nW{constructor(){super(...arguments),this.id="d3-force-3d",this.config={inputNodeAttrs:["x","y","z","vx","vy","vz","fx","fy","fz"],outputNodeAttrs:["x","y","z","vx","vy","vz"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource","numDimensions"]},this.forceMap={link:n7,manyBody:oi,center:nJ,collide:n5,radial:oa,x:os,y:ou,z:od},this.options={numDimensions:3,link:{id:t=>t.id},manyBody:{},center:{x:0,y:0,z:0}}}initSimulation(){return function(t,e){let r;var n,o=Math.min(3,Math.max(1,Math.round(e=e||2))),i=1,a=.001,s=1-Math.pow(.001,1/300),u=0,d=.6,l=new Map,h=nR(g),c=nm("tick","end"),f=(r=1,()=>(r=(1664525*r+0x3c6ef35f)%0x100000000)/0x100000000);function g(){p(),c.call("tick",n),i<a&&(h.stop(),c.call("end",n))}function p(e){var r,a,h=t.length;void 0===e&&(e=1);for(var c=0;c<e;++c)for(i+=(u-i)*s,l.forEach(function(t){t(i)}),r=0;r<h;++r)null==(a=t[r]).fx?a.x+=a.vx*=d:(a.x=a.fx,a.vx=0),o>1&&(null==a.fy?a.y+=a.vy*=d:(a.y=a.fy,a.vy=0)),o>2&&(null==a.fz?a.z+=a.vz*=d:(a.z=a.fz,a.vz=0));return n}function v(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||o>1&&isNaN(e.y)||o>2&&isNaN(e.z)){var i=10*(o>2?Math.cbrt(.5+r):o>1?Math.sqrt(.5+r):r),a=r*on,s=r*oo;1===o?e.x=i:2===o?(e.x=i*Math.cos(a),e.y=i*Math.sin(a)):(e.x=i*Math.sin(a)*Math.cos(s),e.y=i*Math.cos(a),e.z=i*Math.sin(a)*Math.sin(s))}(isNaN(e.vx)||o>1&&isNaN(e.vy)||o>2&&isNaN(e.vz))&&(e.vx=0,o>1&&(e.vy=0),o>2&&(e.vz=0))}}function y(e){return e.initialize&&e.initialize(t,f,o),e}return null==t&&(t=[]),v(),n={tick:p,restart:function(){return h.restart(g),n},stop:function(){return h.stop(),n},numDimensions:function(t){return arguments.length?(o=Math.min(3,Math.max(1,Math.round(t))),l.forEach(y),n):o},nodes:function(e){return arguments.length?(t=e,v(),l.forEach(y),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(a=+t,n):a},alphaDecay:function(t){return arguments.length?(s=+t,n):+s},alphaTarget:function(t){return arguments.length?(u=+t,n):u},velocityDecay:function(t){return arguments.length?(d=1-t,n):1-d},randomSource:function(t){return arguments.length?(f=t,l.forEach(y),n):f},force:function(t,e){return arguments.length>1?(null==e?l.delete(t):l.set(t,y(e)),n):l.get(t)},find:function(){var e,r,n,i,a,s,u=Array.prototype.slice.call(arguments),d=u.shift()||0,l=(o>1?u.shift():null)||0,h=(o>2?u.shift():null)||0,c=u.shift()||1/0,f=0,g=t.length;for(c*=c,f=0;f<g;++f)(i=(e=d-(a=t[f]).x)*e+(r=l-(a.y||0))*r+(n=h-(a.z||0))*n)<c&&(s=a,c=i);return s},on:function(t,e){return arguments.length>1?(c.on(t,e),n):c.on(t)}}}()}},fruchterman:class{constructor(t={}){this.options=t,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},ov),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,t,e)})}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}tick(t=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let e=0;e<t;e++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);let e={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&e.nodes.forEach(t=>this.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===this.options.dimensions?t.data.z:void 0})),e}genericFruchtermanLayout(t,e,r){return a(this,void 0,void 0,function*(){if(this.running)return;let n=this.formatOptions(r),{dimensions:o,width:i,height:a,center:s,clustering:u,nodeClusterBy:d,maxIteration:l,onTick:h}=n,f=e.getAllNodes(),g=e.getAllEdges();if(!(null==f?void 0:f.length)){let t={nodes:[],edges:g};return this.lastResult=t,t}if(1===f.length){t&&e.mergeNodeData(f[0].id,{x:s[0],y:s[1],z:3===o?s[2]:void 0});let r={nodes:[Object.assign(Object.assign({},f[0]),{data:Object.assign(Object.assign({},f[0].data),{x:s[0],y:s[1],z:3===o?s[2]:void 0})})],edges:g};return this.lastResult=r,r}let p=f.map(t=>eZ(t,[i,a])),v=new c({nodes:p,edges:g}),y={};if(u&&p.forEach(t=>{let e=t.data[d];y[e]||(y[e]={name:e,cx:0,cy:0,count:0})}),this.lastLayoutNodes=p,this.lastLayoutEdges=g,this.lastAssign=t,this.lastGraph=v,this.lastOptions=n,this.lastClusterMap=y,"undefined"==typeof window)return;let m=0;return new Promise(r=>{this.timeInterval=window.setInterval(()=>{if(!this.running){r({nodes:p,edges:g});return}this.runOneStep(v,y,n),t&&p.forEach(({id:t,data:r})=>e.mergeNodeData(t,{x:r.x,y:r.y,z:3===o?r.z:void 0})),null==h||h({nodes:p,edges:g}),++m>=l&&(window.clearInterval(this.timeInterval),r({nodes:p,edges:g}))},0),this.running=!0})})}formatOptions(t={}){let e=Object.assign(Object.assign({},this.options),t),{clustering:r,nodeClusterBy:n}=e,{center:o,width:i,height:a}=e;return e.width=i||"undefined"==typeof window?i:window.innerWidth,e.height=a||"undefined"==typeof window?a:window.innerHeight,e.center=o||[e.width/2,e.height/2],e.clustering=r&&!!n,e}runOneStep(t,e,r){let{dimensions:n,height:o,width:i,gravity:a,center:s,speed:u,clustering:d,nodeClusterBy:l,clusterGravity:h}=r,c=o*i,f=Math.sqrt(c)/10,g=t.getAllNodes(),p=c/(g.length+1),v=Math.sqrt(p),y={};if(this.applyCalculate(t,y,v,p),d){for(let t in e)e[t].cx=0,e[t].cy=0,e[t].count=0;for(let t in g.forEach(t=>{let{data:r}=t,n=e[r[l]];z(r.x)&&(n.cx+=r.x),z(r.y)&&(n.cy+=r.y),n.count++}),e)e[t].cx/=e[t].count,e[t].cy/=e[t].count;let t=h||a;g.forEach((r,n)=>{let{id:o,data:i}=r;if(!z(i.x)||!z(i.y))return;let a=e[i[l]],s=Math.sqrt((i.x-a.cx)*(i.x-a.cx)+(i.y-a.cy)*(i.y-a.cy)),u=v*t;y[o].x-=u*(i.x-a.cx)/s,y[o].y-=u*(i.y-a.cy)/s})}g.forEach((t,e)=>{let{id:r,data:o}=t;if(!z(o.x)||!z(o.y))return;let i=.01*v*a;y[r].x-=i*(o.x-s[0]),y[r].y-=i*(o.y-s[1]),3===n&&(y[r].z-=i*(o.z-s[2]))}),g.forEach((e,r)=>{let{id:o,data:i}=e;if(z(i.fx)&&z(i.fy)){i.x=i.fx,i.y=i.fy,3===n&&(i.z=i.fz);return}if(!z(i.x)||!z(i.y))return;let a=Math.sqrt(y[o].x*y[o].x+y[o].y*y[o].y+(3===n?y[o].z*y[o].z:0));if(a>0){let e=Math.min(u/800*f,a);t.mergeNodeData(o,{x:i.x+y[o].x/a*e,y:i.y+y[o].y/a*e,z:3===n?i.z+y[o].z/a*e:void 0})}})}applyCalculate(t,e,r,n){this.calRepulsive(t,e,n),this.calAttractive(t,e,r)}calRepulsive(t,e,r){let n=t.getAllNodes();n.forEach(({data:t,id:o},i)=>{e[o]={x:0,y:0,z:0},n.forEach(({data:n,id:a},s)=>{if(i<=s||!z(t.x)||!z(n.x)||!z(t.y)||!z(n.y))return;let u=t.x-n.x,d=t.y-n.y,l=3===this.options.dimensions?t.z-n.z:0,h=u*u+d*d+l*l;0===h&&(h=1,u=.01,d=.01,l=.01);let c=r/h,f=u*c,g=d*c,p=l*c;e[o].x+=f,e[o].y+=g,e[a].x-=f,e[a].y-=g,3===this.options.dimensions&&(e[o].z+=p,e[a].z-=p)})})}calAttractive(t,e,r){t.getAllEdges().forEach(n=>{let{source:o,target:i}=n;if(!o||!i||o===i)return;let{data:a}=t.getNode(o),{data:s}=t.getNode(i);if(!z(s.x)||!z(a.x)||!z(s.y)||!z(a.y))return;let u=s.x-a.x,d=s.y-a.y,l=3===this.options.dimensions?s.z-a.z:0,h=Math.sqrt(u*u+d*d+l*l)/r,c=u*h,f=d*h,g=l*h;e[o].x+=c,e[o].y+=f,e[i].x-=c,e[i].y-=f,3===this.options.dimensions&&(e[o].z+=g,e[i].z-=g)})}},forceAtlas2:class{constructor(t={}){this.options=t,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},op),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,t,e)})}genericForceAtlas2Layout(t,e,r){return a(this,void 0,void 0,function*(){let n=e.getAllEdges(),o=e.getAllNodes(),i=this.formatOptions(r,o.length),{width:a,height:s,prune:u,maxIteration:d,nodeSize:l,center:h}=i;if(!(null==o?void 0:o.length)||1===o.length)return e4(e,t,h);let f=o.map(t=>eZ(t,[a,s])),g=n.filter(t=>{let{source:e,target:r}=t;return e!==r}),p=new c({nodes:f,edges:g}),v=this.getSizes(p,l);if(this.run(p,e,d,v,t,i),u){for(let t=0;t<g.length;t+=1){let{source:e,target:r}=g[t],n=p.getDegree(e),o=p.getDegree(e);if(n<=1){let t=p.getNode(r);p.mergeNodeData(e,{x:t.data.x,y:t.data.y})}else if(o<=1){let t=p.getNode(e);p.mergeNodeData(r,{x:t.data.x,y:t.data.y})}}let r=Object.assign(Object.assign({},i),{prune:!1,barnesHut:!1});this.run(p,e,100,v,t,r)}return{nodes:f,edges:n}})}getSizes(t,e){let r=t.getAllNodes(),n={};for(let t=0;t<r.length;t+=1){let o=r[t];n[o.id]=e6(e,void 0)(o)}return n}formatOptions(t={},e){let r=Object.assign(Object.assign({},this.options),t),{center:n,width:o,height:i,barnesHut:a,prune:s,maxIteration:u,kr:d,kg:l}=r;return r.width=o||"undefined"==typeof window?o:window.innerWidth,r.height=i||"undefined"==typeof window?i:window.innerHeight,r.center=n||[r.width/2,r.height/2],void 0===a&&e>250&&(r.barnesHut=!0),void 0===s&&e>100&&(r.prune=!0),0!==u||s?0===u&&s&&(r.maxIteration=100,e<=200&&e>100?r.maxIteration=500:e>200&&(r.maxIteration=950)):(r.maxIteration=250,e<=200&&e>100?r.maxIteration=1e3:e>200&&(r.maxIteration=1200)),!d&&(r.kr=50,e>100&&e<=500?r.kr=20:e>500&&(r.kr=1)),!l&&(r.kg=20,e>100&&e<=500?r.kg=10:e>500&&(r.kg=1)),r}run(t,e,r,n,o,i){let{kr:a,barnesHut:s,onTick:u}=i,d=t.getAllNodes(),l=0,h=r,c={},f={},g={};for(let e=0;e<d.length;e+=1){let{data:r,id:n}=d[e];if(c[n]=[0,0],s){let o={id:e,rx:r.x,ry:r.y,mass:1,g:a,degree:t.getDegree(n)};g[n]=new oc(o)}}for(;h>0;)l=this.oneStep(t,{iter:h,preventOverlapIters:50,krPrime:100,sg:l,forces:c,preForces:f,bodies:g,sizes:n},i),h--,null==u||u({nodes:d,edges:e.getAllEdges()});return t}oneStep(t,e,r){let{iter:n,preventOverlapIters:o,krPrime:i,sg:a,preForces:s,bodies:u,sizes:d}=e,{forces:l}=e,{preventOverlap:h,barnesHut:c}=r,f=t.getAllNodes();for(let t=0;t<f.length;t+=1){let{id:e}=f[t];s[e]=[...l[e]],l[e]=[0,0]}return l=this.getAttrForces(t,n,o,d,l,r),l=c&&(h&&n>o||!h)?this.getOptRepGraForces(t,l,u,r):this.getRepGraForces(t,n,o,l,i,d,r),this.updatePos(t,l,s,a,r)}getAttrForces(t,e,r,n,o,i){let{preventOverlap:a,dissuadeHubs:s,mode:u,prune:d}=i,l=t.getAllEdges();for(let i=0;i<l.length;i+=1){let{source:h,target:c}=l[i],f=t.getNode(h),g=t.getNode(c),p=t.getDegree(h),v=t.getDegree(c);if(d&&(p<=1||v<=1))continue;let y=[g.data.x-f.data.x,g.data.y-f.data.y],m=Math.hypot(y[0],y[1]);m=m<1e-4?1e-4:m,y[0]=y[0]/m,y[1]=y[1]/m,a&&e<r&&(m=m-n[h]-n[c]);let x=m,w=x;"linlog"===u&&(w=x=Math.log(1+m)),s&&(x=m/p,w=m/v),a&&e<r&&m<=0?(x=0,w=0):a&&e<r&&m>0&&(x=m,w=m),o[h][0]+=x*y[0],o[c][0]-=w*y[0],o[h][1]+=x*y[1],o[c][1]-=w*y[1]}return o}getOptRepGraForces(t,e,r,n){let{kg:o,center:i,prune:a}=n,s=t.getAllNodes(),u=s.length,d=9e10,l=-9e10,h=9e10,c=-9e10;for(let e=0;e<u;e+=1){let{id:n,data:o}=s[e];!(a&&1>=t.getDegree(n))&&(r[n].setPos(o.x,o.y),o.x>=l&&(l=o.x),o.x<=d&&(d=o.x),o.y>=c&&(c=o.y),o.y<=h&&(h=o.y))}let f=Math.max(l-d,c-h),g=new of({xmid:(l+d)/2,ymid:(c+h)/2,length:f,massCenter:i,mass:u}),p=new og(g);for(let e=0;e<u;e+=1){let{id:n}=s[e];!(a&&1>=t.getDegree(n))&&r[n].in(g)&&p.insert(r[n])}for(let n=0;n<u;n+=1){let{id:u,data:d}=s[n],l=t.getDegree(u);if(a&&l<=1)continue;r[u].resetForce(),p.updateForce(r[u]),e[u][0]-=r[u].fx,e[u][1]-=r[u].fy;let h=[d.x-i[0],d.y-i[1]],c=Math.hypot(h[0],h[1]);c=c<1e-4?1e-4:c,h[0]=h[0]/c,h[1]=h[1]/c;let f=o*(l+1);e[u][0]-=f*h[0],e[u][1]-=f*h[1]}return e}getRepGraForces(t,e,r,n,o,i,a){let{preventOverlap:s,kr:u,kg:d,center:l,prune:h}=a,c=t.getAllNodes(),f=c.length;for(let a=0;a<f;a+=1){let g=c[a],p=t.getDegree(g.id);for(let d=a+1;d<f;d+=1){let a=c[d],l=t.getDegree(a.id);if(h&&(p<=1||l<=1))continue;let f=[a.data.x-g.data.x,a.data.y-g.data.y],v=Math.hypot(f[0],f[1]);v=v<1e-4?1e-4:v,f[0]=f[0]/v,f[1]=f[1]/v,s&&e<r&&(v=v-i[g.id]-i[a.id]);let y=u*(p+1)*(l+1)/v;s&&e<r&&v<0?y=o*(p+1)*(l+1):s&&e<r&&0===v?y=0:s&&e<r&&v>0&&(y=u*(p+1)*(l+1)/v),n[g.id][0]-=y*f[0],n[a.id][0]+=y*f[0],n[g.id][1]-=y*f[1],n[a.id][1]+=y*f[1]}let v=[g.data.x-l[0],g.data.y-l[1]],y=Math.hypot(v[0],v[1]);v[0]=v[0]/y,v[1]=v[1]/y;let m=d*(p+1);n[g.id][0]-=m*v[0],n[g.id][1]-=m*v[1]}return n}updatePos(t,e,r,n,o){let{ks:i,tao:a,prune:s,ksmax:u}=o,d=t.getAllNodes(),l=d.length,h=[],c=[],f=0,g=0,p=n;for(let n=0;n<l;n+=1){let{id:o}=d[n],i=t.getDegree(o);if(s&&i<=1)continue;let a=[e[o][0]-r[o][0],e[o][1]-r[o][1]],u=Math.hypot(a[0],a[1]),l=[e[o][0]+r[o][0],e[o][1]+r[o][1]],p=Math.hypot(l[0],l[1]);h[n]=u,c[n]=p/2,f+=(i+1)*h[n],g+=(i+1)*c[n]}let v=p;p=a*g/f,0!==v&&(p=p>1.5*v?1.5*v:p);for(let r=0;r<l;r+=1){let{id:n,data:o}=d[r],a=t.getDegree(n);if(s&&a<=1||z(o.fx)&&z(o.fy))continue;let l=i*p/(1+p*Math.sqrt(h[r])),c=Math.hypot(e[n][0],e[n][1]),f=u/(c=c<1e-4?1e-4:c),g=(l=l>f?f:l)*e[n][0],v=l*e[n][1];t.mergeNodeData(n,{x:o.x+g,y:o.y+v})}return p}},dagre:oh,antvDagre:class{constructor(t={}){this.options=t,this.id="antv-dagre",this.options=Object.assign(Object.assign({},e8),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,t,e)})}genericDagreLayout(t,e,r){return a(this,void 0,void 0,function*(){let n;let{nodeSize:o,align:i,rankdir:a="TB",ranksep:s,nodesep:u,ranksepFunc:d,nodesepFunc:l,edgeLabelSpace:h,ranker:f,nodeOrder:g,begin:p,controlPoints:v,radial:y,sortByCombo:m,preset:x}=Object.assign(Object.assign({},this.options),r),w=new c({tree:[]}),b=e2(s||50,d),E=e2(u||50,l),N=E,M=b;("LR"===a||"RL"===a)&&(N=b,M=E);let _=e3(10,o,!1),k=e.getAllNodes(),j=e.getAllEdges();k.forEach(t=>{let e=e1(_(t)),r=M(t),n=N(t),o=e[0]+2*n,i=e[1]+2*r,a=t.data.layer;z(a)?w.addNode({id:t.id,data:{width:o,height:i,layer:a}}):w.addNode({id:t.id,data:{width:o,height:i}})}),m&&(w.attachTreeStructure("combo"),k.forEach(t=>{let{parentId:e}=t.data;void 0!==e&&w.hasNode(e)&&w.setParent(t.id,e,"combo")})),j.forEach(t=>{w.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||1}})}),(null==x?void 0:x.length)&&(n=new c({nodes:x})),ej(w,{prevGraph:n,edgeLabelSpace:h,keepNodeOrder:!!g,nodeOrder:g||[],acyclicer:"greedy",ranker:f,rankdir:a,nodesep:u,align:i});let O=[0,0];if(p){let t=1/0,e=1/0;w.getAllNodes().forEach(r=>{t>r.data.x&&(t=r.data.x),e>r.data.y&&(e=r.data.y)}),w.getAllEdges().forEach(r=>{var n;null===(n=r.data.points)||void 0===n||n.forEach(r=>{t>r.x&&(t=r.x),e>r.y&&(e=r.y)})}),O[0]=p[0]-t,O[1]=p[1]-e}let A="LR"===a||"RL"===a;if(y);else{let t=new Set,e="BT"===a||"RL"===a;w.getAllNodes().forEach(e=>{e.data.x=e.data.x+O[0],e.data.y=e.data.y+O[1],t.add(A?e.data.x:e.data.y)});let r=Array.from(t).sort(e?(t,e)=>e-t:(t,e)=>t-e),n=A?(t,e)=>t.x!==e.x:(t,e)=>t.y!==e.y,o=A?(t,e,r)=>{let n=Math.max(e.y,r.y),o=Math.min(e.y,r.y);return t.filter(t=>t.y<=n&&t.y>=o)}:(t,e,r)=>{let n=Math.max(e.x,r.x),o=Math.min(e.x,r.x);return t.filter(t=>t.x<=n&&t.x>=o)};w.getAllEdges().forEach((t,e)=>{var i;h&&v&&"loop"!==t.data.type&&(t.data.controlPoints=e5(null===(i=t.data.points)||void 0===i?void 0:i.map(({x:t,y:e})=>({x:t+O[0],y:e+O[1]})),w.getNode(t.source),w.getNode(t.target),r,A,n,o))})}let S=[];S=w.getAllNodes().map(t=>eZ(t));let I=w.getAllEdges();return t&&(S.forEach(t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),I.forEach(t=>{e.mergeEdgeData(t.id,{controlPoints:t.data.controlPoints})})),{nodes:S,edges:I}})}},comboCombined:class{constructor(t={}){this.options=t,this.id="comboCombined",this.options=Object.assign(Object.assign({},nt),t)}execute(t,e){return a(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,t,e)})}assign(t,e){return a(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,t,e)})}genericComboCombinedLayout(t,e,r){return a(this,void 0,void 0,function*(){let n;let o=this.initVals(Object.assign(Object.assign({},this.options),r)),{center:i,treeKey:a,outerLayout:s}=o,u=e.getAllNodes().filter(t=>!t.data._isCombo),d=e.getAllNodes().filter(t=>t.data._isCombo),l=e.getAllEdges(),h=null==u?void 0:u.length;if(!h||1===h)return e4(e,t,i);let f=[],g=new Map;u.forEach(t=>{g.set(t.id,t)});let p=new Map;d.forEach(t=>{p.set(t.id,t)});let v=new Map,y=this.getInnerGraphs(e,a,g,p,l,o,v);yield Promise.all(y);let m=new Map,x=[],w=new Map,b=!0;e.getRoots(a).forEach(t=>{let r=v.get(t.id),n=p.get(t.id)||g.get(t.id),o={id:t.id,data:Object.assign(Object.assign({},t.data),{x:r.data.x||n.data.x,y:r.data.y||n.data.y,fx:r.data.fx||n.data.fx,fy:r.data.fy||n.data.fy,mass:r.data.mass||n.data.mass,size:r.data.size})};x.push(o),m.set(t.id,!0),isNaN(o.data.x)||0===o.data.x||isNaN(o.data.y)||0===o.data.y?(o.data.x=100*Math.random(),o.data.y=100*Math.random()):b=!1,r3(e,[t],e=>{e.id!==t.id&&w.set(e.id,t.id)},"TB",a)});let E=[];if(l.forEach(t=>{let e=w.get(t.source)||t.source,r=w.get(t.target)||t.target;e!==r&&m.has(e)&&m.has(r)&&E.push({id:t.id,source:e,target:r,data:{}})}),null==x?void 0:x.length){if(1===x.length)x[0].data.x=i[0],x[0].data.y=i[1];else{let t=new c({nodes:x,edges:E}),e=s||new r_;if(b&&r7[e.id]){let e=x.length<100?new r8:new ro;yield e.assign(t)}let r=Object.assign({center:i,kg:5,preventOverlap:!0,animate:!1},"force"===e.id?{gravity:1,factor:4,linkDistance:(t,e,r)=>(Math.max(...e.data.size)||32)/2+(Math.max(...r.data.size)||32)/2+200}:{});n=yield ne(e,t,r)}v.forEach(t=>{var e;let r=n.nodes.find(e=>e.id===t.id);if(r){let{x:e,y:n}=r.data;t.data.visited=!0,t.data.x=e,t.data.y=n,f.push({id:t.id,data:{x:e,y:n}})}let{x:o,y:i}=t.data;null===(e=t.data.nodes)||void 0===e||e.forEach(t=>{f.push({id:t.id,data:{x:t.data.x+o,y:t.data.y+i}})})}),v.forEach(({data:t})=>{let{x:e,y:r,visited:n,nodes:o}=t;null==o||o.forEach(t=>{if(!n){let n=f.find(e=>e.id===t.id);n.data.x+=e||0,n.data.y+=r||0}})})}return t&&f.forEach(t=>{e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),{nodes:f,edges:l}})}initVals(t){let e,r,n;let o=Object.assign({},t),{nodeSize:i,spacing:a,comboPadding:s}=t;if(r=z(a)?()=>a:eQ(a)?a:()=>0,o.spacing=r,i){if(eQ(i))e=t=>{let e=i(t),n=r(t);return rr(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+n)/2:((e||32)+n)/2};else if(rr(i)){let t=(i[0]>i[1]?i[0]:i[1])/2;e=e=>t+r(e)/2}else{let t=i/2;e=e=>t+r(e)/2}}else e=t=>{let e=r(t);return t.size?rr(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+e)/2:e0(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+e)/2:(t.size+e)/2:32+e/2};return o.nodeSize=e,n=z(s)?()=>s:rr(s)?()=>Math.max.apply(null,s):eQ(s)?s:()=>0,o.comboPadding=n,o}getInnerGraphs(t,e,r,n,o,i,s){let{nodeSize:u,comboPadding:d,spacing:l,innerLayout:h}=i,f=h||new ro({}),g={center:[0,0],preventOverlap:!0,nodeSpacing:l},p=[],v=t=>{let e=(null==d?void 0:d(t))||10;return rr(e)&&(e=Math.max(...e)),{size:e?[2*e,2*e]:[30,30],padding:e}};return t.getRoots(e).forEach(i=>{s.set(i.id,{id:i.id,data:{nodes:[],size:v(i).size}});let d=Promise.resolve();r3(t,[i],i=>{var l;if(!i.data._isCombo)return;let{size:h,padding:p}=v(i);if(null===(l=t.getChildren(i.id,e))||void 0===l?void 0:l.length){let l=s.get(i.id);s.set(i.id,{id:i.id,data:Object.assign({nodes:[]},null==l?void 0:l.data)});let h=new Map,v=t.getChildren(i.id,e).map(t=>{if(t.data._isCombo)return s.has(t.id)||s.set(t.id,{id:t.id,data:Object.assign({},t.data)}),h.set(t.id,!0),s.get(t.id);let e=r.get(t.id)||n.get(t.id);return h.set(t.id,!0),{id:t.id,data:Object.assign(Object.assign({},e.data),t.data)}}),y={nodes:v,edges:o.filter(t=>h.has(t.source)&&h.has(t.target))},m=1/0;v.forEach(t=>{var e;let{size:r}=t.data;r||(r=(null===(e=s.get(t.id))||void 0===e?void 0:e.data.size)||(null==u?void 0:u(t))||[30,30]),z(r)&&(r=[r,r]);let[n,o]=r;m>n&&(m=n),m>o&&(m=o),t.data.size=r}),d=d.then(()=>a(this,void 0,void 0,function*(){let t=new c(y);yield ne(f,t,g,!0);let{minX:e,minY:r,maxX:n,maxY:o}=r1(v),a={x:(n+e)/2,y:(o+r)/2};y.nodes.forEach(t=>{t.data.x-=a.x,t.data.y-=a.y});let u=[Math.max(n-e,m)+2*p,Math.max(o-r,m)+2*p];s.get(i.id).data.size=u,s.get(i.id).data.nodes=v}))}else s.set(i.id,{id:i.id,data:Object.assign(Object.assign({},i.data),{size:h})});return!0},"BT",e),p.push(d)}),p}}};w({stopLayout(){(null==t?void 0:t.stop)&&t.stop()},calculateLayout(e,r){return a(this,void 0,void 0,function*(){let{layout:{id:n,options:o,iterations:i},nodes:a,edges:s}=e,u=new c({nodes:a,edges:s}),d=oT[n];if(d)t=new d(o);else throw Error(`Unknown layout id: ${n}`);let l=yield t.execute(u);return r9(t)&&(t.stop(),l=t.tick(i)),[l,r]})}})})();
//# sourceMappingURL=worker.1c31f1cd.js.map
